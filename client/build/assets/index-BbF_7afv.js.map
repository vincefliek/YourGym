{"version":3,"mappings":"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","names":["m","require$$0","createRoot","TanStackRouterDevtools","AppContext","React","connect","params","mapToProps","Wrapped","ConnectedView","props","context","__publicField","store","jsx","requireData","getInfo","info","isData","onNoData","isIOS","_window","userAgent","createRAFInterval","callback","interval","last","stopped","loop","ts","getTimestampWithTimeZone","date","offsetMinutes","sign","hours","minutes","controller","serviceLocator","authApi","trainingsApi","notificationsApi","getStoreData","getById","id","it","email","password","e","trA","trB","trainingId","training","timestamptz","sets","set","SvgDelete","React.createElement","hasOwn","classNames","classes","arg","argType","inner","key","module","AuthForm","title","onSubmit","setEmail","setPassword","_onSubmit","style","jsxs","Button","PureHome","isAuthenticated","signin","signup","onDeleteCompletedTraining","createSetsPreview","expandedTrainingId","setExpandedTrainingId","toggleExpanded","prev","isLoginForm","setIsLoginForm","renderTrainings","completedTrainings","getDateAndTime","Fragment","isExpanded","DeleteIcon","ex","Layout","Navbar","state","Home","ctrl","navigationApi","getData","newTraining","SvgAdd","PureTrainings","data","renderAddFirstTraining","onAdd","onDelete","onOpen","renderTopBar","NavbarContainer","AddIcon","Trainings","registerSW","options","immediate","onNeedRefresh","onOfflineReady","onRegistered","onRegisteredSW","onRegisterError","wb","registerPromise","sendSkipWaitingMessage","updateServiceWorker","_reloadPage","register","__vitePreload","Workbox","onNeedRefreshCalled","showSkipWaitingPrompt","event","r","useRegisterSW","needRefresh","setNeedRefresh","useState","offlineReady","setOfflineReady","syncApi","auth","sync","UpdateStaticsInServiceWorker","PureMenu","authData","syncData","signout","TrainingProgressCard","Menu","NotFound","exercise","name","_a","newExerciseId","_b","exerciseId","PureCreateTraining","onChangeName","onAddExercise","onSave","onDeleteExercise","onOpenExercise","Training","CreateTraining","reWhitespace","trimmedEndIndex","string","index","_trimmedEndIndex","reTrimStart","baseTrim","_baseTrim","isObject","value","type","isObject_1","freeGlobal","global","_freeGlobal","freeSelf","root","_root","Symbol","_Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","isOwn","tag","unmasked","result","_getRawTag","objectToString","_objectToString","require$$1","require$$2","nullTag","undefinedTag","baseGetTag","_baseGetTag","isObjectLike","isObjectLike_1","symbolTag","isSymbol","isSymbol_1","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","other","isBinary","toNumber_1","getParams","setId","PureCreateExercise","onChangeRepetitions","onChangeWeight","onAddSet","Exercise","CreateExercise","findTraining","activeTraining","firstExercise","trainings","SvgEdit","SvgBackArrow","PureTraining","onBack","onEdit","BackIcon","EditIcon","isAnyTrainingInProgress","isCurrentTrainingInProgress","onStart","onFinish","areExercises","changeSet","update","currentExerciseIndex","nextExerciseId","prevExerciseId","a","b","tr","SvgArrowLeft","SvgArrowRight","SvgDone","PureExercise$1","isInProgress","getCurrentExercise","getTotalExercises","onExerciseNext","onExercisePrev","ArrowLeft","ArrowRight","onDoneSet","onResetDoneSet","isDisabledInput","Input","DoneIcon","setsHistory","setsByDate","areSets","areSetsHistory","PureExercise","exercises","PureEditNewExercise","EditNewExercise","PureEditExistingExercise","EditExistingExercise","PureEditExistingTraining","onEditExercise","TrainingComp","EditExistingTraining","PureAuthProtection","navigate","useEffect","Outlet","AuthProtection","toDateKey","d","aggregateByDay","completed","map","ct","agg","s","weight","reps","lastNDays","aggregates","n","aggMap","MS_DAY","i","offset","v","getStore","PureDashboard","TrainingProgressChart","Dashboard","RootComp","WrappedHome","WrappedDashboard","WrappedAuthProtection","WrappedMenu","WrappedTrainings","WrappedTraining","WrappedEditExistingTraining","WrappedCreateTraining","WrappedExercise","WrappedEditExistingExercise","WrappedEditNewExercise","WrappedCreateExercise","App","apis","appContext","routePathsToComponents","MantineProvider","Notifications","BlockingLayer","RouterProvider","className","children","classnames","SvgBurger","SvgDumbbell","_isIOS","skin","font","size","disabled","onClick","skinClassName","fontClassName","sizeClassName","Component","IOSFixedOnClickButton","RegularButton","isScrolling","onPointerMove","onPointerDown","onPointerUp","PureNavbar","onHomeClick","onTrainingsClick","onBurgerClick","isHomeActive","isTrainingsActive","isBurgerActive","Burger","Dumbbell","topBar","bottomBar","dataTestId","onChange","onBlur","localValue","setLocalValue","onChangeLocal","useCallback","eventObject","newValue","onBlurLocal","asyncTag","funcTag","genTag","proxyTag","isFunction","isFunction_1","coreJsData","_coreJsData","maskSrcKey","uid","isMasked","func","_isMasked","funcProto","funcToString","toSource","_toSource","require$$3","reRegExpChar","reIsHostCtor","reIsNative","baseIsNative","pattern","_baseIsNative","getValue","object","_getValue","getNative","_getNative","defineProperty","_defineProperty","baseAssignValue","_baseAssignValue","arrayAggregator","array","setter","iteratee","accumulator","length","_arrayAggregator","createBaseFor","fromRight","keysFunc","iterable","_createBaseFor","baseFor","_baseFor","baseTimes","_baseTimes","argsTag","baseIsArguments","_baseIsArguments","propertyIsEnumerable","isArguments","isArguments_1","isArray","isArray_1","stubFalse","stubFalse_1","freeExports","exports","freeModule","moduleExports","Buffer","nativeIsBuffer","isBuffer","MAX_SAFE_INTEGER","reIsUint","isIndex","_isIndex","isLength","isLength_1","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","_baseIsTypedArray","baseUnary","_baseUnary","freeProcess","nodeUtil","types","nodeIsTypedArray","isTypedArray","isTypedArray_1","require$$4","require$$5","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","_arrayLikeKeys","isPrototype","Ctor","proto","_isPrototype","overArg","transform","_overArg","nativeKeys","_nativeKeys","baseKeys","_baseKeys","isArrayLike","isArrayLike_1","keys","keys_1","baseForOwn","_baseForOwn","createBaseEach","eachFunc","collection","_createBaseEach","baseEach","_baseEach","baseAggregator","_baseAggregator","listCacheClear","_listCacheClear","eq","eq_1","assocIndexOf","_assocIndexOf","arrayProto","splice","listCacheDelete","lastIndex","_listCacheDelete","listCacheGet","_listCacheGet","listCacheHas","_listCacheHas","listCacheSet","_listCacheSet","ListCache","entries","entry","_ListCache","stackClear","_stackClear","stackDelete","_stackDelete","stackGet","_stackGet","stackHas","_stackHas","Map","_Map","nativeCreate","_nativeCreate","hashClear","_hashClear","hashDelete","_hashDelete","HASH_UNDEFINED","hashGet","_hashGet","hashHas","_hashHas","hashSet","_hashSet","Hash","_Hash","mapCacheClear","_mapCacheClear","isKeyable","_isKeyable","getMapData","_getMapData","mapCacheDelete","_mapCacheDelete","mapCacheGet","_mapCacheGet","mapCacheHas","_mapCacheHas","mapCacheSet","_mapCacheSet","MapCache","_MapCache","LARGE_ARRAY_SIZE","stackSet","pairs","_stackSet","Stack","_Stack","setCacheAdd","_setCacheAdd","setCacheHas","_setCacheHas","SetCache","values","_SetCache","arraySome","predicate","_arraySome","cacheHas","cache","_cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","bitmask","customizer","equalFunc","stack","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","_equalArrays","Uint8Array","_Uint8Array","mapToArray","_mapToArray","setToArray","_setToArray","symbolProto","symbolValueOf","equalByTag","convert","stacked","_equalByTag","arrayPush","_arrayPush","baseGetAllKeys","symbolsFunc","_baseGetAllKeys","arrayFilter","resIndex","_arrayFilter","stubArray","stubArray_1","nativeGetSymbols","getSymbols","symbol","_getSymbols","getAllKeys","_getAllKeys","equalObjects","objProps","objLength","othProps","objStacked","skipCtor","objValue","objCtor","othCtor","_equalObjects","DataView","_DataView","Promise","_Promise","Set","_Set","WeakMap","_WeakMap","require$$6","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ctorString","_getTag","require$$7","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","_baseIsEqualDeep","baseIsEqual","_baseIsEqual","baseIsMatch","source","matchData","noCustomizer","srcValue","_baseIsMatch","isStrictComparable","_isStrictComparable","getMatchData","_getMatchData","matchesStrictComparable","_matchesStrictComparable","baseMatches","_baseMatches","reIsDeepProp","reIsPlainProp","isKey","_isKey","FUNC_ERROR_TEXT","memoize","resolver","memoized","args","memoize_1","MAX_MEMOIZE_SIZE","memoizeCapped","_memoizeCapped","rePropName","reEscapeChar","stringToPath","match","number","quote","subString","_stringToPath","arrayMap","_arrayMap","symbolToString","baseToString","_baseToString","toString","toString_1","castPath","_castPath","toKey","_toKey","baseGet","path","_baseGet","get","defaultValue","get_1","baseHasIn","_baseHasIn","hasPath","hasFunc","_hasPath","hasIn","hasIn_1","baseMatchesProperty","_baseMatchesProperty","identity","identity_1","baseProperty","_baseProperty","basePropertyDeep","_basePropertyDeep","property","property_1","baseIteratee","_baseIteratee","createAggregator","initializer","_createAggregator","groupBy","groupBy_1","Autocomplete","initialValue","onSelectOption","onCreateOption","onClearSelection","combobox","useCombobox","search","setSearch","exactOptionMatch","item","filteredOptions","grouped","dropdownOptions","group","items","Combobox","onClearBtn","val","label","InputBase","spreadableSymbol","isFlattenable","_isFlattenable","baseFlatten","depth","isStrict","_baseFlatten","baseMap","_baseMap","baseSortBy","comparer","_baseSortBy","compareAscending","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","_compareAscending","compareMultiple","orders","objCriteria","othCriteria","ordersLength","order","_compareMultiple","require$$8","baseOrderBy","iteratees","criteria","_baseOrderBy","apply","thisArg","_apply","nativeMax","overRest","start","otherArgs","_overRest","constant","constant_1","baseSetToString","_baseSetToString","HOT_COUNT","HOT_SPAN","nativeNow","shortOut","count","lastCalled","stamp","remaining","_shortOut","setToString","_setToString","baseRest","_baseRest","isIterateeCall","_isIterateeCall","sortBy","sortBy_1","defaultExerciseTypes","getStoreExerciseTypes","getExerciseTypes","exerciseTypes","_setPrototypeOf","t","_inheritsLoose","o","setPrototypeOf","hasClass","element","addClass","replaceClassName","origClass","classToRemove","removeClass","config","TransitionGroupContext","forceReflow","node","UNMOUNTED","EXITED","ENTERING","ENTERED","EXITING","Transition","_React$Component","_this","parentGroup","appear","initialStatus","_ref","prevState","nextIn","_proto","prevProps","nextStatus","status","timeout","exit","enter","mounting","ReactDOM","_this2","appearing","_ref2","maybeNode","maybeAppearing","timeouts","enterTimeout","_this3","nextState","_this4","active","handler","doesNotHaveTimeoutOrListener","_ref3","maybeNextCallback","_this$props","childProps","_objectWithoutPropertiesLoose","noop","_addClass","c","addOneClass","removeOneClass","CSSTransition","_len","_key","_this$resolveArgument","_this$resolveArgument2","_this$resolveArgument3","_this$resolveArgument4","_this$resolveArgument5","_this$resolveArgument6","isStringClassNames","prefix","baseClassName","activeClassName","doneClassName","phase","_this$getClassNames","_this$appliedClasses$","_extends","_assertThisInitialized","getChildMapping","mapFn","mapper","child","isValidElement","Children","mergeChildMappings","next","getValueForKey","nextKeysPending","pendingKeys","prevKey","childMapping","nextKey","pendingNextKey","getProp","prop","getInitialChildMapping","onExited","cloneElement","getNextChildMapping","nextProps","prevChildMapping","nextChildMapping","hasPrev","hasNext","prevChild","isLeaving","obj","k","defaultProps","TransitionGroup","handleExited","firstRender","currentChildMapping","childFactory","contextValue","exerciseGroups","opened","modalHandlers","useDisclosure","createdOptionLabel","setCreatedOptionLabel","createdOptionGroup","setCreatedOptionGroup","disabledDelete","disabledSave","onCreateNewType","getSelectedTypeLabel","onDeleteSet","isSaveDisabledDefault","startCreatingOption","finishCreatingOption","selectedLabel","renderBottomBar","renderSets","Modal","Select","AUTO_DISMISS_MS","ToastItem","onClose","PureNotifications","notifications","removeNotification","PureBlockingLayer","last7","totalVolumeKg","sessions","variant","height","formatted","ResponsiveContainer","LineChart","Line","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","PureCard","totals","promisifyRequest","request","resolve","reject","createStore","dbName","storeName","dbp","getDB","db","txMode","defaultGetStoreFunc","defaultGetStore","customStore","Store","fn","dataAccessorsToNotify","validateDataAccessors","newData","accessor","subscriber","publicDataAccessors","publicDataAccessorsToData","dataAccessors","validateAllDataAccessorsDeclared","acc","err","idbSet","idbGet","promises","allPublicDataAccessors","persisted","doesDataAccessorsExist","areValidDataAccessors","areAllDataAccessorsDeclared","getRouterParams","createHashHistory","rootRoute","createRootRoute","authProtection","createRoute","menu","home","dashboard","trainingsIndex","trainingIndex","createNewTraining","editExistingTraining","exerciseIndex","createNewExercise","editNewExercise","editExistingExercise","routeTree","router","createRouter","routePathsToRoutes","routePathsToRoutesKeys","initRouter","withComp","routePath","originalRoute","component","createNavigationApi","routes","setConfiguration","getPathParams","route","removeTrailingSlash","getCurrentPath","getCurrentRoutePath","currentPath","matches","currentRoutePath","isRouteOpenedRightNow","setRoute","getRouteBackPath","replace","to","newTrainingId","getRandomValues","rnds8","rng","REGEX","validate","uuid","byteToHex","stringify","arr","v4","buf","rnds","allTrainingsSchema","trainingSchema","exerciseSchema","setSchema","completedTrainingsSchema","completedTrainingSchema","completedExerciseSchema","exerciseTypesSchema","exerciseTypeSchema","createTrainingsApi","validator","dependencies","trainingsServerApi","schema","deleteNewTraining","deleteNewExercise","deleteExercise","_update","addTraining","addExercise","updatedActive","uuidv4","addSet","newExercise","_addSet","deleteSet","_deleteSet","deleteTraining","setsPreview","createPreviewDate","intlDateTimeOptions","locale","timeZone","createPreviewTime","currentHours","currentMinutes","_get","_create","templateTraining","newExerciseType","updatedTypes","input","templateTrainingsId","templateExerciseId","templateExercise","_data","createdInDbAt","error","restoredData","validateEmail","validatePassword","createAuthApi","tools","tokenStorage","httpClientAPI","session","errorMessage","getSession","refreshToken","createHttpClientAPI","baseUrl","refreshEndpoint","defaultHeaders","refreshing","refreshQueue","performRefresh","newToken","currentToken","res","refreshedSession","cb","isExpireSoonFromNow","expiresAtInSeconds","url","reqOptions","retry","method","headers","body","fetchOptions","tokenPair","expires_at","updatedTokens","accessToken","mergedHeaders","response","errMsg","errorText","contentType","sr_completedTrainings","sr_completedTraining","sr_completedExercise","sw_completedTrainings","sw_completedTraining","sw_completedExercise","ServerReadSchemas","ServerWriteSchemas","createTrainingsServerApi","validationResult","converUTCtoTimeZoned","userTz","zoned","toZonedTime","format","getCompletedTrainings","deleteCompletedTraining","workoutId","completedExerciseToServerWriteType","completedTrainingToServerWriteType","workouts","gr","createSyncApi","hasServerChanges","serverHasChanges","syncCompletedTrainings","itemsIds","savedItems","createNotificationsApi","getNotifications","notification","full","createAPIs","accessTokenKey","ResumeManager","retryErr","handlerErr","timeoutMs","cleanup","onOnline","ms","initGlobalTasks","_stopPeriodicTasks","resumeManager","checkAuthStatus","checkSyncStatus","runPeriodicTasks","resumeAppFromBackground","message","stopPeriodicTasks","_prevIsAuthenticated","isChangedAndNewValueTrue","hydrateStoreFromServer","_hydrateInProgress","_hydrationStart","serverCompletedTrainings","clientCompletedTrainings","removeUiBlockingLayer","prevValue","initApp","Validator","rootEl"],"ignoreList":[0,1,10,21,22,23,24,25,26,27,28,29,30,31,32,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,199,200,201,202,203,204,205,206,207,208,209,210,211,221,226,227,228,229,230],"sources":["../../node_modules/react-dom/client.js","../../node_modules/@tanstack/react-router-devtools/dist/esm/index.js","../../src/utils/context.ts","../../src/utils/HOCs/connect.tsx","../../src/utils/HOCs/requireData.tsx","../../src/utils/isIOS.ts","../../src/utils/rafinterval.ts","../../src/utils/timestampWithTimeZone.ts","../../src/screens/home/controller.ts","../../src/assets/delete.svg?react","../../node_modules/classnames/index.js","../../src/screens/home/view.tsx","../../src/screens/trainings/controller.ts","../../src/assets/add.svg?react","../../src/screens/trainings/view.tsx","../../../../../../../../@vite-plugin-pwa/virtual:pwa-register/react","../../src/screens/menu/controller.ts","../../src/screens/menu/view.tsx","../../src/screens/notFound/view.tsx","../../src/screens/createTraining/controller.ts","../../src/screens/createTraining/view.tsx","../../node_modules/lodash/_trimmedEndIndex.js","../../node_modules/lodash/_baseTrim.js","../../node_modules/lodash/isObject.js","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/_Symbol.js","../../node_modules/lodash/_getRawTag.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/_baseGetTag.js","../../node_modules/lodash/isObjectLike.js","../../node_modules/lodash/isSymbol.js","../../node_modules/lodash/toNumber.js","../../src/screens/createExercise/controller.ts","../../src/screens/createExercise/view.tsx","../../src/screens/training/controller.ts","../../src/assets/edit.svg?react","../../src/assets/backArrow.svg?react","../../src/screens/training/view.tsx","../../src/screens/exercise/controller.ts","../../src/assets/arrowLeft.svg?react","../../src/assets/arrowRight.svg?react","../../src/assets/done.svg?react","../../src/screens/exercise/view.tsx","../../src/screens/editNewExercise/controller.ts","../../src/screens/editNewExercise/view.tsx","../../src/screens/editExistingExercise/controller.ts","../../src/screens/editExistingExercise/view.tsx","../../src/screens/editExistingTraining/controller.ts","../../src/screens/editExistingTraining/view.tsx","../../src/screens/authProtection/controller.ts","../../src/screens/authProtection/view.tsx","../../src/model/aggregation.ts","../../src/screens/dashboard/controller.ts","../../src/screens/dashboard/view.tsx","../../src/components/App/App.tsx","../../src/components/NavbarContainer/view.tsx","../../src/assets/burger.svg?react","../../src/assets/dumbbell.svg?react","../../src/components/Navbar/controller.ts","../../src/components/Button/view.tsx","../../src/components/Navbar/view.tsx","../../src/components/Layout/view.tsx","../../src/components/Input/view.tsx","../../node_modules/lodash/isFunction.js","../../node_modules/lodash/_coreJsData.js","../../node_modules/lodash/_isMasked.js","../../node_modules/lodash/_toSource.js","../../node_modules/lodash/_baseIsNative.js","../../node_modules/lodash/_getValue.js","../../node_modules/lodash/_getNative.js","../../node_modules/lodash/_defineProperty.js","../../node_modules/lodash/_baseAssignValue.js","../../node_modules/lodash/_arrayAggregator.js","../../node_modules/lodash/_createBaseFor.js","../../node_modules/lodash/_baseFor.js","../../node_modules/lodash/_baseTimes.js","../../node_modules/lodash/_baseIsArguments.js","../../node_modules/lodash/isArguments.js","../../node_modules/lodash/isArray.js","../../node_modules/lodash/stubFalse.js","../../node_modules/lodash/isBuffer.js","../../node_modules/lodash/_isIndex.js","../../node_modules/lodash/isLength.js","../../node_modules/lodash/_baseIsTypedArray.js","../../node_modules/lodash/_baseUnary.js","../../node_modules/lodash/_nodeUtil.js","../../node_modules/lodash/isTypedArray.js","../../node_modules/lodash/_arrayLikeKeys.js","../../node_modules/lodash/_isPrototype.js","../../node_modules/lodash/_overArg.js","../../node_modules/lodash/_nativeKeys.js","../../node_modules/lodash/_baseKeys.js","../../node_modules/lodash/isArrayLike.js","../../node_modules/lodash/keys.js","../../node_modules/lodash/_baseForOwn.js","../../node_modules/lodash/_createBaseEach.js","../../node_modules/lodash/_baseEach.js","../../node_modules/lodash/_baseAggregator.js","../../node_modules/lodash/_listCacheClear.js","../../node_modules/lodash/eq.js","../../node_modules/lodash/_assocIndexOf.js","../../node_modules/lodash/_listCacheDelete.js","../../node_modules/lodash/_listCacheGet.js","../../node_modules/lodash/_listCacheHas.js","../../node_modules/lodash/_listCacheSet.js","../../node_modules/lodash/_ListCache.js","../../node_modules/lodash/_stackClear.js","../../node_modules/lodash/_stackDelete.js","../../node_modules/lodash/_stackGet.js","../../node_modules/lodash/_stackHas.js","../../node_modules/lodash/_Map.js","../../node_modules/lodash/_nativeCreate.js","../../node_modules/lodash/_hashClear.js","../../node_modules/lodash/_hashDelete.js","../../node_modules/lodash/_hashGet.js","../../node_modules/lodash/_hashHas.js","../../node_modules/lodash/_hashSet.js","../../node_modules/lodash/_Hash.js","../../node_modules/lodash/_mapCacheClear.js","../../node_modules/lodash/_isKeyable.js","../../node_modules/lodash/_getMapData.js","../../node_modules/lodash/_mapCacheDelete.js","../../node_modules/lodash/_mapCacheGet.js","../../node_modules/lodash/_mapCacheHas.js","../../node_modules/lodash/_mapCacheSet.js","../../node_modules/lodash/_MapCache.js","../../node_modules/lodash/_stackSet.js","../../node_modules/lodash/_Stack.js","../../node_modules/lodash/_setCacheAdd.js","../../node_modules/lodash/_setCacheHas.js","../../node_modules/lodash/_SetCache.js","../../node_modules/lodash/_arraySome.js","../../node_modules/lodash/_cacheHas.js","../../node_modules/lodash/_equalArrays.js","../../node_modules/lodash/_Uint8Array.js","../../node_modules/lodash/_mapToArray.js","../../node_modules/lodash/_setToArray.js","../../node_modules/lodash/_equalByTag.js","../../node_modules/lodash/_arrayPush.js","../../node_modules/lodash/_baseGetAllKeys.js","../../node_modules/lodash/_arrayFilter.js","../../node_modules/lodash/stubArray.js","../../node_modules/lodash/_getSymbols.js","../../node_modules/lodash/_getAllKeys.js","../../node_modules/lodash/_equalObjects.js","../../node_modules/lodash/_DataView.js","../../node_modules/lodash/_Promise.js","../../node_modules/lodash/_Set.js","../../node_modules/lodash/_WeakMap.js","../../node_modules/lodash/_getTag.js","../../node_modules/lodash/_baseIsEqualDeep.js","../../node_modules/lodash/_baseIsEqual.js","../../node_modules/lodash/_baseIsMatch.js","../../node_modules/lodash/_isStrictComparable.js","../../node_modules/lodash/_getMatchData.js","../../node_modules/lodash/_matchesStrictComparable.js","../../node_modules/lodash/_baseMatches.js","../../node_modules/lodash/_isKey.js","../../node_modules/lodash/memoize.js","../../node_modules/lodash/_memoizeCapped.js","../../node_modules/lodash/_stringToPath.js","../../node_modules/lodash/_arrayMap.js","../../node_modules/lodash/_baseToString.js","../../node_modules/lodash/toString.js","../../node_modules/lodash/_castPath.js","../../node_modules/lodash/_toKey.js","../../node_modules/lodash/_baseGet.js","../../node_modules/lodash/get.js","../../node_modules/lodash/_baseHasIn.js","../../node_modules/lodash/_hasPath.js","../../node_modules/lodash/hasIn.js","../../node_modules/lodash/_baseMatchesProperty.js","../../node_modules/lodash/identity.js","../../node_modules/lodash/_baseProperty.js","../../node_modules/lodash/_basePropertyDeep.js","../../node_modules/lodash/property.js","../../node_modules/lodash/_baseIteratee.js","../../node_modules/lodash/_createAggregator.js","../../node_modules/lodash/groupBy.js","../../src/components/Autocomplete/view.tsx","../../node_modules/lodash/_isFlattenable.js","../../node_modules/lodash/_baseFlatten.js","../../node_modules/lodash/_baseMap.js","../../node_modules/lodash/_baseSortBy.js","../../node_modules/lodash/_compareAscending.js","../../node_modules/lodash/_compareMultiple.js","../../node_modules/lodash/_baseOrderBy.js","../../node_modules/lodash/_apply.js","../../node_modules/lodash/_overRest.js","../../node_modules/lodash/constant.js","../../node_modules/lodash/_baseSetToString.js","../../node_modules/lodash/_shortOut.js","../../node_modules/lodash/_setToString.js","../../node_modules/lodash/_baseRest.js","../../node_modules/lodash/_isIterateeCall.js","../../node_modules/lodash/sortBy.js","../../src/components/Exercise/constants.ts","../../src/components/Exercise/controller.ts","../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../../node_modules/dom-helpers/esm/hasClass.js","../../node_modules/dom-helpers/esm/addClass.js","../../node_modules/dom-helpers/esm/removeClass.js","../../node_modules/react-transition-group/esm/config.js","../../node_modules/react-transition-group/esm/TransitionGroupContext.js","../../node_modules/react-transition-group/esm/utils/reflow.js","../../node_modules/react-transition-group/esm/Transition.js","../../node_modules/react-transition-group/esm/CSSTransition.js","../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../node_modules/react-transition-group/esm/utils/ChildMapping.js","../../node_modules/react-transition-group/esm/TransitionGroup.js","../../src/components/Exercise/view.tsx","../../src/components/Training/view.tsx","../../src/components/Notifications/controller.ts","../../src/components/Notifications/view.tsx","../../src/components/BlockingLayer/controller.ts","../../src/components/BlockingLayer/view.tsx","../../src/components/TrainingProgressCard/controller.tsx","../../src/components/TrainingProgressChart/view.tsx","../../src/components/TrainingProgressCard/view.tsx","../../node_modules/idb-keyval/dist/index.js","../../src/model/store/store.ts","../../src/model/apis/navigationApi/getRouterParams.ts","../../src/model/apis/navigationApi/router.ts","../../src/model/apis/navigationApi/navigationApi.ts","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/regex.js","../../node_modules/uuid/dist/esm-browser/validate.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/model/apis/trainingsApi/schemas.ts","../../src/model/apis/trainingsApi/trainingsApi.ts","../../src/model/apis/authApi/authValidation.ts","../../src/model/apis/authApi/authApi.ts","../../src/model/apis/httpClientApi/httpClientApi.ts","../../src/model/apis/trainingsServerApi/schemas.ts","../../src/model/apis/trainingsServerApi/trainingsServerApi.ts","../../src/model/apis/syncApi/syncApi.ts","../../src/model/apis/notificationsApi/notificationsApi.ts","../../src/model/apis/index.ts","../../src/model/initialization/resumeManager.ts","../../src/model/initialization/globalTasks.ts","../../src/model/initialization/initialization.ts","../../src/index.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { TanStackRouterDevtools as TanStackRouterDevtools$1 } from \"./TanStackRouterDevtools.js\";\nimport { TanStackRouterDevtoolsPanel as TanStackRouterDevtoolsPanel$1 } from \"./TanStackRouterDevtoolsPanel.js\";\nconst TanStackRouterDevtools = process.env.NODE_ENV !== \"development\" ? function() {\n  return null;\n} : TanStackRouterDevtools$1;\nconst TanStackRouterDevtoolsInProd = TanStackRouterDevtools$1;\nconst TanStackRouterDevtoolsPanel = process.env.NODE_ENV !== \"development\" ? function() {\n  return null;\n} : TanStackRouterDevtoolsPanel$1;\nconst TanStackRouterDevtoolsPanelInProd = TanStackRouterDevtoolsPanel$1;\nexport {\n  TanStackRouterDevtools,\n  TanStackRouterDevtoolsInProd,\n  TanStackRouterDevtoolsPanel,\n  TanStackRouterDevtoolsPanelInProd\n};\n//# sourceMappingURL=index.js.map\n","import React from 'react';\nimport { AppContext as IAppContext } from '../types';\n\nexport const AppContext = React.createContext<IAppContext>({\n  serviceLocator: {\n    getStore: () => ({\n      getStoreData: () => ({}),\n      subscribe: () => () => {},\n    }),\n    getAPIs: () =>\n      ({\n        navigationApi: {\n          routes: {\n            home: '',\n            trainings: '',\n            menu: '',\n            createTraining: '',\n            createExercise: '',\n            editNewExercise: '',\n            editExistingExercise: '',\n            openTraining: '',\n            openExercise: '',\n          },\n        },\n      }) as any,\n  },\n});\n","import React from 'react';\n\nimport { AppContext } from '../context';\nimport { ConnectParams, MapToProps } from './types';\n\nexport const connect = <\n  Controller extends object,\n  StateProps extends object,\n  OwnProps extends object = {},\n>(\n  params: ConnectParams<Controller>,\n  mapToProps: MapToProps<Controller, StateProps>,\n) => {\n  if (typeof params !== 'object') {\n    throw new Error('First argument in `connect` function is mandatory');\n  }\n\n  if (typeof params.controller !== 'function') {\n    throw new Error(\n      '`params.controller` property in `connect` function is mandatory',\n    );\n  }\n\n  if (!Array.isArray(params.controller.storeDataAccessors)) {\n    throw new Error(\n      `Controller doesn't have mandatory static property 'storeDataAccessors'`,\n    );\n  }\n\n  type WrappedProps = Omit<StateProps, keyof ReturnType<typeof mapToProps>> &\n    OwnProps;\n\n  return (Wrapped: React.ComponentType<StateProps & OwnProps>) => {\n    class ConnectedView extends React.Component<WrappedProps> {\n      static contextType = AppContext;\n      private unsubscribe?: () => void;\n      private controller: Controller;\n      private stateToProps: ReturnType<typeof mapToProps>;\n\n      constructor(\n        props: WrappedProps,\n        context: React.ContextType<typeof AppContext>,\n      ) {\n        super(props);\n        this.controller = params.controller(context.serviceLocator);\n        this.stateToProps = mapToProps(this.controller);\n\n        const store = context.serviceLocator.getStore();\n\n        if (params.controller.storeDataAccessors.length) {\n          this.unsubscribe = store.subscribe(\n            this._update,\n            params.controller.storeDataAccessors,\n          );\n        }\n      }\n\n      componentWillUnmount() {\n        if (this.unsubscribe) {\n          this.unsubscribe();\n        }\n      }\n\n      _update = () => {\n        this.stateToProps = mapToProps(this.controller);\n        this.forceUpdate();\n      };\n\n      render() {\n        return (\n          <Wrapped\n            {...(this.props as StateProps & OwnProps)}\n            {...this.stateToProps}\n          />\n        );\n      }\n    }\n\n    return ConnectedView;\n  };\n};\n","import React, { ComponentType } from 'react';\nimport { RequireDataConfig } from './types';\n\n// type RequiredDataHOC = <P extends object>(config: (props: P) => RequireDataConfig) =>\n//   (Component: ComponentType<P>) => ComponentType<P>;\n\nexport const requireData = <P extends object>(\n  getInfo: (props: P) => RequireDataConfig,\n) => {\n  if (typeof getInfo !== 'function') {\n    throw new Error(\n      '`getInfo` argument in `requireData` function is mandatory',\n    );\n  }\n\n  const info = getInfo({} as any);\n  const infoExists = Boolean(\n    Object.prototype.hasOwnProperty.call(info, 'isData') &&\n    Object.prototype.hasOwnProperty.call(info, 'onNoData'),\n  );\n\n  if (!infoExists) {\n    throw new Error('return value of `getInfo()` in `requireData` lacks data!');\n  }\n\n  return <T extends object>(Wrapped: ComponentType<P & T>) => {\n    class ConnectedView extends React.Component<P> {\n      componentDidMount() {\n        this.check();\n      }\n\n      check() {\n        const { isData, onNoData } = getInfo(this.props);\n\n        if (!isData) {\n          onNoData();\n        }\n      }\n\n      render() {\n        const { isData } = getInfo(this.props);\n\n        if (!isData) {\n          return null;\n        }\n\n        return React.createElement(Wrapped, this.props as T & P);\n      }\n    }\n\n    return ConnectedView;\n  };\n};\n","export const isIOS = () => {\n  const _window = window as any;\n  const userAgent = navigator.userAgent || navigator.vendor || _window.opera;\n\n  // Traditional iOS detection\n  if (/iPad|iPhone|iPod/.test(userAgent) && !_window.MSStream) {\n    return true;\n  }\n\n  // Modern iPad detection\n  if (navigator.maxTouchPoints > 0 && /Macintosh/.test(userAgent)) {\n    return true;\n  }\n\n  return false;\n};\n","export function createRAFInterval(\n  callback: (...args: any[]) => any,\n  interval = 1000,\n) {\n  let last = 0;\n  let stopped = false;\n\n  function loop(ts: number) {\n    if (stopped) return;\n\n    if (ts - last >= interval) {\n      last = ts;\n      callback();\n    }\n\n    requestAnimationFrame(loop);\n  }\n\n  requestAnimationFrame(loop);\n\n  return () => {\n    stopped = true;\n  }; // stop fn\n}\n","import { TimestampTZ } from '../model/types';\n\nexport const getTimestampWithTimeZone = (date: Date): TimestampTZ => {\n  const offsetMinutes = -date.getTimezoneOffset();\n  const sign = offsetMinutes >= 0 ? '+' : '-';\n\n  const hours = String(Math.floor(Math.abs(offsetMinutes) / 60)).padStart(\n    2,\n    '0',\n  );\n  const minutes = String(Math.abs(offsetMinutes) % 60).padStart(2, '0');\n\n  return date\n    .toISOString()\n    .replace('Z', `${sign}${hours}:${minutes}`) as TimestampTZ;\n};\n","import {\n  CompletedSet,\n  CompletedTraining,\n  TimestampTZ,\n} from '../../model/types';\nimport { AppContext } from '../../types';\nimport { HomeController } from './types';\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): HomeController => {\n  const { authApi, trainingsApi, notificationsApi } = serviceLocator.getAPIs();\n  const store = serviceLocator.getStore();\n\n  const getStoreData = () => store.getStoreData(controller.storeDataAccessors);\n  const getById = (id: string): CompletedTraining | undefined =>\n    getStoreData().completedTrainings.find(\n      (it: CompletedTraining) => it.id === id,\n    );\n\n  return {\n    isAuthenticated: () => {\n      return getStoreData().auth.isAuthenticated;\n    },\n    signin: async (email: string, password: string) => {\n      try {\n        await authApi.signin(email, password);\n      } catch (e: any) {\n        notificationsApi.addNotification({\n          type: 'error',\n          message: e.message || 'Sigin failed. Double check your credentials!',\n        });\n      }\n    },\n    signup: async (email: string, password: string) => {\n      try {\n        await authApi.signup(email, password);\n      } catch (e: any) {\n        notificationsApi.addNotification({\n          type: 'error',\n          message: e.message || 'Signup failed. Double check your credentials!',\n        });\n      }\n    },\n    getCompletedTrainings: () => {\n      return getStoreData().completedTrainings.sort(\n        (trA: CompletedTraining, trB: CompletedTraining) =>\n          new Date(trB.timestamptz).getTime() -\n          new Date(trA.timestamptz).getTime(),\n      );\n    },\n    onDeleteCompletedTraining: async (trainingId) => {\n      const training = getById(trainingId);\n\n      if (!training) {\n        throw new Error(`Training with ID \"${trainingId}\" doesn't exist!`);\n      }\n\n      const result = window.confirm(\n        `Do you really want to delete \"${training.name}\"?`,\n      );\n\n      if (result) {\n        await trainingsApi.delete.completedTraining(training.id);\n      }\n    },\n    getDateAndTime: (timestamptz: TimestampTZ) => {\n      return {\n        date: trainingsApi.create.datePreview(timestamptz),\n        time: trainingsApi.create.timePreview(timestamptz),\n      };\n    },\n    createSetsPreview: (sets: CompletedSet[]) => {\n      return trainingsApi.create.setsPreview(\n        sets.map((set) => ({\n          ...set,\n          done: true,\n        })),\n      );\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['auth', 'completedTrainings'] as string[];\n","import * as React from \"react\";\nconst SvgDelete = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", viewBox: \"0 0 284.011 284.011\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M235.732,66.214l-28.006-13.301l1.452-3.057c6.354-13.379,0.639-29.434-12.74-35.789L172.316,2.611 c-6.48-3.079-13.771-3.447-20.532-1.042c-6.76,2.406-12.178,7.301-15.256,13.782l-1.452,3.057L107.07,5.106 c-14.653-6.958-32.239-0.698-39.2,13.955L60.7,34.155c-1.138,2.396-1.277,5.146-0.388,7.644c0.89,2.499,2.735,4.542,5.131,5.68 l74.218,35.25h-98.18c-2.797,0-5.465,1.171-7.358,3.229c-1.894,2.059-2.839,4.815-2.607,7.602l13.143,157.706 c1.53,18.362,17.162,32.745,35.588,32.745h73.54c18.425,0,34.057-14.383,35.587-32.745l11.618-139.408l28.205,13.396 c1.385,0.658,2.845,0.969,4.283,0.969c3.74,0,7.328-2.108,9.04-5.712l7.169-15.093C256.646,90.761,250.386,73.175,235.732,66.214z M154.594,23.931c0.786-1.655,2.17-2.905,3.896-3.521c1.729-0.614,3.59-0.521,5.245,0.267l24.121,11.455 c3.418,1.624,4.878,5.726,3.255,9.144l-1.452,3.057l-36.518-17.344L154.594,23.931z M169.441,249.604 c-0.673,8.077-7.55,14.405-15.655,14.405h-73.54c-8.106,0-14.983-6.328-15.656-14.405L52.35,102.728h129.332L169.441,249.604z M231.62,96.835l-2.878,6.06L83.057,33.701l2.879-6.061c2.229-4.695,7.863-6.698,12.554-4.469l128.661,61.108 C231.845,86.509,233.85,92.142,231.62,96.835z\" }));\nexport default SvgDelete;\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import React from 'react';\nimport { Button, Layout, Navbar } from '../../components';\n\nimport { connect } from '../../utils';\nimport { controller } from './controller';\nimport { HomeProps, HomeController } from './types';\nimport DeleteIcon from '../../assets/delete.svg?react';\nimport style from './style.module.scss';\nimport classNames from 'classnames';\n\ninterface AuthFormData {\n  email: string;\n  password: string;\n}\n\ninterface AuthFormProps {\n  title: string;\n  onSubmit: (data: AuthFormData) => void;\n}\n\nconst AuthForm = ({ title, onSubmit }: AuthFormProps) => {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  const _onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    onSubmit({ email, password });\n  };\n\n  return (\n    <form onSubmit={_onSubmit} className={style.authForm}>\n      <h3 className={style.authFormHeader}>{title}</h3>\n      <div className={style.authField}>\n        <label className={style.authLabel} htmlFor=\"email\">\n          Email:\n        </label>\n        <input\n          className={style.authInput}\n          type=\"email\"\n          id=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n      </div>\n      <div className={style.authField}>\n        <label className={style.authLabel} htmlFor=\"password\">\n          Password:\n        </label>\n        <input\n          className={style.authInput}\n          type=\"password\"\n          id=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n      </div>\n      <div className={style.authActions}>\n        <Button\n          type=\"submit\"\n          className={style.authSubmit}\n          skin=\"primary\"\n          size=\"medium\"\n          data-testid=\"auth-submit-button\"\n        >\n          Submit\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nconst PureHome: React.FC<HomeProps> = (props) => {\n  const {\n    isAuthenticated,\n    signin,\n    signup,\n    onDeleteCompletedTraining,\n    createSetsPreview,\n  } = props;\n\n  const [expandedTrainingId, setExpandedTrainingId] = React.useState<\n    string | null\n  >(null);\n\n  const toggleExpanded = (id: string) => {\n    setExpandedTrainingId((prev) => (prev === id ? null : id));\n  };\n\n  const [isLoginForm, setIsLoginForm] = React.useState(true);\n\n  const renderTrainings = () => {\n    const { completedTrainings, getDateAndTime } = props;\n    return (\n      <>\n        <h3 style={{ textAlign: 'center' }}>Recent Trainings</h3>\n        <ul className={style.trainings} data-testid=\"completed-trainings-list\">\n          {completedTrainings.map((training) => {\n            const isExpanded = expandedTrainingId === training.id;\n            return (\n              <li\n                key={training.id}\n                className={style.training}\n                data-testid=\"completed-training-item\"\n              >\n                <div className={style.trainingDate}>\n                  {getDateAndTime(training.timestamptz).date}\n                </div>\n                <div className={style.trainingBoxWrapper}>\n                  <Button\n                    skin=\"icon\"\n                    size=\"medium\"\n                    className={style.trainingDelete}\n                    onClick={() => onDeleteCompletedTraining(training.id)}\n                    data-testid=\"delete-completed-training-button\"\n                  >\n                    <DeleteIcon />\n                  </Button>\n                  <div className={style.trainingBox}>\n                    <div\n                      className={style.trainingBoxHeader}\n                      aria-expanded={isExpanded}\n                    >\n                      <div\n                        className={classNames({\n                          [style.trainingName]: isExpanded,\n                        })}\n                      >\n                        {training.name}\n                      </div>\n                      <Button\n                        className={style.expandIndicator}\n                        skin=\"text\"\n                        size=\"medium\"\n                        onClick={() => toggleExpanded(training.id)}\n                        aria-expanded={isExpanded}\n                        data-testid=\"toggle-completed-training-details-button\"\n                      >\n                        {isExpanded ? '' : ''}\n                      </Button>\n                    </div>\n                    <div\n                      className={classNames(style.exerciseList, {\n                        [style.expanded]: isExpanded,\n                        [style.collapsed]: !isExpanded,\n                      })}\n                    >\n                      {training.exercises.map((ex) => {\n                        return (\n                          <div key={ex.id} className={style.exerciseRow}>\n                            <div className={style.exerciseName}>{ex.name}</div>\n                            <div className={style.exerciseSets}>\n                              {createSetsPreview(ex.sets)}\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </>\n    );\n  };\n\n  return (\n    <Layout bottomBar={<Navbar />} dataTestId=\"home-screen\">\n      <div className={style.screen}>\n        {!isAuthenticated && (\n          <>\n            {isLoginForm ? (\n              <AuthForm\n                title=\"Sign In\"\n                onSubmit={({ email, password }) => signin(email, password)}\n              />\n            ) : (\n              <AuthForm\n                title=\"Sign Up\"\n                onSubmit={({ email, password }) => signup(email, password)}\n              />\n            )}\n            <Button\n              className={style.authToggleButton}\n              skin=\"text\"\n              size=\"medium\"\n              onClick={() => setIsLoginForm((state) => !state)}\n              data-testid=\"toggle-form-type-button\"\n            >\n              {isLoginForm ? 'Go to Sign Up' : 'Go to Sign In'}\n            </Button>\n          </>\n        )}\n        {renderTrainings()}\n      </div>\n    </Layout>\n  );\n};\n\nexport const Home = connect<HomeController, HomeProps>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    isAuthenticated: ctrl.isAuthenticated(),\n    completedTrainings: ctrl.getCompletedTrainings(),\n    onDeleteCompletedTraining: ctrl.onDeleteCompletedTraining,\n    signin: ctrl.signin,\n    signup: ctrl.signup,\n    getDateAndTime: ctrl.getDateAndTime,\n    createSetsPreview: ctrl.createSetsPreview,\n  }),\n)(PureHome);\n","import { AppContext } from '../../types';\nimport { Training } from '../../model/types';\n\nexport const controller = (serviceLocator: AppContext['serviceLocator']) => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { navigationApi, trainingsApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n  const getById = (id: string) =>\n    getData().trainings.find((it: Training) => it.id === id);\n\n  return {\n    getTrainings: () => {\n      return getData().trainings;\n    },\n    onAddTraining: () => {\n      trainingsApi.create.newTraining();\n\n      const newTraining = getData().newTraining;\n\n      if (newTraining?.id) {\n        navigationApi.toCreateTraining(newTraining.id);\n      }\n    },\n    onDeleteTraining: (id: string) => {\n      const training = getById(id);\n\n      if (!training) {\n        throw new Error(`Training with ID \"${id}\" doesn't exist!`);\n      }\n\n      const result = window.confirm(\n        `Do you really want to delete \"${training.name}\"?`,\n      );\n\n      if (result) {\n        trainingsApi.delete.training(id);\n      }\n    },\n    onOpenTraining: (trainingId: string) => {\n      navigationApi.toTraining(trainingId);\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['trainings', 'newTraining'];\n","import * as React from \"react\";\nconst SvgAdd = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", viewBox: \"0 0 489.8 489.8\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M438.2,0H51.6C23.1,0,0,23.2,0,51.6v386.6c0,28.5,23.2,51.6,51.6,51.6h386.6c28.5,0,51.6-23.2,51.6-51.6V51.6 C489.8,23.2,466.6,0,438.2,0z M465.3,438.2c0,14.9-12.2,27.1-27.1,27.1H51.6c-14.9,0-27.1-12.2-27.1-27.1V51.6 c0-14.9,12.2-27.1,27.1-27.1h386.6c14.9,0,27.1,12.2,27.1,27.1V438.2z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M337.4,232.7h-80.3v-80.3c0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3v80.3h-80.3c-6.8,0-12.3,5.5-12.3,12.2 c0,6.8,5.5,12.3,12.3,12.3h80.3v80.3c0,6.8,5.5,12.3,12.3,12.3s12.3-5.5,12.3-12.3v-80.3h80.3c6.8,0,12.3-5.5,12.3-12.3 C349.7,238.1,344.2,232.7,337.4,232.7z\" }));\nexport default SvgAdd;\n","import React from 'react';\n\nimport { Button, Layout, Navbar, NavbarContainer } from '../../components';\nimport { connect } from '../../utils';\nimport { controller } from './controller';\nimport { Training } from '../../model/types';\nimport DeleteIcon from '../../assets/delete.svg?react';\nimport AddIcon from '../../assets/add.svg?react';\n\nimport style from './style.module.scss';\n\ninterface Props {\n  data: Training[];\n  onAdd: () => void;\n  onDelete: (id: string) => void;\n  onOpen: (id: string) => void;\n}\n\ntype Controller = ReturnType<typeof controller>;\n\nconst PureTrainings: React.FC<Props> = (props) => {\n  const { data } = props;\n\n  const isData = data.length;\n\n  const renderAddFirstTraining = () => {\n    const { onAdd } = props;\n    return (\n      <Button\n        skin=\"primary\"\n        font=\"nunito\"\n        className={style.addNew}\n        onClick={onAdd}\n        data-testid=\"add-first-training-button\"\n      >\n        Add your 1st training\n      </Button>\n    );\n  };\n\n  const renderTrainings = () => {\n    const { data, onDelete, onOpen } = props;\n    return (\n      <ul className={style.trainings} data-testid=\"trainings-list\">\n        {data.map((training) => {\n          return (\n            <li\n              key={training.id}\n              className={style.training}\n              data-testid=\"training-item\"\n            >\n              <Button\n                skin=\"icon\"\n                size=\"medium\"\n                className={style.trainingDelete}\n                onClick={() => onDelete(training.id)}\n                data-testid=\"delete-training-button\"\n              >\n                <DeleteIcon />\n              </Button>\n              <div\n                className={style.trainingBox}\n                onClick={() => onOpen(training.id)}\n                data-testid=\"open-training-button\"\n              >\n                {training.name}\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  };\n\n  const renderTopBar = () => {\n    const { onAdd } = props;\n    return (\n      <NavbarContainer className={style.navbarContainer}>\n        <Button\n          skin=\"icon\"\n          size=\"large\"\n          onClick={onAdd}\n          data-testid=\"add-training-button-top\"\n        >\n          <AddIcon />\n        </Button>\n      </NavbarContainer>\n    );\n  };\n\n  if (!isData) {\n    return (\n      <Layout bottomBar={<Navbar />} dataTestId=\"trainings-screen-no-data\">\n        <div className={style.screenAddNew}>{renderAddFirstTraining()}</div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout\n      topBar={renderTopBar()}\n      bottomBar={<Navbar />}\n      dataTestId=\"trainings-screen\"\n    >\n      <div className={style.screen}>{renderTrainings()}</div>\n    </Layout>\n  );\n};\n\nexport const Trainings = connect<Controller, Props>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    data: ctrl.getTrainings(),\n    onAdd: ctrl.onAddTraining,\n    onDelete: ctrl.onDeleteTraining,\n    onOpen: ctrl.onOpenTraining,\n  }),\n)(PureTrainings);\n","// src/client/build/react.ts\nimport { useState } from \"react\";\n\n// src/client/build/register.ts\nvar autoUpdateMode = \"false\";\nvar selfDestroying = \"false\";\nvar auto = autoUpdateMode === \"true\";\nvar autoDestroy = selfDestroying === \"true\";\nfunction registerSW(options = {}) {\n  const {\n    immediate = false,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  let wb;\n  let registerPromise;\n  let sendSkipWaitingMessage;\n  const updateServiceWorker = async (_reloadPage = true) => {\n    await registerPromise;\n    if (!auto) {\n      sendSkipWaitingMessage?.();\n    }\n  };\n  async function register() {\n    if (\"serviceWorker\" in navigator) {\n      wb = await import(\"workbox-window\").then(({ Workbox }) => {\n        return new Workbox(\"/sw.js\", { scope: \"/\", type: \"classic\" });\n      }).catch((e) => {\n        onRegisterError?.(e);\n        return void 0;\n      });\n      if (!wb)\n        return;\n      sendSkipWaitingMessage = () => {\n        wb?.messageSkipWaiting();\n      };\n      if (!autoDestroy) {\n        if (auto) {\n          wb.addEventListener(\"activated\", (event) => {\n            if (event.isUpdate || event.isExternal)\n              window.location.reload();\n          });\n          wb.addEventListener(\"installed\", (event) => {\n            if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n        } else {\n          let onNeedRefreshCalled = false;\n          const showSkipWaitingPrompt = () => {\n            onNeedRefreshCalled = true;\n            wb?.addEventListener(\"controlling\", (event) => {\n              if (event.isUpdate)\n                window.location.reload();\n            });\n            onNeedRefresh?.();\n          };\n          wb.addEventListener(\"installed\", (event) => {\n            if (typeof event.isUpdate === \"undefined\") {\n              if (typeof event.isExternal !== \"undefined\") {\n                if (event.isExternal)\n                  showSkipWaitingPrompt();\n                else\n                  !onNeedRefreshCalled && onOfflineReady?.();\n              } else {\n                !onNeedRefreshCalled && onOfflineReady?.();\n              }\n            } else if (!event.isUpdate) {\n              onOfflineReady?.();\n            }\n          });\n          wb.addEventListener(\"waiting\", showSkipWaitingPrompt);\n        }\n      }\n      wb.register({ immediate }).then((r) => {\n        if (onRegisteredSW)\n          onRegisteredSW(\"/sw.js\", r);\n        else\n          onRegistered?.(r);\n      }).catch((e) => {\n        onRegisterError?.(e);\n      });\n    }\n  }\n  registerPromise = register();\n  return updateServiceWorker;\n}\n\n// src/client/build/react.ts\nfunction useRegisterSW(options = {}) {\n  const {\n    immediate = true,\n    onNeedRefresh,\n    onOfflineReady,\n    onRegistered,\n    onRegisteredSW,\n    onRegisterError\n  } = options;\n  const [needRefresh, setNeedRefresh] = useState(false);\n  const [offlineReady, setOfflineReady] = useState(false);\n  const [updateServiceWorker] = useState(() => {\n    return registerSW({\n      immediate,\n      onOfflineReady() {\n        setOfflineReady(true);\n        onOfflineReady?.();\n      },\n      onNeedRefresh() {\n        setNeedRefresh(true);\n        onNeedRefresh?.();\n      },\n      onRegistered,\n      onRegisteredSW,\n      onRegisterError\n    });\n  });\n  return {\n    needRefresh: [needRefresh, setNeedRefresh],\n    offlineReady: [offlineReady, setOfflineReady],\n    updateServiceWorker\n  };\n}\nexport {\n  useRegisterSW\n};\n","import { AppContext } from '../../types';\nimport { MenuController } from './types';\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): MenuController => {\n  const store = serviceLocator.getStore();\n  const { syncApi, authApi, notificationsApi } = serviceLocator.getAPIs();\n\n  const getStoreData = () => store.getStoreData(controller.storeDataAccessors);\n\n  return {\n    getAuthData: () => {\n      const auth = getStoreData().auth;\n      return {\n        isAuthenticated: auth.isAuthenticated,\n        isLoading: auth.authLoading,\n        error: auth.authError,\n      };\n    },\n    getSyncData: () => {\n      const sync = getStoreData().sync;\n      return {\n        lastSyncAt: sync.lastSyncAt,\n        isLoading: sync.isLoading,\n        serverHasChanges: sync.serverHasChanges,\n        error: sync.error,\n      };\n    },\n    sync: async () => {\n      await syncApi.sync();\n    },\n    signout: async () => {\n      try {\n        await authApi.signout();\n      } catch (e: any) {\n        notificationsApi.addNotification({\n          type: 'error',\n          message: `Sigout failed, details: ${e.message}`,\n        });\n      }\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['auth', 'sync'] as string[];\n","import React from 'react';\nimport { useRegisterSW } from 'virtual:pwa-register/react';\n\nimport { connect } from '../../utils';\nimport { controller } from './controller';\nimport { MenuController } from './types';\n\nimport { Button, Layout, Navbar, TrainingProgressCard } from '../../components';\n\nimport style from './style.module.scss';\n\nfunction UpdateStaticsInServiceWorker() {\n  const {\n    needRefresh: [needRefresh, setNeedRefresh],\n    updateServiceWorker,\n  } = useRegisterSW();\n\n  return (\n    <>\n      <div className={style.twoColumns}>\n        <div>Status:</div>\n        {needRefresh ? <div> New version is waiting...</div> : <div></div>}\n      </div>\n      <br />\n      {needRefresh && (\n        <>\n          <Button\n            skin=\"primary\"\n            font=\"nunito\"\n            size=\"small\"\n            onClick={() => updateServiceWorker(true)}\n            style={{ width: '100%' }}\n            data-testid=\"update-sw-button\"\n          >\n            Update Now\n          </Button>\n          <br />\n          <Button\n            skin=\"zero-style\"\n            font=\"nunito\"\n            onClick={() => setNeedRefresh(false)}\n            style={{ width: '100%' }}\n            data-testid=\"dismiss-sw-button\"\n          >\n            DISMISS\n          </Button>\n        </>\n      )}\n    </>\n  );\n}\n\ninterface PureMenuProps {\n  authData: ReturnType<MenuController['getAuthData']>;\n  syncData: ReturnType<MenuController['getSyncData']>;\n  sync: MenuController['sync'];\n  signout: MenuController['signout'];\n}\n\nconst PureMenu: React.FC<PureMenuProps> = (props) => {\n  const { authData, syncData, sync, signout } = props;\n\n  return (\n    <Layout bottomBar={<Navbar />} dataTestId=\"menu-screen\">\n      <div style={{ marginBottom: 12 }}>\n        <TrainingProgressCard />\n      </div>\n      <div className={style.metadataBox}>\n        <h4>Auth</h4>\n        <div className={style.twoColumns}>\n          <div>Status:</div>\n          {authData.isLoading ? (\n            <div> Loading...</div>\n          ) : authData.isAuthenticated ? (\n            <div></div>\n          ) : (\n            <div></div>\n          )}\n        </div>\n        {authData.error && (\n          <div className={style.twoColumns}>\n            <div>Error:</div>\n            <div>{authData.error}</div>\n          </div>\n        )}\n        <br />\n        <Button\n          skin=\"primary\"\n          font=\"nunito\"\n          onClick={() => signout()}\n          style={{ width: '100%' }}\n          disabled={authData.isLoading}\n          data-testid=\"signout-button\"\n        >\n          Sign out\n        </Button>\n      </div>\n      <div className={style.metadataBox}>\n        <h4>Service Worker</h4>\n        <UpdateStaticsInServiceWorker />\n      </div>\n      <div className={style.metadataBox}>\n        <h4>Sync</h4>\n        <div className={style.twoColumns}>\n          <div>Last at:</div>\n          {syncData.isLoading ? (\n            <div> Loading...</div>\n          ) : syncData.lastSyncAt ? (\n            <div>{syncData.lastSyncAt}</div>\n          ) : (\n            <div> TBD</div>\n          )}\n        </div>\n        <div className={style.twoColumns}>\n          <div>Status:</div>\n          {syncData.serverHasChanges ? (\n            <div> Server has changes </div>\n          ) : (\n            <div></div>\n          )}\n        </div>\n        {syncData.error && (\n          <div className={style.twoColumns}>\n            <div>Error:</div>\n            <div>{syncData.error}</div>\n          </div>\n        )}\n        <br />\n        <Button\n          skin=\"primary\"\n          font=\"nunito\"\n          onClick={sync}\n          style={{ width: '100%' }}\n          disabled={syncData.isLoading}\n          data-testid=\"sync-button\"\n        >\n          Sync\n        </Button>\n      </div>\n      <br />\n    </Layout>\n  );\n};\n\nexport const Menu = connect<MenuController, PureMenuProps>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    authData: ctrl.getAuthData(),\n    syncData: ctrl.getSyncData(),\n    sync: ctrl.sync,\n    signout: ctrl.signout,\n  }),\n)(PureMenu);\n","import { Layout, Navbar } from '../../components';\n\nexport function NotFound() {\n  return (\n    <Layout dataTestId=\"not-found-screen\" bottomBar={<Navbar />}>\n      <div style={{ padding: 12 }}>\n        <h2>404 - Not Found</h2>\n        <p>The page you are looking for does not exist.</p>\n      </div>\n    </Layout>\n  );\n}\n","import { AppContext } from '../../types';\nimport { Exercise } from '../../model/types';\n\nexport const controller = (serviceLocator: AppContext['serviceLocator']) => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { trainingsApi, navigationApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n\n  return {\n    getData: () => {\n      const newTraining = getData().newTraining;\n\n      if (newTraining !== null) {\n        return {\n          ...newTraining,\n          exercises: newTraining.exercises.map((exercise: Exercise) => ({\n            ...exercise,\n            setsPreview: trainingsApi.create.setsPreview(exercise.sets),\n          })),\n        };\n      }\n    },\n    onNoData: () => {\n      navigationApi.toTrainings();\n    },\n    onChangeName: (name: string) => {\n      trainingsApi.update.newTraining({\n        name,\n      });\n    },\n    onAddExercise: async () => {\n      const trainingId = getData().newTraining?.id;\n      if (trainingId) {\n        trainingsApi.create.newExercise();\n\n        const newExerciseId = getData().newExercise?.id;\n\n        if (newExerciseId) {\n          await navigationApi.toCreateExercise(trainingId, newExerciseId, {\n            goBackTo: navigationApi.routes.createTraining,\n          });\n        }\n      }\n    },\n    onDelete: async () => {\n      await navigationApi.toTrainings();\n      trainingsApi.delete.newTraining();\n    },\n    onSave: async () => {\n      await navigationApi.toTrainings();\n      trainingsApi.save.newTraining();\n    },\n    onDeleteExercise: (trainingId: string, exerciseId: string) => {\n      trainingsApi.delete.exercise(trainingId, exerciseId);\n    },\n    onOpenExercise: (exerciseId: string) => {\n      const trainingId = getData().newTraining?.id;\n      if (trainingId) {\n        navigationApi.toEditNewExercise(trainingId, exerciseId, {\n          goBackTo: navigationApi.routes.createTraining,\n        });\n      }\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['newTraining', 'newExercise'];\n","import React from 'react';\n\nimport { Training } from '../../components';\nimport { connect, requireData } from '../../utils';\nimport { controller } from './controller';\n\ninterface Exercise {\n  id: string;\n  name: string;\n  setsPreview: string;\n}\n\ninterface TrainingType {\n  id: string;\n  name: string;\n  exercises: Exercise[];\n}\n\ninterface Props {\n  data: TrainingType;\n  onNoData: () => void;\n  onChangeName: (name: string) => void;\n  onAddExercise: () => void;\n  onDelete: () => Promise<void>;\n  onSave: () => Promise<void>;\n  onDeleteExercise: (trainingId: string, exerciseId: string) => void;\n  onOpenExercise: (exerciseId: string) => void;\n}\n\ninterface Controller {\n  getData: () => TrainingType;\n  onNoData: () => void;\n  onChangeName: (name: string) => void;\n  onAddExercise: () => void;\n  onDelete: () => Promise<void>;\n  onSave: () => Promise<void>;\n  onDeleteExercise: (trainingId: string, exerciseId: string) => void;\n  onOpenExercise: (exerciseId: string) => void;\n}\n\nconst PureCreateTraining: React.FC<Props> = (props) => {\n  const {\n    data,\n    onChangeName,\n    onAddExercise,\n    onDelete,\n    onSave,\n    onDeleteExercise,\n    onOpenExercise,\n  } = props;\n  return (\n    <Training\n      dataTestId=\"create-training-screen\"\n      id={data.id}\n      name={data.name}\n      exercises={data.exercises}\n      onChangeName={onChangeName}\n      onAddExercise={onAddExercise}\n      onDelete={onDelete}\n      onSave={onSave}\n      onDeleteExercise={onDeleteExercise}\n      onOpenExercise={onOpenExercise}\n    />\n  );\n};\n\nexport const CreateTraining = connect<Controller, Props>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    data: ctrl.getData(),\n    onNoData: ctrl.onNoData,\n    onChangeName: ctrl.onChangeName,\n    onAddExercise: ctrl.onAddExercise,\n    onDelete: ctrl.onDelete,\n    onSave: ctrl.onSave,\n    onDeleteExercise: ctrl.onDeleteExercise,\n    onOpenExercise: ctrl.onOpenExercise,\n  }),\n)(\n  requireData<Props>((props) => ({\n    isData: Boolean(props.data),\n    onNoData: props.onNoData,\n  }))(PureCreateTraining),\n);\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","import toNumber from 'lodash/toNumber';\n\nimport { AppContext } from '../../types';\nimport { Set } from '../../model/types';\nimport { Controller } from './types';\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): Controller => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { trainingsApi, navigationApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n  const getParams = () =>\n    navigationApi.getPathParams(navigationApi.routes.createExercise);\n\n  return {\n    getData: () => getData().newExercise,\n    onNoData: () => {\n      navigationApi.toTrainings();\n    },\n    onChangeName: (name: string) => {\n      trainingsApi.update.newExercise({\n        name,\n      });\n    },\n    onChangeRepetitions: (setId: string, value: string) => {\n      const { sets } = getData().newExercise;\n\n      trainingsApi.update.newExercise({\n        sets: sets.map((set: Set) => {\n          if (set.id === setId) {\n            return {\n              ...set,\n              repetitions: toNumber(value),\n            };\n          }\n          return set;\n        }),\n      });\n    },\n    onChangeWeight: (setId: string, value: string) => {\n      const { sets } = getData().newExercise;\n\n      trainingsApi.update.newExercise({\n        sets: sets.map((set: Set) => {\n          if (set.id === setId) {\n            return {\n              ...set,\n              weight: toNumber(value),\n            };\n          }\n          return set;\n        }),\n      });\n    },\n    onAddSet: () => {\n      const trainingId = getParams().training;\n      const exerciseId = getData().newExercise?.id;\n\n      if (trainingId && exerciseId) {\n        trainingsApi.create.set(trainingId, exerciseId);\n      }\n    },\n    onDeleteSet: (exerciseId: string, setId: string) => {\n      const trainingId = getParams().training;\n\n      if (trainingId) {\n        trainingsApi.delete.set(trainingId, exerciseId, setId);\n      }\n    },\n    onDelete: async () => {\n      await navigationApi.goBack({\n        replace: true,\n      });\n      trainingsApi.delete.newExercise();\n    },\n    onSave: async () => {\n      const trainingId = getParams().training;\n\n      await navigationApi.goBack({\n        replace: true,\n      });\n\n      if (trainingId) {\n        trainingsApi.save.newExercise(trainingId);\n      }\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['newExercise'];\n","import React from 'react';\n\nimport { Exercise } from '../../components';\nimport { connect, requireData } from '../../utils';\nimport { controller } from './controller';\nimport {\n  Controller,\n  CreateExerciseOwnProps,\n  CreateExerciseStateProps,\n  CreateExerciseState,\n} from './types';\n\ntype Props = CreateExerciseOwnProps & CreateExerciseStateProps;\n\nclass PureCreateExercise extends React.Component<Props, CreateExerciseState> {\n  _onDeleteSet = (setId: string) => {\n    const exerciseId = this.props.data.id;\n    this.props.onDeleteSet(exerciseId, setId);\n  };\n\n  render() {\n    const {\n      data,\n      onChangeName,\n      onChangeRepetitions,\n      onChangeWeight,\n      onAddSet,\n      onDelete,\n      onSave,\n    } = this.props;\n\n    return (\n      <Exercise\n        dataTestId=\"create-exercise-screen\"\n        data={data}\n        onChangeName={onChangeName}\n        onDeleteSet={this._onDeleteSet}\n        onChangeRepetitions={onChangeRepetitions}\n        onChangeWeight={onChangeWeight}\n        onAddSet={onAddSet}\n        onDelete={onDelete}\n        onSave={onSave}\n      />\n    );\n  }\n}\n\nexport const CreateExercise = connect<\n  Controller,\n  CreateExerciseStateProps,\n  CreateExerciseOwnProps\n>(\n  {\n    controller,\n  },\n  (ctrl): CreateExerciseStateProps => ({\n    data: ctrl.getData(),\n    onChangeName: ctrl.onChangeName,\n    onChangeWeight: ctrl.onChangeWeight,\n    onChangeRepetitions: ctrl.onChangeRepetitions,\n    onNoData: ctrl.onNoData,\n    onAddSet: ctrl.onAddSet,\n    onDeleteSet: ctrl.onDeleteSet,\n    onDelete: ctrl.onDelete,\n    onSave: ctrl.onSave,\n  }),\n)(\n  requireData<Props>((props) => ({\n    isData: Boolean(props.data),\n    onNoData: props.onNoData,\n  }))(PureCreateExercise),\n);\n","import { AppContext } from '../../types';\nimport { Training, Exercise, Set } from '../../model/types';\nimport { Controller } from '../../utils/HOCs/types';\n\nexport const controller: Controller = (\n  serviceLocator: AppContext['serviceLocator'],\n) => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { navigationApi, trainingsApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n  const getParams = () =>\n    navigationApi.getPathParams(navigationApi.routes.openTraining);\n  const findTraining = () => {\n    const params = getParams();\n    const trainings: Training[] = getData().trainings;\n    const training = trainings.find(\n      (training: Training) => training.id === params.training,\n    );\n\n    return training;\n  };\n\n  return {\n    isAnyTrainingInProgress: () => Boolean(getData().activeTraining),\n    isCurrentTrainingInProgress: () => {\n      const training = findTraining();\n      const activeTraining = getData().activeTraining;\n\n      if (training && activeTraining) {\n        return training.id === activeTraining.templateTrainingId;\n      }\n\n      return false;\n    },\n    getTraining: () => {\n      const training = findTraining();\n\n      if (training !== undefined) {\n        training.exercises = training.exercises.map((exercise: Exercise) => ({\n          ...exercise,\n          setsPreview: trainingsApi.create.setsPreview(exercise.sets),\n        }));\n      }\n\n      return training;\n    },\n    onNoData: () => {\n      navigationApi.toTrainings();\n    },\n    onStart: () => {\n      const training = findTraining();\n\n      if (training) {\n        if (!training.exercises.length) {\n          window.alert('Start denied - training has ZERO exercises!');\n          return;\n        }\n\n        trainingsApi.create.newActiveTraining(training.id);\n\n        const firstExercise = training.exercises[0];\n        navigationApi.toExercise(training.id, firstExercise.id);\n      }\n    },\n    onFinish: async () => {\n      const trainingId = findTraining()?.id;\n\n      if (trainingId) {\n        if (!getData().activeTraining) {\n          window.alert('Stop denied - your training was NOT started!');\n          return;\n        }\n\n        // iterate over all exercises => set `done: false` for all sets\n        const trainings = getData().trainings.map((training: Training) => {\n          if (training.id === trainingId) {\n            return {\n              ...training,\n              exercises: training.exercises.map((exercise: Exercise) => {\n                return {\n                  ...exercise,\n                  sets: exercise.sets.map((set: Set) => {\n                    if (set.done) {\n                      trainingsApi.update.newActiveTraining(\n                        trainingId,\n                        exercise.id,\n                        set,\n                      );\n                    }\n                    return {\n                      ...set,\n                      done: false,\n                    };\n                  }),\n                };\n              }),\n            };\n          }\n          return training;\n        });\n\n        trainingsApi.update.allTrainings(trainings);\n\n        trainingsApi.save.newActiveTraining();\n\n        await navigationApi.toHome();\n      }\n    },\n    onBack: () => {\n      navigationApi.toTrainings();\n    },\n    onEdit: () => {\n      const training = findTraining();\n\n      if (training) {\n        navigationApi.toEditTraining(training.id);\n      }\n    },\n    onOpenExercise: (training: Training, exercise: Exercise) => {\n      navigationApi.toExercise(training.id, exercise.id);\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['trainings', 'activeTraining'];\n","import * as React from \"react\";\nconst SvgEdit = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 55.25 55.25\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M52.618,2.631c-3.51-3.508-9.219-3.508-12.729,0L3.827,38.693C3.81,38.71,3.8,38.731,3.785,38.749 c-0.021,0.024-0.039,0.05-0.058,0.076c-0.053,0.074-0.094,0.153-0.125,0.239c-0.009,0.026-0.022,0.049-0.029,0.075 c-0.003,0.01-0.009,0.02-0.012,0.03l-3.535,14.85c-0.016,0.067-0.02,0.135-0.022,0.202C0.004,54.234,0,54.246,0,54.259 c0.001,0.114,0.026,0.225,0.065,0.332c0.009,0.025,0.019,0.047,0.03,0.071c0.049,0.107,0.11,0.21,0.196,0.296 c0.095,0.095,0.207,0.168,0.328,0.218c0.121,0.05,0.25,0.075,0.379,0.075c0.077,0,0.155-0.009,0.231-0.027l14.85-3.535 c0.027-0.006,0.051-0.021,0.077-0.03c0.034-0.011,0.066-0.024,0.099-0.039c0.072-0.033,0.139-0.074,0.201-0.123 c0.024-0.019,0.049-0.033,0.072-0.054c0.008-0.008,0.018-0.012,0.026-0.02l36.063-36.063C56.127,11.85,56.127,6.14,52.618,2.631z  M51.204,4.045c2.488,2.489,2.7,6.397,0.65,9.137l-9.787-9.787C44.808,1.345,48.716,1.557,51.204,4.045z M46.254,18.895l-9.9-9.9 l1.414-1.414l9.9,9.9L46.254,18.895z M4.961,50.288c-0.391-0.391-1.023-0.391-1.414,0L2.79,51.045l2.554-10.728l4.422-0.491 l-0.569,5.122c-0.004,0.038,0.01,0.073,0.01,0.11c0,0.038-0.014,0.072-0.01,0.11c0.004,0.033,0.021,0.06,0.028,0.092 c0.012,0.058,0.029,0.111,0.05,0.165c0.026,0.065,0.057,0.124,0.095,0.181c0.031,0.046,0.062,0.087,0.1,0.127 c0.048,0.051,0.1,0.094,0.157,0.134c0.045,0.031,0.088,0.06,0.138,0.084C9.831,45.982,9.9,46,9.972,46.017 c0.038,0.009,0.069,0.03,0.108,0.035c0.036,0.004,0.072,0.006,0.109,0.006c0,0,0.001,0,0.001,0c0,0,0.001,0,0.001,0h0.001 c0,0,0.001,0,0.001,0c0.036,0,0.073-0.002,0.109-0.006l5.122-0.569l-0.491,4.422L4.204,52.459l0.757-0.757 C5.351,51.312,5.351,50.679,4.961,50.288z M17.511,44.809L39.889,22.43c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0 L16.097,43.395l-4.773,0.53l0.53-4.773l22.38-22.378c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L10.44,37.738 l-3.183,0.354L34.94,10.409l9.9,9.9L17.157,47.992L17.511,44.809z M49.082,16.067l-9.9-9.9l1.415-1.415l9.9,9.9L49.082,16.067z\" }));\nexport default SvgEdit;\n","import * as React from \"react\";\nconst SvgBackArrow = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", viewBox: \"0 0 386.242 386.242\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M374.212,182.3H39.432l100.152-99.767c4.704-4.704,4.704-12.319,0-17.011 c-4.704-4.704-12.319-4.704-17.011,0L3.474,184.61c-4.632,4.632-4.632,12.379,0,17.011l119.1,119.1 c4.704,4.704,12.319,4.704,17.011,0c4.704-4.704,4.704-12.319,0-17.011L39.432,206.36h334.779c6.641,0,12.03-5.39,12.03-12.03 S380.852,182.3,374.212,182.3z\" }));\nexport default SvgBackArrow;\n","import React from 'react';\n\nimport { Button, Layout, NavbarContainer } from '../../components';\nimport { connect, requireData } from '../../utils';\nimport { controller } from './controller';\nimport EditIcon from '../../assets/edit.svg?react';\nimport BackIcon from '../../assets/backArrow.svg?react';\n\nimport style from './style.module.scss';\n\ninterface Exercise {\n  id: string;\n  name: string;\n  setsPreview: string;\n}\n\ninterface Training {\n  id: string;\n  name: string;\n  exercises: Exercise[];\n}\n\ninterface Props {\n  data: Training;\n  isAnyTrainingInProgress: boolean;\n  isCurrentTrainingInProgress: boolean;\n  onNoData: () => void;\n  onStart: () => void;\n  onFinish: () => void;\n  onBack: () => void;\n  onEdit: () => void;\n  onOpenExercise: (training: Training, exercise: Exercise) => void;\n}\n\ninterface Controller {\n  isAnyTrainingInProgress: () => boolean;\n  isCurrentTrainingInProgress: () => boolean;\n  getTraining: () => Training;\n  onNoData: () => void;\n  onStart: () => void;\n  onFinish: () => void;\n  onBack: () => void;\n  onEdit: () => void;\n  onOpenExercise: (training: Training, exercise: Exercise) => void;\n}\n\nclass PureTraining extends React.Component<Props> {\n  renderTopBar = () => {\n    const { data } = this.props;\n    return <div className={style.topBar}>{data.name}</div>;\n  };\n\n  renderBottomBar = () => {\n    const { onBack, onEdit } = this.props;\n    return (\n      <NavbarContainer className={style.navbarContainer}>\n        <Button\n          skin=\"icon\"\n          size=\"large\"\n          onClick={onBack}\n          data-testid=\"training-back-button\"\n        >\n          <BackIcon />\n        </Button>\n        <Button\n          skin=\"icon\"\n          size=\"large\"\n          onClick={onEdit}\n          data-testid=\"training-edit-button\"\n        >\n          <EditIcon />\n        </Button>\n      </NavbarContainer>\n    );\n  };\n\n  renderExercises = () => {\n    const { data, onOpenExercise } = this.props;\n    return (\n      <ul className={style.exercises} data-testid=\"training-exercises-list\">\n        {data.exercises.map((exercise) => {\n          return (\n            <li\n              key={exercise.id}\n              className={style.exercise}\n              data-testid=\"training-exercise-item\"\n              onClick={() => onOpenExercise(data, exercise)}\n            >\n              <div className={style.exerciseBox}>\n                {exercise.name}\n                <br />\n                {exercise.setsPreview}\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  };\n\n  render() {\n    const {\n      data,\n      isAnyTrainingInProgress,\n      isCurrentTrainingInProgress,\n      onStart,\n      onFinish,\n    } = this.props;\n\n    const areExercises = Boolean(data.exercises.length);\n\n    return (\n      <Layout\n        topBar={this.renderTopBar()}\n        bottomBar={this.renderBottomBar()}\n        dataTestId=\"existing-training-screen\"\n      >\n        <div className={style.screen}>\n          {areExercises && this.renderExercises()}\n        </div>\n        <div className={style.buttonScreen}>\n          {isCurrentTrainingInProgress ? (\n            <Button\n              skin=\"primary\"\n              font=\"nunito\"\n              className={style.button}\n              onClick={onFinish}\n              data-testid=\"finish-training-button\"\n            >\n               FINISH \n            </Button>\n          ) : isAnyTrainingInProgress ? null : (\n            <Button\n              skin=\"primary\"\n              font=\"nunito\"\n              className={style.button}\n              onClick={onStart}\n              data-testid=\"start-training-button\"\n            >\n              Start\n            </Button>\n          )}\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport const Training = connect<Controller, Props>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    data: ctrl.getTraining(),\n    isAnyTrainingInProgress: ctrl.isAnyTrainingInProgress(),\n    isCurrentTrainingInProgress: ctrl.isCurrentTrainingInProgress(),\n    onNoData: ctrl.onNoData,\n    onStart: ctrl.onStart,\n    onFinish: ctrl.onFinish,\n    onBack: ctrl.onBack,\n    onEdit: ctrl.onEdit,\n    onOpenExercise: ctrl.onOpenExercise,\n  }),\n)(\n  requireData<Props>((props) => ({\n    isData: Boolean(props.data),\n    onNoData: props.onNoData,\n  }))(PureTraining),\n);\n","import toNumber from 'lodash/toNumber';\n\nimport { AppContext } from '../../types';\nimport { Exercise, Training, Set, CompletedTraining } from '../../model/types';\n\nexport const controller = (serviceLocator: AppContext['serviceLocator']) => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { navigationApi, trainingsApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n  const getParams = () =>\n    navigationApi.getPathParams(navigationApi.routes.openExercise);\n  const findTraining = () => {\n    const params = getParams();\n    const trainings = getData().trainings;\n    const training = trainings.find(\n      (training: Training) => training.id === params.training,\n    );\n\n    return training;\n  };\n\n  const changeSet = (\n    exerciseId: string,\n    setId: string,\n    update: Partial<Set>,\n  ) => {\n    const trainingId = findTraining()?.id;\n\n    if (!trainingId) return;\n\n    const trainings = getData().trainings.map((training: Training) => {\n      if (training.id === trainingId) {\n        return {\n          ...training,\n          exercises: training.exercises.map((exercise: Exercise) => {\n            if (exercise.id === exerciseId) {\n              return {\n                ...exercise,\n                sets: exercise.sets.map((set: Set) => {\n                  if (set.id === setId) {\n                    return {\n                      ...set,\n                      ...update,\n                    };\n                  }\n                  return set;\n                }),\n              };\n            }\n            return exercise;\n          }),\n        };\n      }\n      return training;\n    });\n\n    trainingsApi.update.allTrainings(trainings);\n  };\n\n  return {\n    isInProgress: () => Boolean(getData().activeTraining),\n    getTraining: () => findTraining(),\n    getExercise: () => {\n      const params = getParams();\n      const training = findTraining();\n      const exercise = training?.exercises.find(\n        (exercise: Exercise) => exercise.id === params.exercise,\n      );\n\n      return exercise;\n    },\n    getCurrentExerciseIntoNavbar: (training: Training, exercise: Exercise) => {\n      return training.exercises.indexOf(exercise) + 1;\n    },\n    getTotalExercisesIntoNavbar: (training: Training) => {\n      return training.exercises.length;\n    },\n    onChangeRepetitions: (exerciseId: string, setId: string, value: string) => {\n      changeSet(exerciseId, setId, { repetitions: toNumber(value) });\n    },\n    onChangeWeight: (exerciseId: string, setId: string, value: string) => {\n      changeSet(exerciseId, setId, { weight: toNumber(value) });\n    },\n    onDoneSet: async (trainingId: string, exerciseId: string, set: Set) => {\n      changeSet(exerciseId, set.id, { done: true });\n    },\n    onResetDoneSet: async (\n      trainingId: string,\n      exerciseId: string,\n      set: Set,\n    ) => {\n      changeSet(exerciseId, set.id, { done: false });\n    },\n    onExerciseNext: async (training: Training, exercise: Exercise) => {\n      const currentExerciseIndex = training.exercises.indexOf(exercise);\n\n      if (currentExerciseIndex < training.exercises.length - 1) {\n        const nextExerciseId = training.exercises[currentExerciseIndex + 1].id;\n\n        await navigationApi.toExercise(training.id, nextExerciseId);\n        const trainings = getData().trainings;\n        trainingsApi.update.allTrainings(trainings);\n      }\n    },\n    onExercisePrev: async (training: Training, exercise: Exercise) => {\n      const currentExerciseIndex = training.exercises.indexOf(exercise);\n\n      if (currentExerciseIndex > 0) {\n        const prevExerciseId = training.exercises[currentExerciseIndex - 1].id;\n\n        await navigationApi.toExercise(training.id, prevExerciseId);\n        const trainings = getData().trainings;\n        trainingsApi.update.allTrainings(trainings);\n      }\n    },\n    onNoData: () => {\n      navigationApi.toTrainings();\n    },\n    onBack: () => {\n      const trainingId = getParams().training;\n\n      if (trainingId) {\n        navigationApi.toTraining(trainingId);\n      }\n    },\n    getSetsHistory: () => {\n      const data = getData();\n      const params = getParams();\n      const training = findTraining();\n      const exercise = training?.exercises.find(\n        (ex: Exercise) => ex.id === params.exercise,\n      );\n\n      if (!exercise) return [];\n\n      const completed = [...(data.completedTrainings as CompletedTraining[])]\n        // sort by most recent first\n        .sort(\n          (a, b) =>\n            new Date(b.timestamptz).getTime() -\n            new Date(a.timestamptz).getTime(),\n        )\n        .map((tr) => {\n          // TODO must be selected by exercise \"type\", not \"name\"\n          const ex = tr.exercises.find((it: any) => it.name === exercise.name);\n          if (!ex || !ex.sets.length) return null;\n\n          return {\n            date: trainingsApi.create.datePreview(tr.timestamptz),\n            sets: ex.sets.map((set: any) => ({\n              id: set.id,\n              repetitions: set.repetitions,\n              weight: set.weight,\n              time: trainingsApi.create.timePreview(set.timestamptz),\n            })),\n          };\n        })\n        .filter(Boolean);\n\n      return completed;\n    },\n  };\n};\n\ncontroller.storeDataAccessors = [\n  'trainings',\n  'activeTraining',\n  'completedTrainings',\n];\n","import * as React from \"react\";\nconst SvgArrowLeft = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", viewBox: \"0 0 16 16\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z\" }));\nexport default SvgArrowLeft;\n","import * as React from \"react\";\nconst SvgArrowRight = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", viewBox: \"0 0 16 16\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm4.5 5.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z\" }));\nexport default SvgArrowRight;\n","import * as React from \"react\";\nconst SvgDone = (props) => /* @__PURE__ */ React.createElement(\"svg\", { height: 30, viewBox: \"0 0 400 400\", width: 30, xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"m199.996 0c-110.283 0-199.996 89.72-199.996 200s89.713 200 199.996 200 200.004-89.72 200.004-200-89.721-200-200.004-200zm0 373.77c-95.816 0-173.766-77.954-173.766-173.77 0-95.817 77.949-173.769 173.766-173.769s173.771 77.953 173.771 173.769c.001 95.816-77.955 173.77-173.771 173.77z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"m272.406 134.526-103.131 103.126-41.689-41.68c-5.123-5.117-13.422-5.12-18.545.003-5.125 5.125-5.125 13.425 0 18.548l50.963 50.955c2.561 2.558 5.916 3.838 9.271 3.838s6.719-1.28 9.279-3.842c.008-.011.014-.022.027-.035l112.369-112.368c5.125-5.12 5.125-13.426 0-18.546-5.122-5.123-13.427-5.123-18.544.001z\" }));\nexport default SvgDone;\n","import React from 'react';\n\nimport { Button, Input, Layout, NavbarContainer } from '../../components';\nimport { connect, requireData } from '../../utils';\nimport { controller } from './controller';\nimport BackIcon from '../../assets/backArrow.svg?react';\nimport ArrowLeft from '../../assets/arrowLeft.svg?react';\nimport ArrowRight from '../../assets/arrowRight.svg?react';\nimport DoneIcon from '../../assets/done.svg?react';\nimport { Exercise as ExerciseType, Set, Training } from '../../model/types';\n\nimport style from './style.module.scss';\n\ninterface Props {\n  training: Training;\n  exercise: ExerciseType;\n  // TODO fix any\n  setsHistory: any[];\n  isInProgress: boolean;\n  getCurrentExercise: (training: Training, exercise: ExerciseType) => number;\n  getTotalExercises: (training: Training) => number;\n  onChangeRepetitions: (\n    exerciseId: string,\n    setId: string,\n    value: number,\n  ) => void;\n  onChangeWeight: (exerciseId: string, setId: string, value: number) => void;\n  onDoneSet: (trainingId: string, exerciseId: string, set: Set) => void;\n  onResetDoneSet: (trainingId: string, exerciseId: string, set: Set) => void;\n  onExerciseNext: (training: Training, exercise: ExerciseType) => void;\n  onExercisePrev: (training: Training, exercise: ExerciseType) => void;\n  onNoData: () => void;\n  onBack: () => void;\n}\n\nclass PureExercise extends React.Component<Props> {\n  renderTopBar = () => {\n    const { exercise } = this.props;\n    return <div className={style.topBar}>{exercise.name}</div>;\n  };\n\n  renderBottomBar = () => {\n    const {\n      training,\n      exercise,\n      isInProgress,\n      getCurrentExercise,\n      getTotalExercises,\n      onBack,\n      onExerciseNext,\n      onExercisePrev,\n    } = this.props;\n    return (\n      <NavbarContainer className={style.navbarContainer}>\n        <Button\n          skin=\"icon\"\n          size=\"large\"\n          onClick={onBack}\n          data-testid=\"back-button\"\n        >\n          <BackIcon />\n        </Button>\n        {isInProgress && (\n          <div className={style.switch}>\n            <Button\n              skin=\"icon\"\n              size=\"large\"\n              onClick={() => onExercisePrev(training, exercise)}\n              data-testid=\"prev-exercise-button\"\n            >\n              <ArrowLeft />\n            </Button>\n            <div>\n              {getCurrentExercise(training, exercise)}/\n              {getTotalExercises(training)}\n            </div>\n            <Button\n              skin=\"icon\"\n              size=\"large\"\n              onClick={() => onExerciseNext(training, exercise)}\n              data-testid=\"next-exercise-button\"\n            >\n              <ArrowRight />\n            </Button>\n          </div>\n        )}\n      </NavbarContainer>\n    );\n  };\n\n  renderSets = () => {\n    const {\n      training,\n      exercise,\n      isInProgress,\n      onDoneSet,\n      onResetDoneSet,\n      onChangeRepetitions,\n      onChangeWeight,\n    } = this.props;\n\n    return (\n      <ul className={style.sets}>\n        {exercise.sets.map((set) => {\n          const isDisabledInput = set.done || !isInProgress;\n\n          return (\n            <li key={set.id} className={style.set}>\n              <div className={style.setPreview}>\n                <div className={style.setRepetitions}>\n                  <Input\n                    type=\"number\"\n                    disabled={isDisabledInput}\n                    value={set.repetitions}\n                    onBlur={(value) =>\n                      onChangeRepetitions(exercise.id, set.id, Number(value))\n                    }\n                  />\n                </div>\n                <div>X</div>\n                <div className={style.setWeight}>\n                  <Input\n                    type=\"number\"\n                    disabled={isDisabledInput}\n                    value={set.weight}\n                    onBlur={(value) =>\n                      onChangeWeight(exercise.id, set.id, Number(value))\n                    }\n                  />\n                </div>\n                <div>kg</div>\n                {isInProgress ? (\n                  set.done ? (\n                    <Button\n                      skin=\"text\"\n                      size=\"large\"\n                      font=\"indieFlower\"\n                      onClick={() =>\n                        onResetDoneSet(training.id, exercise.id, set)\n                      }\n                      data-testid=\"undo-set-button\"\n                    >\n                      done\n                    </Button>\n                  ) : (\n                    <Button\n                      skin=\"icon\"\n                      size=\"large\"\n                      className={style.setDone}\n                      onClick={() => onDoneSet(training.id, exercise.id, set)}\n                      data-testid=\"done-set-button\"\n                    >\n                      <DoneIcon />\n                    </Button>\n                  )\n                ) : null}\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  };\n\n  renderSetsHistory = () => {\n    const { setsHistory } = this.props;\n    return (\n      <div className={style.history}>\n        <div className={style.historyUnit}>History</div>\n        <ul className={style.setsHistoryBox} data-testid=\"sets-history-list\">\n          {setsHistory.map((setsByDate: any) => {\n            return (\n              <li\n                key={setsByDate.date}\n                className={style.setsByDate}\n                data-testid=\"set-history-item\"\n              >\n                <ul className={style.sets}>\n                  <div className={style.setsDate}>\n                    <b>{setsByDate.date}</b>\n                  </div>\n\n                  {setsByDate.sets.map((set: any, index: any) => {\n                    return (\n                      <li key={set.id} className={style.set}>\n                        <div className={style.setPreview}>\n                          <div className={style.setUnit}>\n                            <b>{index + 1}</b> {set.repetitions}x{set.weight}kg\n                          </div>\n                          <div className={style.setTime}>{set.time}</div>\n                        </div>\n                      </li>\n                    );\n                  })}\n                </ul>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  };\n\n  render() {\n    const { exercise, setsHistory } = this.props;\n\n    const areSets = Boolean(exercise.sets.length);\n    const areSetsHistory = Boolean(setsHistory.length);\n\n    return (\n      <Layout\n        topBar={this.renderTopBar()}\n        bottomBar={this.renderBottomBar()}\n        dataTestId=\"existing-exercise-screen\"\n      >\n        <div className={style.screen}>\n          {areSets && this.renderSets()}\n          {areSetsHistory && this.renderSetsHistory()}\n        </div>\n      </Layout>\n    );\n  }\n}\n\n// TODO - add types for controller\nexport const Exercise = connect<any, Props>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    training: ctrl.getTraining(),\n    exercise: ctrl.getExercise(),\n    setsHistory: ctrl.getSetsHistory(),\n    isInProgress: ctrl.isInProgress(),\n    getCurrentExercise: ctrl.getCurrentExerciseIntoNavbar,\n    getTotalExercises: ctrl.getTotalExercisesIntoNavbar,\n    onChangeRepetitions: ctrl.onChangeRepetitions,\n    onChangeWeight: ctrl.onChangeWeight,\n    onDoneSet: ctrl.onDoneSet,\n    onResetDoneSet: ctrl.onResetDoneSet,\n    onExerciseNext: ctrl.onExerciseNext,\n    onExercisePrev: ctrl.onExercisePrev,\n    onNoData: ctrl.onNoData,\n    onBack: ctrl.onBack,\n  }),\n)(\n  requireData<Props>((props) => ({\n    isData: Boolean(props.exercise),\n    onNoData: props.onNoData,\n  }))(PureExercise),\n);\n","import toNumber from 'lodash/toNumber';\n\nimport { AppContext } from '../../types';\nimport { Exercise, Set } from '../../model/types';\n\nexport const controller = (serviceLocator: AppContext['serviceLocator']) => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { trainingsApi, navigationApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n  const getParams = () =>\n    navigationApi.getPathParams(navigationApi.routes.editNewExercise);\n\n  return {\n    getExercise: () => {\n      const exerciseId = getParams().exercise;\n      const exercise = getData().newTraining?.exercises.find(\n        (exercise: Exercise) => exercise.id === exerciseId,\n      );\n\n      return exercise;\n    },\n    onNoData: () => {\n      navigationApi.toTrainings();\n    },\n    onChangeName: (exerciseId: string, name: string) => {\n      const { exercises } = getData().newTraining;\n\n      trainingsApi.update.newTraining({\n        exercises: exercises.map((exercise: Exercise) => {\n          if (exercise.id === exerciseId) {\n            return {\n              ...exercise,\n              name,\n            };\n          }\n          return exercise;\n        }),\n      });\n    },\n    onChangeRepetitions: (exercise: Exercise, setId: string, value: string) => {\n      const { exercises } = getData().newTraining;\n      const { sets } = exercise;\n\n      trainingsApi.update.newTraining({\n        exercises: exercises.map((ex: Exercise) => {\n          if (ex.id === exercise.id) {\n            return {\n              ...ex,\n              sets: sets.map((set: Set) => {\n                if (set.id === setId) {\n                  return {\n                    ...set,\n                    repetitions: toNumber(value),\n                  };\n                }\n                return set;\n              }),\n            };\n          }\n          return ex;\n        }),\n      });\n    },\n    onChangeWeight: (exercise: Exercise, setId: string, value: string) => {\n      const { exercises } = getData().newTraining;\n      const { sets } = exercise;\n\n      trainingsApi.update.newTraining({\n        exercises: exercises.map((ex: Exercise) => {\n          if (ex.id === exercise.id) {\n            return {\n              ...ex,\n              sets: sets.map((set: Set) => {\n                if (set.id === setId) {\n                  return {\n                    ...set,\n                    weight: toNumber(value),\n                  };\n                }\n                return set;\n              }),\n            };\n          }\n          return ex;\n        }),\n      });\n    },\n    onAddSet: () => {\n      const trainingId = getParams().training;\n      const exerciseId = getParams().exercise;\n\n      if (trainingId && exerciseId) {\n        trainingsApi.create.set(trainingId, exerciseId);\n      }\n    },\n    onDeleteSet: (exerciseId: string, setId: string) => {\n      const trainingId = getParams().training;\n\n      if (trainingId) {\n        trainingsApi.delete.set(trainingId, exerciseId, setId);\n      }\n    },\n    onDelete: async () => {\n      const trainingId = getParams().training;\n      const exerciseId = getParams().exercise;\n\n      if (trainingId && exerciseId) {\n        trainingsApi.delete.exercise(trainingId, exerciseId);\n      }\n\n      await navigationApi.goBack({\n        replace: true,\n      });\n    },\n    onSave: async () => {\n      await navigationApi.goBack({\n        replace: true,\n      });\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['newTraining'];\n","import React from 'react';\n\nimport { Exercise } from '../../components';\nimport { connect, requireData } from '../../utils';\nimport { controller } from './controller';\nimport { Exercise as ExerciseType } from '../../model/types';\n\ninterface Props {\n  data: ExerciseType;\n  onNoData: () => void;\n  onChangeName: (exerciseId: string, name: string) => void;\n  onChangeWeight: (\n    exercise: ExerciseType,\n    setId: string,\n    value: string,\n  ) => void;\n  onChangeRepetitions: (\n    exercise: ExerciseType,\n    setId: string,\n    value: string,\n  ) => void;\n  onAddSet: () => void;\n  onDeleteSet: (exerciseId: string, setId: string) => void;\n  onDelete: () => void;\n  onSave: () => void;\n}\n\nclass PureEditNewExercise extends React.Component<Props> {\n  _onChangeName = (value: string) => {\n    const exerciseId = this.props.data.id;\n    this.props.onChangeName(exerciseId, value);\n  };\n\n  _onDeleteSet = (setId: string) => {\n    const exerciseId = this.props.data.id;\n    this.props.onDeleteSet(exerciseId, setId);\n  };\n\n  _onChangeRepetitions = (setId: string, value: string) => {\n    const exercise = this.props.data as ExerciseType; // Cast to full Exercise type\n    this.props.onChangeRepetitions(exercise, setId, value);\n  };\n\n  _onChangeWeight = (setId: string, value: string) => {\n    const exercise = this.props.data as ExerciseType; // Cast to full Exercise type\n    this.props.onChangeWeight(exercise, setId, value);\n  };\n\n  render() {\n    const { data, onAddSet, onDelete, onSave } = this.props;\n\n    return (\n      <Exercise\n        dataTestId=\"edit-new-exercise-screen\"\n        data={data}\n        onChangeName={this._onChangeName}\n        onDeleteSet={this._onDeleteSet}\n        onChangeRepetitions={this._onChangeRepetitions}\n        onChangeWeight={this._onChangeWeight}\n        onAddSet={onAddSet}\n        onDelete={onDelete}\n        onSave={onSave}\n      />\n    );\n  }\n}\n\ntype Controller = ReturnType<typeof controller>;\n\nexport const EditNewExercise = connect<Controller, Props>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    data: ctrl.getExercise(),\n    onNoData: ctrl.onNoData,\n    onChangeName: ctrl.onChangeName,\n    onChangeWeight: ctrl.onChangeWeight,\n    onChangeRepetitions: ctrl.onChangeRepetitions,\n    onAddSet: ctrl.onAddSet,\n    onDeleteSet: ctrl.onDeleteSet,\n    onDelete: ctrl.onDelete,\n    onSave: ctrl.onSave,\n  }),\n)(\n  requireData<Props>((props) => ({\n    isData: Boolean(props.data),\n    onNoData: props.onNoData,\n  }))(PureEditNewExercise),\n);\n","import toNumber from 'lodash/toNumber';\n\nimport { AppContext } from '../../types';\nimport { Exercise, Training, Set } from '../../model/types';\n\nexport const controller = (serviceLocator: AppContext['serviceLocator']) => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { trainingsApi, navigationApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n  const getParams = () =>\n    navigationApi.getPathParams(navigationApi.routes.editExistingExercise);\n\n  return {\n    getExercise: () => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n      const exercise = training?.exercises.find(\n        (exercise: Exercise) => exercise.id === params.exercise,\n      );\n\n      return exercise;\n    },\n    onNoData: () => {\n      navigationApi.toTrainings();\n    },\n    onChangeName: (exerciseId: string, name: string) => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n\n      if (training) {\n        const exercises = training.exercises.map((exercise: Exercise) => {\n          if (exercise.id === exerciseId) {\n            return {\n              ...exercise,\n              name,\n            };\n          }\n          return exercise;\n        });\n\n        trainingsApi.update.training(training.id, { exercises });\n      }\n    },\n    onChangeRepetitions: (exercise: Exercise, setId: string, value: string) => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n\n      if (training) {\n        const exercises = training.exercises.map((e: Exercise) => {\n          if (e.id === exercise.id) {\n            return {\n              ...e,\n              sets: e.sets.map((set: Set) => {\n                if (set.id === setId) {\n                  return {\n                    ...set,\n                    repetitions: toNumber(value),\n                  };\n                }\n                return set;\n              }),\n            };\n          }\n          return e;\n        });\n\n        trainingsApi.update.training(training.id, { exercises });\n      }\n    },\n    onChangeWeight: (exercise: Exercise, setId: string, value: string) => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n\n      if (training) {\n        const exercises = training.exercises.map((e: Exercise) => {\n          if (e.id === exercise.id) {\n            return {\n              ...e,\n              sets: e.sets.map((set: Set) => {\n                if (set.id === setId) {\n                  return {\n                    ...set,\n                    weight: toNumber(value),\n                  };\n                }\n                return set;\n              }),\n            };\n          }\n          return e;\n        });\n\n        trainingsApi.update.training(training.id, { exercises });\n      }\n    },\n    onAddSet: () => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n      const exercise = training?.exercises.find(\n        (exercise: Exercise) => exercise.id === params.exercise,\n      );\n\n      if (training && exercise) {\n        trainingsApi.create.set(training.id, exercise.id);\n      }\n    },\n    onDeleteSet: (exerciseId: string, setId: string) => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n\n      if (training) {\n        trainingsApi.delete.set(training.id, exerciseId, setId);\n      }\n    },\n    onDelete: async () => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n      const exercise = training?.exercises.find(\n        (exercise: Exercise) => exercise.id === params.exercise,\n      );\n\n      await navigationApi.goBack({\n        replace: true,\n      });\n\n      if (training && exercise) {\n        trainingsApi.delete.exercise(training.id, exercise.id);\n      }\n    },\n    onSave: async () => {\n      await navigationApi.goBack({\n        replace: true,\n      });\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['trainings'];\n","import React from 'react';\n\nimport { Exercise } from '../../components';\nimport { connect, requireData } from '../../utils';\nimport { controller } from './controller';\nimport { Exercise as ExerciseType } from '../../model/types';\n\ninterface Props {\n  data: ExerciseType;\n  onNoData: () => void;\n  onChangeName: (exerciseId: string, name: string) => void;\n  onChangeWeight: (\n    exercise: ExerciseType,\n    setId: string,\n    value: string,\n  ) => void;\n  onChangeRepetitions: (\n    exercise: ExerciseType,\n    setId: string,\n    value: string,\n  ) => void;\n  onAddSet: () => void;\n  onDeleteSet: (exerciseId: string, setId: string) => void;\n  onDelete: () => void;\n  onSave: () => void;\n}\n\nclass PureEditExistingExercise extends React.Component<Props> {\n  _onChangeName = (value: string) => {\n    const exerciseId = this.props.data.id;\n    this.props.onChangeName(exerciseId, value);\n  };\n\n  _onDeleteSet = (setId: string) => {\n    const exerciseId = this.props.data.id;\n    this.props.onDeleteSet(exerciseId, setId);\n  };\n\n  _onChangeRepetitions = (setId: string, value: string) => {\n    const exercise = this.props.data as ExerciseType; // Cast to full Exercise type\n    this.props.onChangeRepetitions(exercise, setId, value);\n  };\n\n  _onChangeWeight = (setId: string, value: string) => {\n    const exercise = this.props.data as ExerciseType; // Cast to full Exercise type\n    this.props.onChangeWeight(exercise, setId, value);\n  };\n\n  render() {\n    const { data, onAddSet, onDelete, onSave } = this.props;\n\n    return (\n      <Exercise\n        dataTestId=\"edit-existing-exercise-screen\"\n        data={data}\n        onChangeName={this._onChangeName}\n        onDeleteSet={this._onDeleteSet}\n        onChangeRepetitions={this._onChangeRepetitions}\n        onChangeWeight={this._onChangeWeight}\n        onAddSet={onAddSet}\n        onDelete={onDelete}\n        onSave={onSave}\n      />\n    );\n  }\n}\n\ntype Controller = ReturnType<typeof controller>;\n\nexport const EditExistingExercise = connect<Controller, Props>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    data: ctrl.getExercise(),\n    onNoData: ctrl.onNoData,\n    onChangeName: ctrl.onChangeName,\n    onChangeWeight: ctrl.onChangeWeight,\n    onChangeRepetitions: ctrl.onChangeRepetitions,\n    onAddSet: ctrl.onAddSet,\n    onDeleteSet: ctrl.onDeleteSet,\n    onDelete: ctrl.onDelete,\n    onSave: ctrl.onSave,\n  }),\n)(\n  requireData<Props>((props) => ({\n    isData: Boolean(props.data),\n    onNoData: props.onNoData,\n  }))(PureEditExistingExercise),\n);\n","import { AppContext } from '../../types';\nimport { Training } from '../../model/types';\nimport { Controller } from '../../utils/HOCs/types';\n\ninterface ControllerType {\n  getTraining: () => Training;\n  onSave: () => Promise<void>;\n  onDelete: () => Promise<void>;\n  onNoData: () => void;\n  onChangeName: (name: string) => void;\n  onAddExercise: () => void;\n  onDeleteExercise: (trainingId: string, exerciseId: string) => void;\n  onEditExercise: (exerciseId: string) => void;\n}\n\nexport const controller: Controller<ControllerType> = (\n  serviceLocator: AppContext['serviceLocator'],\n) => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { navigationApi, trainingsApi } = serviceLocator.getAPIs();\n\n  const getData = () => getStoreData(controller.storeDataAccessors);\n  const getParams = () =>\n    navigationApi.getPathParams(navigationApi.routes.editTraining);\n\n  return {\n    getTraining: () => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n      return training;\n    },\n    onSave: async () => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n\n      if (training) {\n        await navigationApi.toTraining(training.id);\n      } else {\n        await navigationApi.toTrainings();\n      }\n    },\n    onNoData: () => {\n      void navigationApi.toTrainings();\n    },\n    onChangeName: (name: string) => {\n      const params = getParams();\n      const trainings = getData().trainings;\n      const training = trainings.find(\n        (training: Training) => training.id === params.training,\n      );\n\n      if (training) {\n        trainingsApi.update.training(training.id, { name });\n      }\n    },\n    onAddExercise: async () => {\n      const params = getParams();\n      trainingsApi.create.newExercise();\n\n      const newExerciseId = getData().newExercise?.id;\n\n      if (params.training && newExerciseId) {\n        await navigationApi.toCreateExercise(params.training, newExerciseId, {\n          goBackTo: navigationApi.routes.editTraining,\n        });\n      }\n    },\n    onDeleteExercise: (trainingId: string, exerciseId: string) => {\n      trainingsApi.delete.exercise(trainingId, exerciseId);\n    },\n    onEditExercise: async (exerciseId: string) => {\n      const params = getParams();\n\n      if (params.training) {\n        await navigationApi.toEditExistingExercise(params.training, exerciseId);\n      }\n    },\n    onDelete: async () => {\n      const params = getParams();\n      await navigationApi.toTrainings();\n\n      if (params.training) {\n        trainingsApi.delete.training(params.training);\n      }\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['trainings', 'newExercise'];\n","import React from 'react';\nimport { connect, requireData } from '../../utils';\nimport { controller } from './controller';\nimport { Training } from '../../model/types';\nimport { Training as TrainingComp } from '../../components';\n\ninterface Props {\n  data: Training;\n  onSave: () => Promise<void>;\n  onDelete: () => Promise<void>;\n  onNoData: () => void;\n  onChangeName: (name: string) => void;\n  onAddExercise: () => void;\n  onDeleteExercise: (trainingId: string, exerciseId: string) => void;\n  onEditExercise: (exerciseId: string) => void;\n}\n\ntype ControllerType = ReturnType<typeof controller>;\n\nconst PureEditExistingTraining: React.FC<Props> = (props) => {\n  const {\n    data,\n    onChangeName,\n    onAddExercise,\n    onDelete,\n    onSave,\n    onDeleteExercise,\n    onEditExercise,\n  } = props;\n  return (\n    <TrainingComp\n      dataTestId=\"edit-existing-training-screen\"\n      id={data.id}\n      name={data.name}\n      exercises={data.exercises}\n      onChangeName={onChangeName}\n      onAddExercise={onAddExercise}\n      onDelete={onDelete}\n      onSave={onSave}\n      onDeleteExercise={onDeleteExercise}\n      onOpenExercise={onEditExercise}\n    />\n  );\n};\n\nexport const EditExistingTraining = connect<ControllerType, Props>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    data: ctrl.getTraining(),\n    onSave: ctrl.onSave,\n    onDelete: ctrl.onDelete,\n    onNoData: ctrl.onNoData,\n    onChangeName: ctrl.onChangeName,\n    onAddExercise: ctrl.onAddExercise,\n    onDeleteExercise: ctrl.onDeleteExercise,\n    onEditExercise: ctrl.onEditExercise,\n  }),\n)(\n  requireData<Props>((props) => ({\n    isData: Boolean(props.data),\n    onNoData: props.onNoData,\n  }))(PureEditExistingTraining),\n);\n","import { AppContext } from '../../types';\nimport { AuthProtectionController } from './types';\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): AuthProtectionController => {\n  const store = serviceLocator.getStore();\n  const { navigationApi } = serviceLocator.getAPIs();\n\n  const getStoreData = () => store.getStoreData(controller.storeDataAccessors);\n\n  return {\n    isAuthenticated: () => {\n      const auth = getStoreData().auth;\n      return auth.isAuthenticated;\n    },\n    navigate: async () => {\n      await navigationApi.goBack({ replace: true });\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['auth'] as string[];\n","import React, { useEffect } from 'react';\n\nimport { Outlet } from '@tanstack/react-router';\nimport { AuthProtectionProps, AuthProtectionController } from './types';\nimport { connect } from '../../utils';\nimport { controller } from './controller';\n\nconst PureAuthProtection: React.FC<AuthProtectionProps> = (props) => {\n  const { isAuthenticated, navigate } = props;\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate();\n    }\n  }, [isAuthenticated, navigate]);\n\n  return isAuthenticated ? <Outlet /> : null;\n};\n\nexport const AuthProtection = connect<\n  AuthProtectionController,\n  AuthProtectionProps\n>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    isAuthenticated: ctrl.isAuthenticated(),\n    navigate: ctrl.navigate,\n  }),\n)(PureAuthProtection);\n","import { CompletedTraining } from './types';\n\nexport interface TrainingAggregate {\n  dateISO: string; // YYYY-MM-DD\n  totalVolumeKg: number;\n  totalReps: number;\n  sessionsCount: number;\n}\n\nfunction toDateKey(timestamptz: string): string {\n  // Use UTC-normalized YYYY-MM-DD to avoid local TZ shifting the day.\n  const d = new Date(timestamptz);\n  if (Number.isNaN(d.getTime())) {\n    // fallback: try to slice ISO-like string\n    return timestamptz.slice(0, 10);\n  }\n  return d.toISOString().slice(0, 10);\n}\n\nexport const aggregateByDay = (\n  completed: CompletedTraining[],\n): TrainingAggregate[] => {\n  const map = new Map<string, TrainingAggregate>();\n\n  completed.forEach((ct) => {\n    const key = toDateKey(ct.timestamptz);\n\n    if (!map.has(key)) {\n      map.set(key, {\n        dateISO: key,\n        totalVolumeKg: 0,\n        totalReps: 0,\n        sessionsCount: 0,\n      });\n    }\n\n    const agg = map.get(key)!;\n    agg.sessionsCount += 1;\n\n    ct.exercises.forEach((ex) => {\n      ex.sets.forEach((s) => {\n        const weight = typeof s.weight === 'number' ? s.weight : 0;\n        const reps = typeof s.repetitions === 'number' ? s.repetitions : 0;\n        agg.totalVolumeKg += weight * reps;\n        agg.totalReps += reps;\n      });\n    });\n  });\n\n  // return sorted by date ascending\n  return Array.from(map.values()).sort((a, b) =>\n    a.dateISO < b.dateISO ? -1 : 1,\n  );\n};\n\nexport const lastNDays = (\n  aggregates: TrainingAggregate[],\n  n = 7,\n): TrainingAggregate[] => {\n  if (n <= 0) return [];\n\n  // Build map for quick lookup (keys expected as YYYY-MM-DD UTC)\n  const aggMap = new Map(aggregates.map((a) => [a.dateISO, a]));\n\n  const MS_DAY = 24 * 60 * 60 * 1000;\n  const result: TrainingAggregate[] = [];\n\n  // iterate from (n-1) days ago up to today, using UTC-normalized keys\n  for (let i = 0; i < n; i += 1) {\n    const offset = n - 1 - i; // days before today\n    const d = new Date(Date.now() - offset * MS_DAY);\n    const key = d.toISOString().slice(0, 10);\n    const v = aggMap.get(key);\n    if (v) {\n      result.push(v);\n    } else {\n      result.push({\n        dateISO: key,\n        totalVolumeKg: 0,\n        totalReps: 0,\n        sessionsCount: 0,\n      });\n    }\n  }\n\n  return result;\n};\n","import { AppContext } from '../../types';\nimport { CompletedTraining } from '../../model/types';\nimport { aggregateByDay, TrainingAggregate } from '../../model/aggregation';\n\ninterface DashboardController {\n  getAggregates: () => TrainingAggregate[];\n}\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): DashboardController => {\n  const store = serviceLocator.getStore();\n\n  const getStore = () => store.getStoreData(controller.storeDataAccessors);\n\n  return {\n    getAggregates: () => {\n      const completed: CompletedTraining[] =\n        getStore().completedTrainings || [];\n      return aggregateByDay(completed);\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['completedTrainings'];\n","import React from 'react';\n\nimport { connect } from '../../utils';\nimport { controller } from './controller';\nimport { Layout, Navbar, TrainingProgressChart } from '../../components';\n\nconst PureDashboard: React.FC<any> = ({ aggregates }) => {\n  return (\n    <Layout bottomBar={<Navbar />} dataTestId=\"dashboard-screen\">\n      <div style={{ padding: 12 }}>\n        <h2>Progress dashboard</h2>\n        <section style={{ marginTop: 12 }}>\n          <h3>Volume trend (last 30 days)</h3>\n          <div style={{ height: 240 }}>\n            <TrainingProgressChart\n              data={aggregates.slice(-30)}\n              variant=\"detailed\"\n              height={240}\n            />\n          </div>\n        </section>\n        <section style={{ marginTop: 12 }}>\n          <h3>Sessions (last 30 days)</h3>\n          <div style={{ height: 160 }}>\n            <TrainingProgressChart\n              data={aggregates.slice(-30)}\n              variant=\"bar\"\n              height={160}\n            />\n          </div>\n        </section>\n      </div>\n    </Layout>\n  );\n};\n\nexport const Dashboard = connect({ controller }, (ctrl) => ({\n  aggregates: ctrl.getAggregates(),\n}))(PureDashboard);\n","import React from 'react';\nimport { RouterProvider, Outlet } from '@tanstack/react-router';\nimport { TanStackRouterDevtools } from '@tanstack/react-router-devtools';\nimport { MantineProvider } from '@mantine/core';\n\nimport '@mantine/core/styles.css';\n\nimport { AppAPIs } from '../../model/types';\nimport {\n  Trainings,\n  Home,\n  Menu,\n  Dashboard,\n  NotFound,\n  CreateTraining,\n  CreateExercise,\n  EditNewExercise,\n  EditExistingExercise,\n  Training,\n  Exercise,\n  EditExistingTraining,\n  AuthProtection,\n} from '../../screens';\nimport { Notifications, BlockingLayer } from '../../components';\nimport { AppContext } from '../../utils';\nimport { AppProps, AppState, AppContext as IAppContext } from '../../types';\nimport style from './style.module.scss';\n\nconst RootComp = () => <Outlet />;\nconst WrappedHome = () => <Home />;\nconst WrappedDashboard = () => <Dashboard />;\nconst WrappedAuthProtection = () => <AuthProtection />;\nconst WrappedMenu = () => <Menu />;\nconst WrappedTrainings = () => <Trainings />;\nconst WrappedTraining = () => <Training />;\nconst WrappedEditExistingTraining = () => <EditExistingTraining />;\nconst WrappedCreateTraining = () => <CreateTraining />;\nconst WrappedExercise = () => <Exercise />;\nconst WrappedEditExistingExercise = () => <EditExistingExercise />;\nconst WrappedEditNewExercise = () => <EditNewExercise />;\nconst WrappedCreateExercise = () => <CreateExercise />;\n\nexport class App extends React.Component<AppProps, AppState> {\n  private apis: AppAPIs;\n  private appContext: IAppContext;\n\n  constructor(props: AppProps) {\n    super(props);\n\n    const { apis, appContext } = props;\n\n    this.apis = apis;\n    this.appContext = appContext;\n  }\n\n  componentDidMount() {\n    const routePathsToComponents = {\n      DEFAULT_NOT_FOUND: NotFound,\n      __root__: RootComp,\n      '/': WrappedHome,\n      '/dashboard': WrappedDashboard,\n      '/pathless_auth': WrappedAuthProtection,\n      '/menu': WrappedMenu,\n      '/trainings': undefined,\n      '/trainings/': WrappedTrainings,\n      '/trainings/$training': undefined,\n      '/trainings/$training/': WrappedTraining,\n      '/trainings/$training/edit': WrappedEditExistingTraining,\n      '/trainings/$training/new': WrappedCreateTraining,\n      '/trainings/$training/$exercise': undefined,\n      '/trainings/$training/$exercise/': WrappedExercise,\n      '/trainings/$training/$exercise/edit': WrappedEditExistingExercise,\n      '/trainings/$training/$exercise/editNew': WrappedEditNewExercise,\n      '/trainings/$training/$exercise/new-exercise': WrappedCreateExercise,\n    };\n\n    this.apis.navigationApi.setRouterConfiguration({\n      routePathsToComponents,\n    });\n  }\n\n  render() {\n    return (\n      <AppContext.Provider value={this.appContext}>\n        <MantineProvider>\n          <div className={style.releaseVersion}>v{__APP_VERSION__}</div>\n          <div className={style.app}>\n            <Notifications />\n            <BlockingLayer />\n            <TanStackRouterDevtools\n              position=\"bottom-right\"\n              router={this.apis.navigationApi.__router}\n            />\n            <RouterProvider router={this.apis.navigationApi.__router} />\n          </div>\n        </MantineProvider>\n      </AppContext.Provider>\n    );\n  }\n}\n","import React from 'react';\nimport classnames from 'classnames';\nimport { NavbarContainerProps } from './types';\n\nimport style from './style.module.scss';\n\nexport const NavbarContainer: React.FC<NavbarContainerProps> = ({\n  className,\n  children,\n}) => {\n  return <div className={classnames(style.navbar, className)}>{children}</div>;\n};\n","import * as React from \"react\";\nconst SvgBurger = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", viewBox: \"0 0 384.97 384.97\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M12.03,84.212h360.909c6.641,0,12.03-5.39,12.03-12.03c0-6.641-5.39-12.03-12.03-12.03H12.03     C5.39,60.152,0,65.541,0,72.182C0,78.823,5.39,84.212,12.03,84.212z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M372.939,180.455H12.03c-6.641,0-12.03,5.39-12.03,12.03s5.39,12.03,12.03,12.03h360.909c6.641,0,12.03-5.39,12.03-12.03     S379.58,180.455,372.939,180.455z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M372.939,300.758H12.03c-6.641,0-12.03,5.39-12.03,12.03c0,6.641,5.39,12.03,12.03,12.03h360.909     c6.641,0,12.03-5.39,12.03-12.03C384.97,306.147,379.58,300.758,372.939,300.758z\" }));\nexport default SvgBurger;\n","import * as React from \"react\";\nconst SvgDumbbell = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: \"30px\", height: \"30px\", viewBox: \"0 0 488 488\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M451.522,182.475l33.579-32.914c1.699-1.701,2.798-4.302,2.798-6.903l0,0c0-2.701-0.999-5.202-2.898-7.103l-33.979-34.014 l33.979-33.314c1.899-1.901,2.998-4.402,2.998-7.103s-0.999-5.202-2.898-7.103L434.033,2.901C432.134,1,429.636,0,426.938,0 c-2.698,0-5.197,1.1-7.096,3.001l-33.28,34.014L352.583,3.001C350.685,1.1,348.086,0.1,345.488,0.1 c-2.698,0-5.197,1.1-7.096,3.001l-32.88,33.614L271.933,3.101c-3.898-3.902-10.194-3.902-14.091,0l-51.069,51.121 c-1.899,1.901-2.898,4.402-2.898,7.103s1.099,5.202,2.898,7.103l74.454,74.531L143.012,281.315l-74.454-74.531 c-1.899-1.901-4.397-2.901-7.096-2.901c-2.698,0-5.197,1.1-7.096,2.901L3.098,257.505c-3.898,3.902-3.898,10.204,0,14.106 l33.579,33.614L2.998,338.038C1.099,339.939,0,342.44,0,345.141s0.999,5.202,2.898,7.103l34.179,34.214L3.098,419.772 c-1.899,1.901-2.998,4.402-2.998,7.103s0.999,5.202,2.898,7.103l51.069,51.121C55.966,487,58.464,488,61.163,488 c2.698,0,5.197-1.1,7.096-3.001l33.28-34.014l33.879,33.914c1.899,1.901,4.397,2.901,7.096,2.901s5.197-1.1,7.096-3.001 l33.08-33.514l33.679,33.714c1.999,2.001,4.497,2.901,7.096,2.901c2.598,0,5.097-1,7.096-2.901l51.069-51.121 c3.898-3.902,3.898-10.204,0-14.106l-74.454-74.531l138.215-138.357l74.454,74.531c1.999,2.001,4.497,2.901,7.096,2.901 s5.097-1,7.096-2.901l51.069-51.121c1.899-1.901,2.898-4.402,2.898-7.103s-1.099-5.202-2.898-7.103L451.522,182.475z M426.938,24.11l36.777,36.815l-26.883,26.411l-18.089-18.107l-18.089-18.107L426.938,24.11z M345.388,24.11l118.327,118.349 l-26.484,26.111v0L319.404,50.621L345.388,24.11z M61.163,463.89l-36.777-36.815l26.883-26.411l36.278,36.315L61.163,463.89z M142.512,463.79l-33.879-33.914l-50.269-50.321l-34.079-34.114l26.584-25.911l58.864,58.924l58.964,59.024L142.512,463.79z M260.34,427.075l-36.877,36.915l-33.679-33.714L57.964,298.322l-33.679-33.714l36.877-36.915L260.34,427.075z M192.981,331.236 l-36.178-36.215l138.215-138.357l36.178,36.215L192.981,331.236z M426.838,260.307L426.838,260.307l-82.849-82.934l-41.874-41.917 L227.66,60.925l36.877-36.915l33.679,33.714l131.819,131.954l33.679,33.714L426.838,260.307z\" }));\nexport default SvgDumbbell;\n","import { AppContext } from '../../types';\nimport { NavbarController } from './types';\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): NavbarController => {\n  const { navigationApi } = serviceLocator.getAPIs();\n\n  return {\n    onHomeClick: () => {\n      navigationApi.toHome();\n    },\n    onTrainingsClick: () => {\n      navigationApi.toTrainings();\n    },\n    onBurgerClick: () => {\n      navigationApi.toMenu();\n    },\n    isHomeActive: () => navigationApi.isHomeUrl(),\n    isTrainingsActive: () => navigationApi.isTrainingsUrl(),\n    isBurgerActive: () => navigationApi.isMenuUrl(),\n    storeDataAccessors: controller.storeDataAccessors,\n  };\n};\n\ncontroller.storeDataAccessors = [] as string[];\n","import React from 'react';\nimport classnames from 'classnames';\nimport { ButtonProps } from './types';\nimport { isIOS as _isIOS } from '../../utils';\n\nimport style from './style.module.scss';\n\nconst isIOS = _isIOS();\n\nexport const Button: React.FC<ButtonProps> = ({\n  skin,\n  font,\n  size,\n  className,\n  children,\n  disabled,\n  onClick,\n  ...props\n}) => {\n  const skinClassName = {\n    [style.zeroStyle]: skin === 'zero-style',\n    [style.primary]: skin === 'primary',\n    [style.icon]: skin === 'icon',\n    [style.text]: skin === 'text',\n  };\n  const fontClassName = {\n    [style.nunito]: font === 'nunito',\n    [style.indieFlower]: font === 'indieFlower',\n  };\n  const sizeClassName = {\n    [style.small]: size === 'small',\n    [style.medium]: size === 'medium',\n    [style.large]: size === 'large',\n    [style.xLarge]: size === 'xLarge',\n  };\n\n  /**\n   * iOS fix:\n   * on iOS, onClick event is not always triggered.\n   * the issue was noticed when focus was on input and\n   * later un-focusing it by clicking in an empty space.\n   * after that, all buttons became unclickable.\n   */\n  const Component = isIOS ? IOSFixedOnClickButton : RegularButton;\n\n  return (\n    <Component\n      type=\"button\"\n      {...props}\n      onClick={disabled ? void 0 : onClick}\n      disabled={disabled}\n      className={classnames(\n        className,\n        style.button,\n        skinClassName,\n        fontClassName,\n        sizeClassName,\n        { [style.disabled]: disabled },\n      )}\n      children={children}\n    />\n  );\n};\n\nconst RegularButton = (props: any) => <button {...props} />;\n\nconst IOSFixedOnClickButton: React.FC<any> = ({\n  onClick,\n  children,\n  style,\n  ...props\n}) => {\n  const isScrolling = React.useRef(false);\n\n  // 1. Detect if the user starts moving (scrolling)\n  const onPointerMove = () => {\n    isScrolling.current = true;\n  };\n\n  // 2. Reset the scroll flag when they first touch\n  const onPointerDown = () => {\n    isScrolling.current = false;\n  };\n\n  // 3. Only fire the handler if they didn't scroll\n  const onPointerUp = (e: any) => {\n    if (!isScrolling.current) {\n      onClick(e);\n    }\n  };\n\n  return (\n    <button\n      {...props}\n      onPointerDown={onPointerDown}\n      onPointerMove={onPointerMove}\n      onPointerUp={onPointerUp}\n      style={{\n        ...style,\n        touchAction: 'pan-y',\n      }}\n    >\n      {children}\n    </button>\n  );\n};\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { connect } from '../../utils';\nimport Burger from '../../assets/burger.svg?react';\nimport Dumbbell from '../../assets/dumbbell.svg?react';\nimport { controller } from './controller';\nimport { Button } from '../Button';\nimport { NavbarContainer } from '../NavbarContainer';\nimport { NavbarProps, NavbarState, NavbarController } from './types';\n\nimport style from './style.module.scss';\n\nclass PureNavbar extends React.Component<NavbarProps, NavbarState> {\n  render() {\n    const {\n      onHomeClick,\n      onTrainingsClick,\n      onBurgerClick,\n      isHomeActive,\n      isTrainingsActive,\n      isBurgerActive,\n    } = this.props;\n\n    return (\n      <NavbarContainer>\n        <Button\n          skin=\"text\"\n          font=\"indieFlower\"\n          size=\"large\"\n          className={classnames({\n            [style.active]: isHomeActive,\n          })}\n          onClick={onHomeClick}\n          data-testid=\"nav-home-button\"\n        >\n          Home\n        </Button>\n        <Button\n          skin=\"text\"\n          font=\"indieFlower\"\n          size=\"large\"\n          className={classnames({\n            [style.active]: isTrainingsActive,\n          })}\n          onClick={onTrainingsClick}\n          data-testid=\"nav-trainings-button\"\n        >\n          Trainings\n        </Button>\n        <Button\n          skin=\"icon\"\n          size=\"large\"\n          className={classnames(style.burger, {\n            [style.activeBurger]: isBurgerActive,\n            [style.animationBurger]: isBurgerActive,\n          })}\n          onClick={onBurgerClick}\n          data-testid=\"nav-burger-button\"\n        >\n          <Burger />\n          <Dumbbell />\n        </Button>\n      </NavbarContainer>\n    );\n  }\n}\n\nexport const Navbar = connect<NavbarController, NavbarProps>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    onHomeClick: ctrl.onHomeClick,\n    onTrainingsClick: ctrl.onTrainingsClick,\n    onBurgerClick: ctrl.onBurgerClick,\n    isHomeActive: ctrl.isHomeActive(),\n    isTrainingsActive: ctrl.isTrainingsActive(),\n    isBurgerActive: ctrl.isBurgerActive(),\n  }),\n)(PureNavbar);\n","import React from 'react';\nimport { LayoutProps } from './types';\nimport style from './style.module.scss';\n\nexport const Layout: React.FC<LayoutProps> = (props) => {\n  const { topBar, bottomBar, children, dataTestId } = props;\n  return (\n    <div className={style.layout} data-testid={dataTestId}>\n      {topBar && <div className={style.layoutTop}>{topBar}</div>}\n      <div className={style.layoutCenter}>\n        <div className={style.layoutContent}>{children}</div>\n      </div>\n      {bottomBar && <div className={style.layoutBottom}>{bottomBar}</div>}\n    </div>\n  );\n};\n","import React, { useCallback } from 'react';\nimport classnames from 'classnames';\nimport { InputProps } from './types';\n\nimport style from './style.module.scss';\n\nexport const Input: React.FC<InputProps> = ({\n  value,\n  onChange,\n  onBlur,\n  className,\n  ...props\n}) => {\n  const [localValue, setLocalValue] = React.useState(value);\n\n  const onChangeLocal = useCallback(\n    (eventObject: React.ChangeEvent<HTMLInputElement>) => {\n      const newValue = eventObject.target.value;\n      setLocalValue(newValue);\n      onChange?.(newValue, eventObject);\n    },\n    [onChange],\n  );\n\n  const onBlurLocal = useCallback(\n    (eventObject: React.FocusEvent<HTMLInputElement>) => {\n      onBlur?.(String(localValue), eventObject);\n    },\n    [localValue, onBlur],\n  );\n\n  return (\n    <input\n      {...props}\n      value={localValue}\n      onChange={onChangeLocal}\n      onBlur={onBlurLocal}\n      className={classnames(style.input, className)}\n    />\n  );\n};\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","import React, { useState } from 'react';\nimport { Combobox, InputBase, useCombobox } from '@mantine/core';\nimport groupBy from 'lodash/groupBy';\n\nimport { AutocompleteProps } from './types';\nimport style from './style.module.scss';\n\nexport const Autocomplete: React.FC<AutocompleteProps> = ({\n  initialValue,\n  options,\n  onSelectOption,\n  onCreateOption,\n  onClearSelection,\n}) => {\n  const combobox = useCombobox({\n    onDropdownClose: () => combobox.resetSelectedOption(),\n  });\n\n  const [search, setSearch] = useState(initialValue || '');\n\n  const exactOptionMatch = options.some((item) => item.label === search);\n  const filteredOptions = exactOptionMatch\n    ? options\n    : options.filter((item) =>\n        item.label.toLowerCase().includes(search.toLowerCase().trim()),\n      );\n\n  const grouped = groupBy(filteredOptions, (it) => it.group);\n  const dropdownOptions = Object.entries(grouped).map(([group, items]) => (\n    <Combobox.Group\n      data-testid=\"autocomplete-option-group\"\n      key={group}\n      label={group}\n    >\n      {items.map((item) => (\n        <Combobox.Option\n          data-testid=\"autocomplete-option\"\n          value={item.value}\n          key={item.value}\n        >\n          {item.label}\n        </Combobox.Option>\n      ))}\n    </Combobox.Group>\n  ));\n\n  const onClearBtn = () => {\n    setSearch('');\n    onClearSelection?.();\n  };\n\n  return (\n    <Combobox\n      store={combobox}\n      withinPortal={false}\n      onOptionSubmit={(val) => {\n        if (val === '$create') {\n          onCreateOption?.(search);\n        } else {\n          const label = options.find((item) => item.value === val)?.label;\n          if (label) {\n            setSearch(label);\n            onSelectOption(val);\n          }\n        }\n\n        combobox.closeDropdown();\n      }}\n      classNames={{\n        dropdown: style.dropdown,\n      }}\n    >\n      <Combobox.Target>\n        <InputBase\n          data-testid=\"autocomplete-input\"\n          className={style.input}\n          leftSection={<Combobox.ClearButton onClear={onClearBtn} />}\n          rightSection={<Combobox.Chevron />}\n          value={search}\n          onChange={(event) => {\n            combobox.openDropdown();\n            combobox.updateSelectedOptionIndex();\n            setSearch(event.currentTarget.value);\n          }}\n          onClick={() => combobox.openDropdown()}\n          onFocus={() => combobox.openDropdown()}\n          onBlur={() => {\n            combobox.closeDropdown();\n          }}\n          placeholder=\"Search value\"\n          rightSectionPointerEvents=\"none\"\n        />\n      </Combobox.Target>\n\n      <Combobox.Dropdown data-testid=\"autocomplete-dropdown\">\n        <Combobox.Options>\n          {dropdownOptions}\n          {!exactOptionMatch && search.trim().length > 0 && (\n            <Combobox.Option\n              data-testid=\"autocomplete-option-create\"\n              key=\"create-option\"\n              value=\"$create\"\n            >\n              + Create: \"{search}\"\n            </Combobox.Option>\n          )}\n        </Combobox.Options>\n      </Combobox.Dropdown>\n    </Combobox>\n  );\n};\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","import { ExerciseType } from '../../model/types';\n\nexport const defaultExerciseTypes: ExerciseType[] = [\n  {\n    label: 'Barbell Bench Press',\n    value: 'barbellBenchPress',\n    group: 'chest',\n  },\n  {\n    label: 'Deadlift',\n    value: 'deadlift',\n    group: 'compound',\n  },\n  {\n    label: 'Arm Curls Seated Biceps',\n    value: 'armCurlsSeatedBiceps',\n    group: 'biceps',\n  },\n  {\n    label: 'Barbell Back Squat',\n    value: 'barbellBackSquat',\n    group: 'legs',\n  },\n  {\n    label: 'Barbell Row (Lats)',\n    value: 'barbellRowLats',\n    group: 'back',\n  },\n  {\n    label: 'Cable Fly Biceps',\n    value: 'cableFlyBiceps',\n    group: 'biceps',\n  },\n  {\n    label: 'Calf Press Standing',\n    value: 'calfPressStanding',\n    group: 'legs',\n  },\n  {\n    label: 'Chest Supported Machine Row (Traps)',\n    value: 'chestSupportedMachineRowTraps',\n    group: 'back',\n  },\n  {\n    label: 'Close-grip Barbell Bench Press',\n    value: 'closeGripBarbellBenchPress',\n    group: 'triceps',\n  },\n  {\n    label: 'Dumbbell Incline Bench Press',\n    value: 'dumbbellInclineBenchPress',\n    group: 'chest',\n  },\n  {\n    label: 'Dumbbell Overhead Triceps Extension, 1 Arm',\n    value: 'dumbbellOverheadTricepsExtension1Arm',\n    group: 'triceps',\n  },\n  {\n    label: 'Dumbbell Scull Crusher',\n    value: 'dumbbellScullCrusher',\n    group: 'triceps',\n  },\n  {\n    label: 'Incline Machine Chest Press',\n    value: 'inclineMachineChestPress',\n    group: 'chest',\n  },\n  {\n    label: 'Leg Press Calf Rises',\n    value: 'legPressCalfRises',\n    group: 'legs',\n  },\n  {\n    label: 'Overhead Cable Extension 1 Arm',\n    value: 'overheadCableExtension1Arm',\n    group: 'triceps',\n  },\n  {\n    label: 'Plate Loaded Lat Pulldown',\n    value: 'plateLoadedLatPulldown',\n    group: 'back',\n  },\n  {\n    label: 'Pushups',\n    value: 'pushups',\n    group: 'chest',\n  },\n  {\n    label: 'Scott Curls Biceps',\n    value: 'scottCurlsBiceps',\n    group: 'biceps',\n  },\n  {\n    label: 'Seated Dumbbell Curls Supinated',\n    value: 'seatedDumbbellCurlsSupinated',\n    group: 'biceps',\n  },\n  {\n    label: 'Seated Dumbbell Shoulder Press',\n    value: 'seatedDumbbellShoulderPress',\n    group: 'shoulders',\n  },\n  {\n    label: 'Single Arm Dumbbell Row',\n    value: 'singleArmDumbbellRow',\n    group: 'back',\n  },\n  {\n    label: 'Standing Dumbbell Curl',\n    value: 'standingDumbbellCurl',\n    group: 'biceps',\n  },\n  {\n    label: 'Standing Dumbbell Hammer Curl',\n    value: 'standingDumbbellHammerCurl',\n    group: 'biceps',\n  },\n  {\n    label: 'Standing EZ Bar Curl',\n    value: 'standingEZBarCurl',\n    group: 'biceps',\n  },\n  {\n    label: 'Standing EZ Barbell Curls',\n    value: 'standingEZBarbellCurls',\n    group: 'biceps',\n  },\n  {\n    label: 'Triceps Cable Pushdowns',\n    value: 'tricepsCablePushdowns',\n    group: 'triceps',\n  },\n];\n","import { AppContext } from '../../types';\nimport { Controller } from './types';\nimport { ExerciseType } from '../../model/types';\nimport { defaultExerciseTypes } from './constants';\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): Controller => {\n  const { getStoreData } = serviceLocator.getStore();\n  const { trainingsApi } = serviceLocator.getAPIs();\n\n  const getStoreExerciseTypes = () =>\n    getStoreData(controller.storeDataAccessors).exerciseTypes as ExerciseType[];\n\n  const getExerciseTypes = () => {\n    const exerciseTypes = getStoreExerciseTypes();\n    const sortedByGroup = [...defaultExerciseTypes, ...exerciseTypes].sort(\n      (a, b) => a.group.localeCompare(b.group),\n    );\n    return sortedByGroup;\n  };\n\n  return {\n    getExerciseTypes: () => getExerciseTypes(),\n    onCreateNewType: (label: string, group: string) => {\n      trainingsApi.create.exerciseType({\n        label,\n        group: group as ExerciseType['group'],\n      });\n    },\n    getSelectedTypeLabel: (value: string) => {\n      const exerciseTypes = getExerciseTypes();\n      return exerciseTypes.find((type) => type.value === value)?.label;\n    },\n    isSaveDisabledDefault: (data) => {\n      return !data.name.trim().length;\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['exerciseTypes'];\n","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","/**\n * Checks if a given element has a CSS class.\n * \n * @param element the element\n * @param className the CSS class name\n */\nexport default function hasClass(element, className) {\n  if (element.classList) return !!className && element.classList.contains(className);\n  return (\" \" + (element.className.baseVal || element.className) + \" \").indexOf(\" \" + className + \" \") !== -1;\n}","import hasClass from './hasClass';\n/**\n * Adds a CSS class to a given element.\n * \n * @param element the element\n * @param className the CSS class name\n */\n\nexport default function addClass(element, className) {\n  if (element.classList) element.classList.add(className);else if (!hasClass(element, className)) if (typeof element.className === 'string') element.className = element.className + \" \" + className;else element.setAttribute('class', (element.className && element.className.baseVal || '') + \" \" + className);\n}","function replaceClassName(origClass, classToRemove) {\n  return origClass.replace(new RegExp(\"(^|\\\\s)\" + classToRemove + \"(?:\\\\s|$)\", 'g'), '$1').replace(/\\s+/g, ' ').replace(/^\\s*|\\s*$/g, '');\n}\n/**\n * Removes a CSS class from a given element.\n * \n * @param element the element\n * @param className the CSS class name\n */\n\n\nexport default function removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else if (typeof element.className === 'string') {\n    element.className = replaceClassName(element.className, className);\n  } else {\n    element.setAttribute('class', replaceClassName(element.className && element.className.baseVal || '', className));\n  }\n}","export default {\n  disabled: false\n};","import React from 'react';\nexport default React.createContext(null);","export var forceReflow = function forceReflow(node) {\n  return node.scrollTop;\n};","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport config from './config';\nimport { timeoutsShape } from './utils/PropTypes';\nimport TransitionGroupContext from './TransitionGroupContext';\nimport { forceReflow } from './utils/reflow';\nexport var UNMOUNTED = 'unmounted';\nexport var EXITED = 'exited';\nexport var ENTERING = 'entering';\nexport var ENTERED = 'entered';\nexport var EXITING = 'exiting';\n/**\n * The Transition component lets you describe a transition from one component\n * state to another _over time_ with a simple declarative API. Most commonly\n * it's used to animate the mounting and unmounting of a component, but can also\n * be used to describe in-place transition states as well.\n *\n * ---\n *\n * **Note**: `Transition` is a platform-agnostic base component. If you're using\n * transitions in CSS, you'll probably want to use\n * [`CSSTransition`](https://reactcommunity.org/react-transition-group/css-transition)\n * instead. It inherits all the features of `Transition`, but contains\n * additional features necessary to play nice with CSS transitions (hence the\n * name of the component).\n *\n * ---\n *\n * By default the `Transition` component does not alter the behavior of the\n * component it renders, it only tracks \"enter\" and \"exit\" states for the\n * components. It's up to you to give meaning and effect to those states. For\n * example we can add styles to a component when it enters or exits:\n *\n * ```jsx\n * import { Transition } from 'react-transition-group';\n *\n * const duration = 300;\n *\n * const defaultStyle = {\n *   transition: `opacity ${duration}ms ease-in-out`,\n *   opacity: 0,\n * }\n *\n * const transitionStyles = {\n *   entering: { opacity: 1 },\n *   entered:  { opacity: 1 },\n *   exiting:  { opacity: 0 },\n *   exited:  { opacity: 0 },\n * };\n *\n * const Fade = ({ in: inProp }) => (\n *   <Transition in={inProp} timeout={duration}>\n *     {state => (\n *       <div style={{\n *         ...defaultStyle,\n *         ...transitionStyles[state]\n *       }}>\n *         I'm a fade Transition!\n *       </div>\n *     )}\n *   </Transition>\n * );\n * ```\n *\n * There are 4 main states a Transition can be in:\n *  - `'entering'`\n *  - `'entered'`\n *  - `'exiting'`\n *  - `'exited'`\n *\n * Transition state is toggled via the `in` prop. When `true` the component\n * begins the \"Enter\" stage. During this stage, the component will shift from\n * its current transition state, to `'entering'` for the duration of the\n * transition and then to the `'entered'` stage once it's complete. Let's take\n * the following example (we'll use the\n * [useState](https://reactjs.org/docs/hooks-reference.html#usestate) hook):\n *\n * ```jsx\n * function App() {\n *   const [inProp, setInProp] = useState(false);\n *   return (\n *     <div>\n *       <Transition in={inProp} timeout={500}>\n *         {state => (\n *           // ...\n *         )}\n *       </Transition>\n *       <button onClick={() => setInProp(true)}>\n *         Click to Enter\n *       </button>\n *     </div>\n *   );\n * }\n * ```\n *\n * When the button is clicked the component will shift to the `'entering'` state\n * and stay there for 500ms (the value of `timeout`) before it finally switches\n * to `'entered'`.\n *\n * When `in` is `false` the same thing happens except the state moves from\n * `'exiting'` to `'exited'`.\n */\n\nvar Transition = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Transition, _React$Component);\n\n  function Transition(props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, props, context) || this;\n    var parentGroup = context; // In the context of a TransitionGroup all enters are really appears\n\n    var appear = parentGroup && !parentGroup.isMounting ? props.enter : props.appear;\n    var initialStatus;\n    _this.appearStatus = null;\n\n    if (props.in) {\n      if (appear) {\n        initialStatus = EXITED;\n        _this.appearStatus = ENTERING;\n      } else {\n        initialStatus = ENTERED;\n      }\n    } else {\n      if (props.unmountOnExit || props.mountOnEnter) {\n        initialStatus = UNMOUNTED;\n      } else {\n        initialStatus = EXITED;\n      }\n    }\n\n    _this.state = {\n      status: initialStatus\n    };\n    _this.nextCallback = null;\n    return _this;\n  }\n\n  Transition.getDerivedStateFromProps = function getDerivedStateFromProps(_ref, prevState) {\n    var nextIn = _ref.in;\n\n    if (nextIn && prevState.status === UNMOUNTED) {\n      return {\n        status: EXITED\n      };\n    }\n\n    return null;\n  } // getSnapshotBeforeUpdate(prevProps) {\n  //   let nextStatus = null\n  //   if (prevProps !== this.props) {\n  //     const { status } = this.state\n  //     if (this.props.in) {\n  //       if (status !== ENTERING && status !== ENTERED) {\n  //         nextStatus = ENTERING\n  //       }\n  //     } else {\n  //       if (status === ENTERING || status === ENTERED) {\n  //         nextStatus = EXITING\n  //       }\n  //     }\n  //   }\n  //   return { nextStatus }\n  // }\n  ;\n\n  var _proto = Transition.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updateStatus(true, this.appearStatus);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var nextStatus = null;\n\n    if (prevProps !== this.props) {\n      var status = this.state.status;\n\n      if (this.props.in) {\n        if (status !== ENTERING && status !== ENTERED) {\n          nextStatus = ENTERING;\n        }\n      } else {\n        if (status === ENTERING || status === ENTERED) {\n          nextStatus = EXITING;\n        }\n      }\n    }\n\n    this.updateStatus(false, nextStatus);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cancelNextCallback();\n  };\n\n  _proto.getTimeouts = function getTimeouts() {\n    var timeout = this.props.timeout;\n    var exit, enter, appear;\n    exit = enter = appear = timeout;\n\n    if (timeout != null && typeof timeout !== 'number') {\n      exit = timeout.exit;\n      enter = timeout.enter; // TODO: remove fallback for next major\n\n      appear = timeout.appear !== undefined ? timeout.appear : enter;\n    }\n\n    return {\n      exit: exit,\n      enter: enter,\n      appear: appear\n    };\n  };\n\n  _proto.updateStatus = function updateStatus(mounting, nextStatus) {\n    if (mounting === void 0) {\n      mounting = false;\n    }\n\n    if (nextStatus !== null) {\n      // nextStatus will always be ENTERING or EXITING.\n      this.cancelNextCallback();\n\n      if (nextStatus === ENTERING) {\n        if (this.props.unmountOnExit || this.props.mountOnEnter) {\n          var node = this.props.nodeRef ? this.props.nodeRef.current : ReactDOM.findDOMNode(this); // https://github.com/reactjs/react-transition-group/pull/749\n          // With unmountOnExit or mountOnEnter, the enter animation should happen at the transition between `exited` and `entering`.\n          // To make the animation happen,  we have to separate each rendering and avoid being processed as batched.\n\n          if (node) forceReflow(node);\n        }\n\n        this.performEnter(mounting);\n      } else {\n        this.performExit();\n      }\n    } else if (this.props.unmountOnExit && this.state.status === EXITED) {\n      this.setState({\n        status: UNMOUNTED\n      });\n    }\n  };\n\n  _proto.performEnter = function performEnter(mounting) {\n    var _this2 = this;\n\n    var enter = this.props.enter;\n    var appearing = this.context ? this.context.isMounting : mounting;\n\n    var _ref2 = this.props.nodeRef ? [appearing] : [ReactDOM.findDOMNode(this), appearing],\n        maybeNode = _ref2[0],\n        maybeAppearing = _ref2[1];\n\n    var timeouts = this.getTimeouts();\n    var enterTimeout = appearing ? timeouts.appear : timeouts.enter; // no enter animation skip right to ENTERED\n    // if we are mounting and running this it means appear _must_ be set\n\n    if (!mounting && !enter || config.disabled) {\n      this.safeSetState({\n        status: ENTERED\n      }, function () {\n        _this2.props.onEntered(maybeNode);\n      });\n      return;\n    }\n\n    this.props.onEnter(maybeNode, maybeAppearing);\n    this.safeSetState({\n      status: ENTERING\n    }, function () {\n      _this2.props.onEntering(maybeNode, maybeAppearing);\n\n      _this2.onTransitionEnd(enterTimeout, function () {\n        _this2.safeSetState({\n          status: ENTERED\n        }, function () {\n          _this2.props.onEntered(maybeNode, maybeAppearing);\n        });\n      });\n    });\n  };\n\n  _proto.performExit = function performExit() {\n    var _this3 = this;\n\n    var exit = this.props.exit;\n    var timeouts = this.getTimeouts();\n    var maybeNode = this.props.nodeRef ? undefined : ReactDOM.findDOMNode(this); // no exit animation skip right to EXITED\n\n    if (!exit || config.disabled) {\n      this.safeSetState({\n        status: EXITED\n      }, function () {\n        _this3.props.onExited(maybeNode);\n      });\n      return;\n    }\n\n    this.props.onExit(maybeNode);\n    this.safeSetState({\n      status: EXITING\n    }, function () {\n      _this3.props.onExiting(maybeNode);\n\n      _this3.onTransitionEnd(timeouts.exit, function () {\n        _this3.safeSetState({\n          status: EXITED\n        }, function () {\n          _this3.props.onExited(maybeNode);\n        });\n      });\n    });\n  };\n\n  _proto.cancelNextCallback = function cancelNextCallback() {\n    if (this.nextCallback !== null) {\n      this.nextCallback.cancel();\n      this.nextCallback = null;\n    }\n  };\n\n  _proto.safeSetState = function safeSetState(nextState, callback) {\n    // This shouldn't be necessary, but there are weird race conditions with\n    // setState callbacks and unmounting in testing, so always make sure that\n    // we can cancel any pending setState callbacks after we unmount.\n    callback = this.setNextCallback(callback);\n    this.setState(nextState, callback);\n  };\n\n  _proto.setNextCallback = function setNextCallback(callback) {\n    var _this4 = this;\n\n    var active = true;\n\n    this.nextCallback = function (event) {\n      if (active) {\n        active = false;\n        _this4.nextCallback = null;\n        callback(event);\n      }\n    };\n\n    this.nextCallback.cancel = function () {\n      active = false;\n    };\n\n    return this.nextCallback;\n  };\n\n  _proto.onTransitionEnd = function onTransitionEnd(timeout, handler) {\n    this.setNextCallback(handler);\n    var node = this.props.nodeRef ? this.props.nodeRef.current : ReactDOM.findDOMNode(this);\n    var doesNotHaveTimeoutOrListener = timeout == null && !this.props.addEndListener;\n\n    if (!node || doesNotHaveTimeoutOrListener) {\n      setTimeout(this.nextCallback, 0);\n      return;\n    }\n\n    if (this.props.addEndListener) {\n      var _ref3 = this.props.nodeRef ? [this.nextCallback] : [node, this.nextCallback],\n          maybeNode = _ref3[0],\n          maybeNextCallback = _ref3[1];\n\n      this.props.addEndListener(maybeNode, maybeNextCallback);\n    }\n\n    if (timeout != null) {\n      setTimeout(this.nextCallback, timeout);\n    }\n  };\n\n  _proto.render = function render() {\n    var status = this.state.status;\n\n    if (status === UNMOUNTED) {\n      return null;\n    }\n\n    var _this$props = this.props,\n        children = _this$props.children,\n        _in = _this$props.in,\n        _mountOnEnter = _this$props.mountOnEnter,\n        _unmountOnExit = _this$props.unmountOnExit,\n        _appear = _this$props.appear,\n        _enter = _this$props.enter,\n        _exit = _this$props.exit,\n        _timeout = _this$props.timeout,\n        _addEndListener = _this$props.addEndListener,\n        _onEnter = _this$props.onEnter,\n        _onEntering = _this$props.onEntering,\n        _onEntered = _this$props.onEntered,\n        _onExit = _this$props.onExit,\n        _onExiting = _this$props.onExiting,\n        _onExited = _this$props.onExited,\n        _nodeRef = _this$props.nodeRef,\n        childProps = _objectWithoutPropertiesLoose(_this$props, [\"children\", \"in\", \"mountOnEnter\", \"unmountOnExit\", \"appear\", \"enter\", \"exit\", \"timeout\", \"addEndListener\", \"onEnter\", \"onEntering\", \"onEntered\", \"onExit\", \"onExiting\", \"onExited\", \"nodeRef\"]);\n\n    return (\n      /*#__PURE__*/\n      // allows for nested Transitions\n      React.createElement(TransitionGroupContext.Provider, {\n        value: null\n      }, typeof children === 'function' ? children(status, childProps) : React.cloneElement(React.Children.only(children), childProps))\n    );\n  };\n\n  return Transition;\n}(React.Component);\n\nTransition.contextType = TransitionGroupContext;\nTransition.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * A React reference to DOM element that need to transition:\n   * https://stackoverflow.com/a/51127130/4671932\n   *\n   *   - When `nodeRef` prop is used, `node` is not passed to callback functions\n   *      (e.g. `onEnter`) because user already has direct access to the node.\n   *   - When changing `key` prop of `Transition` in a `TransitionGroup` a new\n   *     `nodeRef` need to be provided to `Transition` with changed `key` prop\n   *     (see\n   *     [test/CSSTransition-test.js](https://github.com/reactjs/react-transition-group/blob/13435f897b3ab71f6e19d724f145596f5910581c/test/CSSTransition-test.js#L362-L437)).\n   */\n  nodeRef: PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : function (propValue, key, componentName, location, propFullName, secret) {\n      var value = propValue[key];\n      return PropTypes.instanceOf(value && 'ownerDocument' in value ? value.ownerDocument.defaultView.Element : Element)(propValue, key, componentName, location, propFullName, secret);\n    }\n  }),\n\n  /**\n   * A `function` child can be used instead of a React element. This function is\n   * called with the current transition status (`'entering'`, `'entered'`,\n   * `'exiting'`, `'exited'`), which can be used to apply context\n   * specific props to a component.\n   *\n   * ```jsx\n   * <Transition in={this.state.in} timeout={150}>\n   *   {state => (\n   *     <MyComponent className={`fade fade-${state}`} />\n   *   )}\n   * </Transition>\n   * ```\n   */\n  children: PropTypes.oneOfType([PropTypes.func.isRequired, PropTypes.element.isRequired]).isRequired,\n\n  /**\n   * Show the component; triggers the enter or exit states\n   */\n  in: PropTypes.bool,\n\n  /**\n   * By default the child component is mounted immediately along with\n   * the parent `Transition` component. If you want to \"lazy mount\" the component on the\n   * first `in={true}` you can set `mountOnEnter`. After the first enter transition the component will stay\n   * mounted, even on \"exited\", unless you also specify `unmountOnExit`.\n   */\n  mountOnEnter: PropTypes.bool,\n\n  /**\n   * By default the child component stays mounted after it reaches the `'exited'` state.\n   * Set `unmountOnExit` if you'd prefer to unmount the component after it finishes exiting.\n   */\n  unmountOnExit: PropTypes.bool,\n\n  /**\n   * By default the child component does not perform the enter transition when\n   * it first mounts, regardless of the value of `in`. If you want this\n   * behavior, set both `appear` and `in` to `true`.\n   *\n   * > **Note**: there are no special appear states like `appearing`/`appeared`, this prop\n   * > only adds an additional enter transition. However, in the\n   * > `<CSSTransition>` component that first enter transition does result in\n   * > additional `.appear-*` classes, that way you can choose to style it\n   * > differently.\n   */\n  appear: PropTypes.bool,\n\n  /**\n   * Enable or disable enter transitions.\n   */\n  enter: PropTypes.bool,\n\n  /**\n   * Enable or disable exit transitions.\n   */\n  exit: PropTypes.bool,\n\n  /**\n   * The duration of the transition, in milliseconds.\n   * Required unless `addEndListener` is provided.\n   *\n   * You may specify a single timeout for all transitions:\n   *\n   * ```jsx\n   * timeout={500}\n   * ```\n   *\n   * or individually:\n   *\n   * ```jsx\n   * timeout={{\n   *  appear: 500,\n   *  enter: 300,\n   *  exit: 500,\n   * }}\n   * ```\n   *\n   * - `appear` defaults to the value of `enter`\n   * - `enter` defaults to `0`\n   * - `exit` defaults to `0`\n   *\n   * @type {number | { enter?: number, exit?: number, appear?: number }}\n   */\n  timeout: function timeout(props) {\n    var pt = timeoutsShape;\n    if (!props.addEndListener) pt = pt.isRequired;\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return pt.apply(void 0, [props].concat(args));\n  },\n\n  /**\n   * Add a custom transition end trigger. Called with the transitioning\n   * DOM node and a `done` callback. Allows for more fine grained transition end\n   * logic. Timeouts are still used as a fallback if provided.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * ```jsx\n   * addEndListener={(node, done) => {\n   *   // use the css transitionend event to mark the finish of a transition\n   *   node.addEventListener('transitionend', done, false);\n   * }}\n   * ```\n   */\n  addEndListener: PropTypes.func,\n\n  /**\n   * Callback fired before the \"entering\" status is applied. An extra parameter\n   * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool) -> void\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * Callback fired after the \"entering\" status is applied. An extra parameter\n   * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * Callback fired after the \"entered\" status is applied. An extra parameter\n   * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool) -> void\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * Callback fired before the \"exiting\" status is applied.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement) -> void\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * Callback fired after the \"exiting\" status is applied.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement) -> void\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * Callback fired after the \"exited\" status is applied.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed\n   *\n   * @type Function(node: HtmlElement) -> void\n   */\n  onExited: PropTypes.func\n} : {}; // Name the function so it is clearer in the documentation\n\nfunction noop() {}\n\nTransition.defaultProps = {\n  in: false,\n  mountOnEnter: false,\n  unmountOnExit: false,\n  appear: false,\n  enter: true,\n  exit: true,\n  onEnter: noop,\n  onEntering: noop,\n  onEntered: noop,\n  onExit: noop,\n  onExiting: noop,\n  onExited: noop\n};\nTransition.UNMOUNTED = UNMOUNTED;\nTransition.EXITED = EXITED;\nTransition.ENTERING = ENTERING;\nTransition.ENTERED = ENTERED;\nTransition.EXITING = EXITING;\nexport default Transition;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport PropTypes from 'prop-types';\nimport addOneClass from 'dom-helpers/addClass';\nimport removeOneClass from 'dom-helpers/removeClass';\nimport React from 'react';\nimport Transition from './Transition';\nimport { classNamesShape } from './utils/PropTypes';\nimport { forceReflow } from './utils/reflow';\n\nvar _addClass = function addClass(node, classes) {\n  return node && classes && classes.split(' ').forEach(function (c) {\n    return addOneClass(node, c);\n  });\n};\n\nvar removeClass = function removeClass(node, classes) {\n  return node && classes && classes.split(' ').forEach(function (c) {\n    return removeOneClass(node, c);\n  });\n};\n/**\n * A transition component inspired by the excellent\n * [ng-animate](https://docs.angularjs.org/api/ngAnimate) library, you should\n * use it if you're using CSS transitions or animations. It's built upon the\n * [`Transition`](https://reactcommunity.org/react-transition-group/transition)\n * component, so it inherits all of its props.\n *\n * `CSSTransition` applies a pair of class names during the `appear`, `enter`,\n * and `exit` states of the transition. The first class is applied and then a\n * second `*-active` class in order to activate the CSS transition. After the\n * transition, matching `*-done` class names are applied to persist the\n * transition state.\n *\n * ```jsx\n * function App() {\n *   const [inProp, setInProp] = useState(false);\n *   return (\n *     <div>\n *       <CSSTransition in={inProp} timeout={200} classNames=\"my-node\">\n *         <div>\n *           {\"I'll receive my-node-* classes\"}\n *         </div>\n *       </CSSTransition>\n *       <button type=\"button\" onClick={() => setInProp(true)}>\n *         Click to Enter\n *       </button>\n *     </div>\n *   );\n * }\n * ```\n *\n * When the `in` prop is set to `true`, the child component will first receive\n * the class `example-enter`, then the `example-enter-active` will be added in\n * the next tick. `CSSTransition` [forces a\n * reflow](https://github.com/reactjs/react-transition-group/blob/5007303e729a74be66a21c3e2205e4916821524b/src/CSSTransition.js#L208-L215)\n * between before adding the `example-enter-active`. This is an important trick\n * because it allows us to transition between `example-enter` and\n * `example-enter-active` even though they were added immediately one after\n * another. Most notably, this is what makes it possible for us to animate\n * _appearance_.\n *\n * ```css\n * .my-node-enter {\n *   opacity: 0;\n * }\n * .my-node-enter-active {\n *   opacity: 1;\n *   transition: opacity 200ms;\n * }\n * .my-node-exit {\n *   opacity: 1;\n * }\n * .my-node-exit-active {\n *   opacity: 0;\n *   transition: opacity 200ms;\n * }\n * ```\n *\n * `*-active` classes represent which styles you want to animate **to**, so it's\n * important to add `transition` declaration only to them, otherwise transitions\n * might not behave as intended! This might not be obvious when the transitions\n * are symmetrical, i.e. when `*-enter-active` is the same as `*-exit`, like in\n * the example above (minus `transition`), but it becomes apparent in more\n * complex transitions.\n *\n * **Note**: If you're using the\n * [`appear`](http://reactcommunity.org/react-transition-group/transition#Transition-prop-appear)\n * prop, make sure to define styles for `.appear-*` classes as well.\n */\n\n\nvar CSSTransition = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(CSSTransition, _React$Component);\n\n  function CSSTransition() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.appliedClasses = {\n      appear: {},\n      enter: {},\n      exit: {}\n    };\n\n    _this.onEnter = function (maybeNode, maybeAppearing) {\n      var _this$resolveArgument = _this.resolveArguments(maybeNode, maybeAppearing),\n          node = _this$resolveArgument[0],\n          appearing = _this$resolveArgument[1];\n\n      _this.removeClasses(node, 'exit');\n\n      _this.addClass(node, appearing ? 'appear' : 'enter', 'base');\n\n      if (_this.props.onEnter) {\n        _this.props.onEnter(maybeNode, maybeAppearing);\n      }\n    };\n\n    _this.onEntering = function (maybeNode, maybeAppearing) {\n      var _this$resolveArgument2 = _this.resolveArguments(maybeNode, maybeAppearing),\n          node = _this$resolveArgument2[0],\n          appearing = _this$resolveArgument2[1];\n\n      var type = appearing ? 'appear' : 'enter';\n\n      _this.addClass(node, type, 'active');\n\n      if (_this.props.onEntering) {\n        _this.props.onEntering(maybeNode, maybeAppearing);\n      }\n    };\n\n    _this.onEntered = function (maybeNode, maybeAppearing) {\n      var _this$resolveArgument3 = _this.resolveArguments(maybeNode, maybeAppearing),\n          node = _this$resolveArgument3[0],\n          appearing = _this$resolveArgument3[1];\n\n      var type = appearing ? 'appear' : 'enter';\n\n      _this.removeClasses(node, type);\n\n      _this.addClass(node, type, 'done');\n\n      if (_this.props.onEntered) {\n        _this.props.onEntered(maybeNode, maybeAppearing);\n      }\n    };\n\n    _this.onExit = function (maybeNode) {\n      var _this$resolveArgument4 = _this.resolveArguments(maybeNode),\n          node = _this$resolveArgument4[0];\n\n      _this.removeClasses(node, 'appear');\n\n      _this.removeClasses(node, 'enter');\n\n      _this.addClass(node, 'exit', 'base');\n\n      if (_this.props.onExit) {\n        _this.props.onExit(maybeNode);\n      }\n    };\n\n    _this.onExiting = function (maybeNode) {\n      var _this$resolveArgument5 = _this.resolveArguments(maybeNode),\n          node = _this$resolveArgument5[0];\n\n      _this.addClass(node, 'exit', 'active');\n\n      if (_this.props.onExiting) {\n        _this.props.onExiting(maybeNode);\n      }\n    };\n\n    _this.onExited = function (maybeNode) {\n      var _this$resolveArgument6 = _this.resolveArguments(maybeNode),\n          node = _this$resolveArgument6[0];\n\n      _this.removeClasses(node, 'exit');\n\n      _this.addClass(node, 'exit', 'done');\n\n      if (_this.props.onExited) {\n        _this.props.onExited(maybeNode);\n      }\n    };\n\n    _this.resolveArguments = function (maybeNode, maybeAppearing) {\n      return _this.props.nodeRef ? [_this.props.nodeRef.current, maybeNode] // here `maybeNode` is actually `appearing`\n      : [maybeNode, maybeAppearing];\n    };\n\n    _this.getClassNames = function (type) {\n      var classNames = _this.props.classNames;\n      var isStringClassNames = typeof classNames === 'string';\n      var prefix = isStringClassNames && classNames ? classNames + \"-\" : '';\n      var baseClassName = isStringClassNames ? \"\" + prefix + type : classNames[type];\n      var activeClassName = isStringClassNames ? baseClassName + \"-active\" : classNames[type + \"Active\"];\n      var doneClassName = isStringClassNames ? baseClassName + \"-done\" : classNames[type + \"Done\"];\n      return {\n        baseClassName: baseClassName,\n        activeClassName: activeClassName,\n        doneClassName: doneClassName\n      };\n    };\n\n    return _this;\n  }\n\n  var _proto = CSSTransition.prototype;\n\n  _proto.addClass = function addClass(node, type, phase) {\n    var className = this.getClassNames(type)[phase + \"ClassName\"];\n\n    var _this$getClassNames = this.getClassNames('enter'),\n        doneClassName = _this$getClassNames.doneClassName;\n\n    if (type === 'appear' && phase === 'done' && doneClassName) {\n      className += \" \" + doneClassName;\n    } // This is to force a repaint,\n    // which is necessary in order to transition styles when adding a class name.\n\n\n    if (phase === 'active') {\n      if (node) forceReflow(node);\n    }\n\n    if (className) {\n      this.appliedClasses[type][phase] = className;\n\n      _addClass(node, className);\n    }\n  };\n\n  _proto.removeClasses = function removeClasses(node, type) {\n    var _this$appliedClasses$ = this.appliedClasses[type],\n        baseClassName = _this$appliedClasses$.base,\n        activeClassName = _this$appliedClasses$.active,\n        doneClassName = _this$appliedClasses$.done;\n    this.appliedClasses[type] = {};\n\n    if (baseClassName) {\n      removeClass(node, baseClassName);\n    }\n\n    if (activeClassName) {\n      removeClass(node, activeClassName);\n    }\n\n    if (doneClassName) {\n      removeClass(node, doneClassName);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        _ = _this$props.classNames,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"classNames\"]);\n\n    return /*#__PURE__*/React.createElement(Transition, _extends({}, props, {\n      onEnter: this.onEnter,\n      onEntered: this.onEntered,\n      onEntering: this.onEntering,\n      onExit: this.onExit,\n      onExiting: this.onExiting,\n      onExited: this.onExited\n    }));\n  };\n\n  return CSSTransition;\n}(React.Component);\n\nCSSTransition.defaultProps = {\n  classNames: ''\n};\nCSSTransition.propTypes = process.env.NODE_ENV !== \"production\" ? _extends({}, Transition.propTypes, {\n  /**\n   * The animation classNames applied to the component as it appears, enters,\n   * exits or has finished the transition. A single name can be provided, which\n   * will be suffixed for each stage, e.g. `classNames=\"fade\"` applies:\n   *\n   * - `fade-appear`, `fade-appear-active`, `fade-appear-done`\n   * - `fade-enter`, `fade-enter-active`, `fade-enter-done`\n   * - `fade-exit`, `fade-exit-active`, `fade-exit-done`\n   *\n   * A few details to note about how these classes are applied:\n   *\n   * 1. They are _joined_ with the ones that are already defined on the child\n   *    component, so if you want to add some base styles, you can use\n   *    `className` without worrying that it will be overridden.\n   *\n   * 2. If the transition component mounts with `in={false}`, no classes are\n   *    applied yet. You might be expecting `*-exit-done`, but if you think\n   *    about it, a component cannot finish exiting if it hasn't entered yet.\n   *\n   * 2. `fade-appear-done` and `fade-enter-done` will _both_ be applied. This\n   *    allows you to define different behavior for when appearing is done and\n   *    when regular entering is done, using selectors like\n   *    `.fade-enter-done:not(.fade-appear-done)`. For example, you could apply\n   *    an epic entrance animation when element first appears in the DOM using\n   *    [Animate.css](https://daneden.github.io/animate.css/). Otherwise you can\n   *    simply use `fade-enter-done` for defining both cases.\n   *\n   * Each individual classNames can also be specified independently like:\n   *\n   * ```js\n   * classNames={{\n   *  appear: 'my-appear',\n   *  appearActive: 'my-active-appear',\n   *  appearDone: 'my-done-appear',\n   *  enter: 'my-enter',\n   *  enterActive: 'my-active-enter',\n   *  enterDone: 'my-done-enter',\n   *  exit: 'my-exit',\n   *  exitActive: 'my-active-exit',\n   *  exitDone: 'my-done-exit',\n   * }}\n   * ```\n   *\n   * If you want to set these classes using CSS Modules:\n   *\n   * ```js\n   * import styles from './styles.css';\n   * ```\n   *\n   * you might want to use camelCase in your CSS file, that way could simply\n   * spread them instead of listing them one by one:\n   *\n   * ```js\n   * classNames={{ ...styles }}\n   * ```\n   *\n   * @type {string | {\n   *  appear?: string,\n   *  appearActive?: string,\n   *  appearDone?: string,\n   *  enter?: string,\n   *  enterActive?: string,\n   *  enterDone?: string,\n   *  exit?: string,\n   *  exitActive?: string,\n   *  exitDone?: string,\n   * }}\n   */\n  classNames: classNamesShape,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'enter' or 'appear' class is\n   * applied.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'enter-active' or\n   * 'appear-active' class is applied.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'enter' or\n   * 'appear' classes are **removed** and the `done` class is added to the DOM node.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'exit' class is\n   * applied.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed\n   *\n   * @type Function(node: HtmlElement)\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'exit-active' is applied.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed\n   *\n   * @type Function(node: HtmlElement)\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'exit' classes\n   * are **removed** and the `exit-done` class is added to the DOM node.\n   *\n   * **Note**: when `nodeRef` prop is passed, `node` is not passed\n   *\n   * @type Function(node: HtmlElement)\n   */\n  onExited: PropTypes.func\n}) : {};\nexport default CSSTransition;","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","import { Children, cloneElement, isValidElement } from 'react';\n/**\n * Given `this.props.children`, return an object mapping key to child.\n *\n * @param {*} children `this.props.children`\n * @return {object} Mapping of key to child\n */\n\nexport function getChildMapping(children, mapFn) {\n  var mapper = function mapper(child) {\n    return mapFn && isValidElement(child) ? mapFn(child) : child;\n  };\n\n  var result = Object.create(null);\n  if (children) Children.map(children, function (c) {\n    return c;\n  }).forEach(function (child) {\n    // run the map function here instead so that the key is the computed one\n    result[child.key] = mapper(child);\n  });\n  return result;\n}\n/**\n * When you're adding or removing children some may be added or removed in the\n * same render pass. We want to show *both* since we want to simultaneously\n * animate elements in and out. This function takes a previous set of keys\n * and a new set of keys and merges them with its best guess of the correct\n * ordering. In the future we may expose some of the utilities in\n * ReactMultiChild to make this easy, but for now React itself does not\n * directly have this concept of the union of prevChildren and nextChildren\n * so we implement it here.\n *\n * @param {object} prev prev children as returned from\n * `ReactTransitionChildMapping.getChildMapping()`.\n * @param {object} next next children as returned from\n * `ReactTransitionChildMapping.getChildMapping()`.\n * @return {object} a key set that contains all keys in `prev` and all keys\n * in `next` in a reasonable order.\n */\n\nexport function mergeChildMappings(prev, next) {\n  prev = prev || {};\n  next = next || {};\n\n  function getValueForKey(key) {\n    return key in next ? next[key] : prev[key];\n  } // For each key of `next`, the list of keys to insert before that key in\n  // the combined list\n\n\n  var nextKeysPending = Object.create(null);\n  var pendingKeys = [];\n\n  for (var prevKey in prev) {\n    if (prevKey in next) {\n      if (pendingKeys.length) {\n        nextKeysPending[prevKey] = pendingKeys;\n        pendingKeys = [];\n      }\n    } else {\n      pendingKeys.push(prevKey);\n    }\n  }\n\n  var i;\n  var childMapping = {};\n\n  for (var nextKey in next) {\n    if (nextKeysPending[nextKey]) {\n      for (i = 0; i < nextKeysPending[nextKey].length; i++) {\n        var pendingNextKey = nextKeysPending[nextKey][i];\n        childMapping[nextKeysPending[nextKey][i]] = getValueForKey(pendingNextKey);\n      }\n    }\n\n    childMapping[nextKey] = getValueForKey(nextKey);\n  } // Finally, add the keys which didn't appear before any key in `next`\n\n\n  for (i = 0; i < pendingKeys.length; i++) {\n    childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n  }\n\n  return childMapping;\n}\n\nfunction getProp(child, prop, props) {\n  return props[prop] != null ? props[prop] : child.props[prop];\n}\n\nexport function getInitialChildMapping(props, onExited) {\n  return getChildMapping(props.children, function (child) {\n    return cloneElement(child, {\n      onExited: onExited.bind(null, child),\n      in: true,\n      appear: getProp(child, 'appear', props),\n      enter: getProp(child, 'enter', props),\n      exit: getProp(child, 'exit', props)\n    });\n  });\n}\nexport function getNextChildMapping(nextProps, prevChildMapping, onExited) {\n  var nextChildMapping = getChildMapping(nextProps.children);\n  var children = mergeChildMappings(prevChildMapping, nextChildMapping);\n  Object.keys(children).forEach(function (key) {\n    var child = children[key];\n    if (!isValidElement(child)) return;\n    var hasPrev = (key in prevChildMapping);\n    var hasNext = (key in nextChildMapping);\n    var prevChild = prevChildMapping[key];\n    var isLeaving = isValidElement(prevChild) && !prevChild.props.in; // item is new (entering)\n\n    if (hasNext && (!hasPrev || isLeaving)) {\n      // console.log('entering', key)\n      children[key] = cloneElement(child, {\n        onExited: onExited.bind(null, child),\n        in: true,\n        exit: getProp(child, 'exit', nextProps),\n        enter: getProp(child, 'enter', nextProps)\n      });\n    } else if (!hasNext && hasPrev && !isLeaving) {\n      // item is old (exiting)\n      // console.log('leaving', key)\n      children[key] = cloneElement(child, {\n        in: false\n      });\n    } else if (hasNext && hasPrev && isValidElement(prevChild)) {\n      // item hasn't changed transition states\n      // copy over the last transition props;\n      // console.log('unchanged', key)\n      children[key] = cloneElement(child, {\n        onExited: onExited.bind(null, child),\n        in: prevChild.props.in,\n        exit: getProp(child, 'exit', nextProps),\n        enter: getProp(child, 'enter', nextProps)\n      });\n    }\n  });\n  return children;\n}","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TransitionGroupContext from './TransitionGroupContext';\nimport { getChildMapping, getInitialChildMapping, getNextChildMapping } from './utils/ChildMapping';\n\nvar values = Object.values || function (obj) {\n  return Object.keys(obj).map(function (k) {\n    return obj[k];\n  });\n};\n\nvar defaultProps = {\n  component: 'div',\n  childFactory: function childFactory(child) {\n    return child;\n  }\n};\n/**\n * The `<TransitionGroup>` component manages a set of transition components\n * (`<Transition>` and `<CSSTransition>`) in a list. Like with the transition\n * components, `<TransitionGroup>` is a state machine for managing the mounting\n * and unmounting of components over time.\n *\n * Consider the example below. As items are removed or added to the TodoList the\n * `in` prop is toggled automatically by the `<TransitionGroup>`.\n *\n * Note that `<TransitionGroup>`  does not define any animation behavior!\n * Exactly _how_ a list item animates is up to the individual transition\n * component. This means you can mix and match animations across different list\n * items.\n */\n\nvar TransitionGroup = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(TransitionGroup, _React$Component);\n\n  function TransitionGroup(props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, props, context) || this;\n\n    var handleExited = _this.handleExited.bind(_assertThisInitialized(_this)); // Initial children should all be entering, dependent on appear\n\n\n    _this.state = {\n      contextValue: {\n        isMounting: true\n      },\n      handleExited: handleExited,\n      firstRender: true\n    };\n    return _this;\n  }\n\n  var _proto = TransitionGroup.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.mounted = true;\n    this.setState({\n      contextValue: {\n        isMounting: false\n      }\n    });\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.mounted = false;\n  };\n\n  TransitionGroup.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, _ref) {\n    var prevChildMapping = _ref.children,\n        handleExited = _ref.handleExited,\n        firstRender = _ref.firstRender;\n    return {\n      children: firstRender ? getInitialChildMapping(nextProps, handleExited) : getNextChildMapping(nextProps, prevChildMapping, handleExited),\n      firstRender: false\n    };\n  } // node is `undefined` when user provided `nodeRef` prop\n  ;\n\n  _proto.handleExited = function handleExited(child, node) {\n    var currentChildMapping = getChildMapping(this.props.children);\n    if (child.key in currentChildMapping) return;\n\n    if (child.props.onExited) {\n      child.props.onExited(node);\n    }\n\n    if (this.mounted) {\n      this.setState(function (state) {\n        var children = _extends({}, state.children);\n\n        delete children[child.key];\n        return {\n          children: children\n        };\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        Component = _this$props.component,\n        childFactory = _this$props.childFactory,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"component\", \"childFactory\"]);\n\n    var contextValue = this.state.contextValue;\n    var children = values(this.state.children).map(childFactory);\n    delete props.appear;\n    delete props.enter;\n    delete props.exit;\n\n    if (Component === null) {\n      return /*#__PURE__*/React.createElement(TransitionGroupContext.Provider, {\n        value: contextValue\n      }, children);\n    }\n\n    return /*#__PURE__*/React.createElement(TransitionGroupContext.Provider, {\n      value: contextValue\n    }, /*#__PURE__*/React.createElement(Component, props, children));\n  };\n\n  return TransitionGroup;\n}(React.Component);\n\nTransitionGroup.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * `<TransitionGroup>` renders a `<div>` by default. You can change this\n   * behavior by providing a `component` prop.\n   * If you use React v16+ and would like to avoid a wrapping `<div>` element\n   * you can pass in `component={null}`. This is useful if the wrapping div\n   * borks your css styles.\n   */\n  component: PropTypes.any,\n\n  /**\n   * A set of `<Transition>` components, that are toggled `in` and out as they\n   * leave. the `<TransitionGroup>` will inject specific transition props, so\n   * remember to spread them through if you are wrapping the `<Transition>` as\n   * with our `<Fade>` example.\n   *\n   * While this component is meant for multiple `Transition` or `CSSTransition`\n   * children, sometimes you may want to have a single transition child with\n   * content that you want to be transitioned out and in when you change it\n   * (e.g. routes, images etc.) In that case you can change the `key` prop of\n   * the transition child as you change its content, this will cause\n   * `TransitionGroup` to transition the child out and back in.\n   */\n  children: PropTypes.node,\n\n  /**\n   * A convenience prop that enables or disables appear animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  appear: PropTypes.bool,\n\n  /**\n   * A convenience prop that enables or disables enter animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  enter: PropTypes.bool,\n\n  /**\n   * A convenience prop that enables or disables exit animations\n   * for all children. Note that specifying this will override any defaults set\n   * on individual children Transitions.\n   */\n  exit: PropTypes.bool,\n\n  /**\n   * You may need to apply reactive updates to a child as it is exiting.\n   * This is generally done by using `cloneElement` however in the case of an exiting\n   * child the element has already been removed and not accessible to the consumer.\n   *\n   * If you do need to update a child as it leaves you can provide a `childFactory`\n   * to wrap every child, even the ones that are leaving.\n   *\n   * @type Function(child: ReactElement) -> ReactElement\n   */\n  childFactory: PropTypes.func\n} : {};\nTransitionGroup.defaultProps = defaultProps;\nexport default TransitionGroup;","import React from 'react';\nimport classnames from 'classnames';\nimport { Modal, Select } from '@mantine/core';\nimport { useDisclosure } from '@mantine/hooks';\nimport sortBy from 'lodash/sortBy';\n\nimport {\n  Button,\n  Input,\n  Layout,\n  NavbarContainer,\n  Autocomplete,\n} from '../../components';\nimport { connect } from '../../utils';\nimport { controller } from './controller';\nimport DoneIcon from '../../assets/done.svg?react';\nimport DeleteIcon from '../../assets/delete.svg?react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport {\n  ExerciseProps,\n  ExerciseStateProps,\n  ExerciseOwnProps,\n  Controller,\n} from './types';\n\nimport style from './style.module.scss';\nimport { ExerciseType } from '../../model/types';\n\nconst exerciseGroups: ExerciseType['group'][] = sortBy([\n  'compound',\n  'miscellaneous',\n  'chest',\n  'legs',\n  'back',\n  'shoulders',\n  'biceps',\n  'triceps',\n  'abs',\n]);\n\nconst PureExercise: React.FC<ExerciseProps> = (props) => {\n  const [opened, modalHandlers] = useDisclosure(false);\n  const [createdOptionLabel, setCreatedOptionLabel] = React.useState<\n    string | null\n  >(null);\n  const [createdOptionGroup, setCreatedOptionGroup] = React.useState<\n    string | null\n  >(null);\n\n  const {\n    data,\n    dataTestId,\n    exerciseTypes,\n    disabledDelete,\n    disabledSave,\n    onAddSet,\n    onChangeName,\n    onCreateNewType,\n    getSelectedTypeLabel,\n    onDelete,\n    onSave,\n    onDeleteSet,\n    onChangeRepetitions,\n    onChangeWeight,\n    isSaveDisabledDefault,\n  } = props;\n\n  const startCreatingOption = (label: string) => {\n    setCreatedOptionLabel(label);\n    setCreatedOptionGroup(null);\n    modalHandlers.open();\n  };\n\n  const finishCreatingOption = () => {\n    if (createdOptionLabel && createdOptionGroup) {\n      onCreateNewType(createdOptionLabel, createdOptionGroup);\n      onChangeName(createdOptionLabel);\n    }\n    modalHandlers.close();\n    setCreatedOptionGroup(null);\n    setCreatedOptionLabel(null);\n  };\n\n  const renderTopBar = () => {\n    return (\n      <div className={style.topBar}>\n        <Autocomplete\n          initialValue={data.name}\n          options={exerciseTypes}\n          className={style.input}\n          onSelectOption={(value) => {\n            const selectedLabel = getSelectedTypeLabel(value);\n            if (selectedLabel) {\n              onChangeName(selectedLabel);\n            }\n          }}\n          onCreateOption={(label) => {\n            startCreatingOption(label);\n          }}\n          onClearSelection={() => {\n            onChangeName('');\n          }}\n        />\n      </div>\n    );\n  };\n\n  const renderBottomBar = () => {\n    return (\n      <NavbarContainer className={style.navbarContainer}>\n        <Button\n          skin=\"icon\"\n          size=\"large\"\n          onClick={onDelete}\n          data-testid=\"exercise-delete-button\"\n          disabled={disabledDelete}\n        >\n          <DeleteIcon />\n        </Button>\n        <Button\n          skin=\"icon\"\n          size=\"large\"\n          onClick={onSave}\n          data-testid=\"exercise-save-button\"\n          disabled={disabledSave ?? isSaveDisabledDefault(data)}\n        >\n          <DoneIcon />\n        </Button>\n      </NavbarContainer>\n    );\n  };\n\n  const renderSets = () => {\n    return (\n      <TransitionGroup\n        component={'ul'}\n        className={style.sets}\n        data-testid=\"sets-list\"\n      >\n        {data.sets.map((set, index) => {\n          return (\n            <CSSTransition\n              key={set.id}\n              timeout={250}\n              classNames={{\n                enter: style.setEnter,\n                enterActive: style.setActiveEnter,\n                exit: style.setExit,\n                exitActive: style.setActiveExit,\n              }}\n            >\n              <li className={style.set} data-testid=\"set-item\">\n                <Button\n                  skin=\"icon\"\n                  size=\"medium\"\n                  className={style.setDelete}\n                  onClick={() => onDeleteSet(set.id)}\n                  data-testid=\"delete-set-button\"\n                >\n                  <DeleteIcon />\n                </Button>\n                <div className={style.setName}>Set {index + 1}</div>\n                <div className={style.setRepetitions}>\n                  <Input\n                    type=\"number\"\n                    value={set.repetitions}\n                    onBlur={(value) => onChangeRepetitions(set.id, value)}\n                    onChange={() => {}}\n                    className={style.input}\n                    data-testid=\"set-repetitions-input\"\n                  />\n                </div>\n                <div>X</div>\n                <div className={style.setWeight}>\n                  <Input\n                    type=\"number\"\n                    value={set.weight}\n                    onBlur={(value) => onChangeWeight(set.id, value)}\n                    onChange={() => {}}\n                    className={style.input}\n                    data-testid=\"set-weight-input\"\n                  />\n                </div>\n                <div className={style.weightUnit}>kg</div>\n              </li>\n            </CSSTransition>\n          );\n        })}\n      </TransitionGroup>\n    );\n  };\n\n  const areSets = Boolean(data.sets.length);\n\n  return (\n    <Layout\n      dataTestId={dataTestId}\n      topBar={renderTopBar()}\n      bottomBar={renderBottomBar()}\n    >\n      <div\n        className={classnames(style.screen, {\n          [style.screenNoData]: !areSets,\n        })}\n      >\n        {renderSets()}\n        <Button\n          skin=\"primary\"\n          font=\"nunito\"\n          className={style.button}\n          onClick={onAddSet}\n          data-testid=\"add-set-button\"\n        >\n          Add set\n        </Button>\n        <Modal\n          opened={opened}\n          onClose={modalHandlers.close}\n          overlayProps={{\n            backgroundOpacity: 0.55,\n            blur: 3,\n          }}\n        >\n          <Select\n            label=\"Choose group for new exercise type\"\n            placeholder=\"Pick value\"\n            data={exerciseGroups}\n            onChange={setCreatedOptionGroup}\n          />\n          <Button\n            skin=\"icon\"\n            size=\"large\"\n            onClick={finishCreatingOption}\n            data-testid=\"finish-create-exercise-type-button\"\n            disabled={!createdOptionGroup}\n          >\n            <DoneIcon />\n          </Button>\n        </Modal>\n      </div>\n    </Layout>\n  );\n};\n\nexport const Exercise = connect<\n  Controller,\n  ExerciseStateProps,\n  ExerciseOwnProps\n>(\n  {\n    controller,\n  },\n  (ctrl) => ({\n    exerciseTypes: ctrl.getExerciseTypes(),\n    onCreateNewType: ctrl.onCreateNewType,\n    getSelectedTypeLabel: ctrl.getSelectedTypeLabel,\n    isSaveDisabledDefault: ctrl.isSaveDisabledDefault,\n  }),\n)(PureExercise);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Button, Input, Layout, NavbarContainer } from '../index';\nimport DoneIcon from '../../assets/done.svg?react';\nimport DeleteIcon from '../../assets/delete.svg?react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport style from './style.module.scss';\nimport { TrainingProps } from './types';\n\nexport const Training: React.FC<TrainingProps> = ({\n  id,\n  name,\n  exercises,\n  dataTestId,\n  onChangeName,\n  onAddExercise,\n  onDelete,\n  onSave,\n  onDeleteExercise,\n  onOpenExercise,\n}) => {\n  const areExercises = Boolean(exercises.length);\n\n  return (\n    <Layout\n      dataTestId={dataTestId}\n      topBar={\n        <div className={style.topBar}>\n          <Input\n            type=\"text\"\n            value={name}\n            onBlur={onChangeName}\n            data-testid=\"training-name-input\"\n          />\n        </div>\n      }\n      bottomBar={\n        <NavbarContainer className={style.navbarContainer}>\n          <Button\n            skin=\"icon\"\n            size=\"large\"\n            onClick={onDelete}\n            data-testid=\"training-delete-button\"\n          >\n            <DeleteIcon />\n          </Button>\n          <Button\n            skin=\"icon\"\n            size=\"large\"\n            onClick={onSave}\n            data-testid=\"training-save-button\"\n          >\n            <DoneIcon />\n          </Button>\n        </NavbarContainer>\n      }\n    >\n      <div\n        className={classnames(style.screen, {\n          [style.screenNoData]: !areExercises,\n        })}\n      >\n        <TransitionGroup\n          component={'ul'}\n          className={style.exercises}\n          data-testid=\"exercises-list\"\n        >\n          {exercises.map((exercise) => (\n            <CSSTransition\n              key={exercise.id}\n              timeout={250}\n              classNames={{\n                enter: style.setEnter,\n                enterActive: style.setActiveEnter,\n                exit: style.setExit,\n                exitActive: style.setActiveExit,\n              }}\n            >\n              <li className={style.exercise} data-testid=\"exercise-item\">\n                <Button\n                  skin=\"icon\"\n                  size=\"medium\"\n                  className={style.exerciseDelete}\n                  onClick={() => onDeleteExercise(id, exercise.id)}\n                  data-testid=\"delete-exercise-button\"\n                >\n                  <DeleteIcon />\n                </Button>\n                <div\n                  className={style.exerciseBox}\n                  onClick={() => onOpenExercise(exercise.id)}\n                  data-testid=\"open-exercise-button\"\n                >\n                  {exercise.name}\n                  <br />\n                  {exercise.setsPreview}\n                </div>\n              </li>\n            </CSSTransition>\n          ))}\n        </TransitionGroup>\n        <Button\n          skin=\"primary\"\n          font=\"nunito\"\n          className={style.button}\n          onClick={onAddExercise}\n          data-testid=\"add-exercise-button\"\n        >\n          Add exersise\n        </Button>\n      </div>\n    </Layout>\n  );\n};\n","import { Notification } from '../../model/types';\nimport { AppContext } from '../../types';\n\ninterface NotificationsController {\n  getNotifications: () => Notification[];\n  removeNotification: (id: string) => void;\n}\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): NotificationsController => {\n  const store = serviceLocator.getStore();\n  const { notificationsApi } = serviceLocator.getAPIs();\n\n  return {\n    getNotifications: () =>\n      store.getStoreData(controller.storeDataAccessors).notifications,\n    removeNotification: (id: string) => notificationsApi.removeNotification(id),\n  };\n};\n\ncontroller.storeDataAccessors = ['notifications'];\n","import React, { useEffect } from 'react';\nimport classNames from 'classnames';\n\nimport { connect } from '../../utils';\nimport DeleteIcon from '../../assets/delete.svg?react';\nimport { Notification } from '../../model/types';\nimport { Button } from '../Button';\nimport { controller } from './controller';\nimport style from './style.module.scss';\n\nconst AUTO_DISMISS_MS = 5000;\n\ntype Props = {\n  notifications: Notification[];\n  removeNotification: (id: string) => void;\n};\n\nconst ToastItem: React.FC<{\n  n: Notification;\n  onClose: (id: string) => void;\n}> = ({ n, onClose }) => {\n  useEffect(() => {\n    const t = setTimeout(() => onClose(n.id), AUTO_DISMISS_MS);\n    return () => clearTimeout(t);\n  }, [n.id, onClose]);\n\n  return (\n    <div\n      className={classNames(style.toast, {\n        [style.toastError]: n.type === 'error',\n        [style.toastSuccess]: n.type === 'success',\n        [style.toastInfo]: n.type === 'info',\n      })}\n      role=\"status\"\n      aria-live=\"polite\"\n      data-testid=\"notification\"\n    >\n      <div className={style.message} data-testid=\"notification-message\">\n        {n.message}\n      </div>\n      <Button\n        skin=\"icon\"\n        size=\"small\"\n        className={style.closeBtn}\n        onClick={() => onClose(n.id)}\n        aria-label=\"Dismiss\"\n        data-testid=\"dismiss-notification-button\"\n      >\n        <DeleteIcon />\n      </Button>\n    </div>\n  );\n};\n\nconst PureNotifications: React.FC<Props> = ({\n  notifications,\n  removeNotification,\n}) => {\n  if (!notifications.length) {\n    return null;\n  }\n\n  return (\n    <div\n      className={style.notifications}\n      aria-live=\"polite\"\n      data-testid=\"notifications-container\"\n    >\n      {notifications.map((n) => (\n        <ToastItem key={n.id} n={n} onClose={removeNotification} />\n      ))}\n    </div>\n  );\n};\n\nexport const Notifications = connect({ controller }, (ctrl) => ({\n  notifications: ctrl.getNotifications(),\n  removeNotification: ctrl.removeNotification,\n}))(PureNotifications);\n","import { AppContext } from '../../types';\n\ninterface BlockingLayerController {\n  getData: () => { isVisible: boolean; message?: string };\n}\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): BlockingLayerController => {\n  const store = serviceLocator.getStore();\n  const getStoreData = () => store.getStoreData(controller.storeDataAccessors);\n\n  return {\n    getData: () => getStoreData().uiBlockingLayer,\n  };\n};\n\ncontroller.storeDataAccessors = ['uiBlockingLayer'];\n","import React from 'react';\n\nimport { connect } from '../../utils';\nimport { controller } from './controller';\nimport style from './style.module.scss';\n\ntype Props = {\n  data: { isVisible: boolean; message?: string };\n};\n\nconst PureBlockingLayer: React.FC<Props> = ({ data }) => {\n  if (!data.isVisible) return null;\n\n  return (\n    <div\n      className={style.blockingLayer}\n      role=\"status\"\n      aria-live=\"polite\"\n      data-testid=\"ui-blocking-layer\"\n    >\n      <div className={style.overlay} />\n      <div className={style.messageWrapper}>\n        <div className={style.message} data-testid=\"ui-blocking-layer-message\">\n          {data.message}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport const BlockingLayer = connect({ controller }, (ctrl) => ({\n  data: ctrl.getData(),\n}))(PureBlockingLayer);\n","import { AppContext } from '../../types';\nimport { CompletedTraining } from '../../model/types';\nimport type { TrainingAggregate } from '../../model/aggregation';\nimport { aggregateByDay, lastNDays } from '../../model/aggregation';\n\ninterface CardController {\n  getLast7DaysAggregates: () => TrainingAggregate[];\n  getTotalsForLast7Days: () => { totalVolumeKg: number; sessions: number };\n  onOpen: () => void;\n}\n\nexport const controller = (\n  serviceLocator: AppContext['serviceLocator'],\n): CardController => {\n  const store = serviceLocator.getStore();\n  const { navigationApi } = serviceLocator.getAPIs();\n\n  const getStore = () => store.getStoreData(controller.storeDataAccessors);\n\n  return {\n    getLast7DaysAggregates: () => {\n      const completed: CompletedTraining[] =\n        getStore().completedTrainings || [];\n      const agg = aggregateByDay(completed);\n      return lastNDays(agg, 7);\n    },\n    getTotalsForLast7Days: () => {\n      const completed: CompletedTraining[] =\n        getStore().completedTrainings || [];\n      const agg = aggregateByDay(completed);\n      const last7 = lastNDays(agg, 7);\n      const totalVolumeKg = last7.reduce((s, a) => s + a.totalVolumeKg, 0);\n      const sessions = last7.reduce((s, a) => s + a.sessionsCount, 0);\n      return { totalVolumeKg, sessions };\n    },\n    onOpen: async () => {\n      await navigationApi.toDashboard();\n    },\n  };\n};\n\ncontroller.storeDataAccessors = ['completedTrainings'];\n","import React from 'react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  BarChart,\n  Bar,\n  CartesianGrid,\n} from 'recharts';\nimport { TrainingAggregate } from '../../model/aggregation';\n\ntype Variant = 'sparkline' | 'detailed' | 'bar';\n\nexport interface TrainingProgressChartProps {\n  data: TrainingAggregate[];\n  variant?: Variant;\n  height?: number | string;\n}\n\nexport const TrainingProgressChart: React.FC<TrainingProgressChartProps> = ({\n  data,\n  variant = 'detailed',\n  height = 140,\n}) => {\n  const source = data;\n\n  const formatted = source.map((d) => ({\n    date: d.dateISO.slice(5), // MM-DD for compact x axis\n    volume: Math.round(d.totalVolumeKg),\n    sessions: d.sessionsCount,\n  }));\n\n  if (variant === 'sparkline') {\n    return (\n      <div style={{ width: '100%', height: '100%' }}>\n        <ResponsiveContainer\n          width=\"100%\"\n          height=\"100%\"\n          initialDimension={{\n            // bugfix: eliminate wrong console warning\n            width: 10,\n            height: 10,\n          }}\n        >\n          <LineChart data={formatted}>\n            <Line\n              type=\"monotone\"\n              dataKey=\"volume\"\n              stroke=\"#8884d8\"\n              strokeWidth={2}\n              dot={false}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      </div>\n    );\n  }\n\n  if (variant === 'bar') {\n    return (\n      <div style={{ width: '100%', height }}>\n        <ResponsiveContainer\n          width=\"100%\"\n          height=\"100%\"\n          initialDimension={{\n            // bugfix: eliminate wrong console warning\n            width: 10,\n            height: 10,\n          }}\n        >\n          <BarChart data={formatted}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"date\" />\n            <YAxis />\n            <Tooltip />\n            <Bar dataKey=\"volume\" fill=\"#82ca9d\" />\n          </BarChart>\n        </ResponsiveContainer>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ width: '100%', height }}>\n      <ResponsiveContainer\n        width=\"100%\"\n        height=\"100%\"\n        initialDimension={{\n          // bugfix: eliminate wrong console warning\n          width: 10,\n          height: 10,\n        }}\n      >\n        <LineChart data={formatted}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"date\" />\n          <YAxis />\n          <Tooltip />\n          <Line\n            type=\"monotone\"\n            dataKey=\"volume\"\n            stroke=\"#8884d8\"\n            strokeWidth={2}\n          />\n          <Line\n            type=\"monotone\"\n            dataKey=\"sessions\"\n            stroke=\"#82ca9d\"\n            strokeWidth={1}\n          />\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { connect } from '../../utils';\nimport { controller } from './controller';\nimport { TrainingProgressChart } from '../TrainingProgressChart';\nimport { Button } from '../Button';\nimport style from './style.module.scss';\nimport { TrainingAggregate } from '../../model/aggregation';\n\ninterface Props {\n  last7: TrainingAggregate[];\n  totals: { totalVolumeKg: number; sessions: number };\n  onOpen: () => void;\n}\n\nconst PureCard: React.FC<Props> = ({ last7, totals, onOpen }) => {\n  return (\n    <div className={style.card}>\n      <div className={style.header}>\n        <h4>Progress</h4>\n        <div className={style.actions}>\n          <Button skin=\"primary\" size=\"small\" onClick={onOpen}>\n            Open\n          </Button>\n        </div>\n      </div>\n      <div className={style.kpis}>\n        <div className={style.kpiItem}>\n          <div className={style.kpiLabel}>7d volume</div>\n          <div className={style.kpiValue}>\n            {Math.round(totals.totalVolumeKg)} kg\n          </div>\n        </div>\n        <div className={style.kpiItem}>\n          <div className={style.kpiLabel}>sessions</div>\n          <div className={style.kpiValue}>{totals.sessions}</div>\n        </div>\n      </div>\n      <div style={{ height: 64 }}>\n        <TrainingProgressChart data={last7} variant=\"sparkline\" height={64} />\n      </div>\n    </div>\n  );\n};\n\nexport const TrainingProgressCard = connect({ controller }, (ctrl) => ({\n  last7: ctrl.getLast7DaysAggregates(),\n  totals: ctrl.getTotalsForLast7Days(),\n  onOpen: ctrl.onOpen,\n}))(PureCard);\n\nexport default TrainingProgressCard;\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    let dbp;\n    const getDB = () => {\n        if (dbp)\n            return dbp;\n        const request = indexedDB.open(dbName);\n        request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n        dbp = promisifyRequest(request);\n        dbp.then((db) => {\n            // It seems like Safari sometimes likes to just close the connection.\n            // It's supposed to fire this event when that happens. Let's hope it does!\n            db.onclose = () => (dbp = undefined);\n        }, () => { });\n        return dbp;\n    };\n    return (txMode, callback) => getDB().then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic  if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import {\n  Store as StoreInterface,\n  AuthState,\n  Training,\n  Exercise,\n  CompletedTraining,\n  SyncWithServer,\n  ActiveTraining,\n  Notification,\n  UiBlockingLayerState,\n  ExerciseType,\n} from '../types';\n\nimport { get as idbGet, set as idbSet } from 'idb-keyval';\n\ninterface State {\n  trainings: Training[];\n  completedTrainings: CompletedTraining[];\n  exerciseTypes: ExerciseType[];\n  activeTraining: ActiveTraining | null;\n  newTraining: Training | null;\n  newExercise: Exercise | null;\n  auth: AuthState;\n  sync: SyncWithServer;\n  notifications: Notification[];\n  uiBlockingLayer: UiBlockingLayerState;\n}\n\ninterface Subscribers {\n  trainings: Array<() => void>;\n  newTraining: Array<() => void>;\n  newExercise: Array<() => void>;\n  auth: Array<() => void>;\n  completedTrainings: Array<() => void>;\n  exerciseTypes: Array<() => void>;\n  activeTraining: Array<() => void>;\n  sync: Array<() => void>;\n  notifications: Array<() => void>;\n  uiBlockingLayer: Array<() => void>;\n}\n\nexport class Store implements StoreInterface {\n  private state: State;\n  private subscribers: Subscribers;\n\n  // Persist options\n  private readonly IDB_PREFIX = 'app-store';\n  // temporary disabled during hydration\n  private _persistenceEnabled = true;\n\n  constructor() {\n    this.state = {\n      trainings: [],\n      completedTrainings: [],\n      exerciseTypes: [],\n      activeTraining: null,\n      newTraining: null,\n      newExercise: null,\n      auth: {\n        user: null,\n        isAuthenticated: false,\n        authLoading: false,\n        authError: null,\n      },\n      sync: {\n        lastSyncAt: undefined,\n        isLoading: false,\n        serverHasChanges: false,\n        error: undefined,\n      },\n      notifications: [],\n      uiBlockingLayer: {\n        isVisible: false,\n        message: undefined,\n      },\n    };\n    this.subscribers = {\n      trainings: [],\n      completedTrainings: [],\n      exerciseTypes: [],\n      activeTraining: [],\n      newTraining: [],\n      newExercise: [],\n      auth: [],\n      sync: [],\n      notifications: [],\n      uiBlockingLayer: [],\n    };\n\n    const publicDataAccessors = Object.keys(this.subscribers);\n    validateDataAccessors(publicDataAccessors);\n    validateAllDataAccessorsDeclared(publicDataAccessors);\n  }\n\n  async hasServerDataInIndexedDB(): Promise<boolean> {\n    try {\n      const checks = await Promise.all([\n        this._readIDBAccessorValue('completedTrainings'),\n      ]);\n\n      return checks.every((v) => typeof v !== 'undefined');\n    } catch (err) {\n      // On error assume not empty to avoid accidental overwrites\n      console.error('[Store] Failed to check IndexedDB emptiness:', err);\n      return false;\n    }\n  }\n\n  // ---------------------\n  // IndexedDB helpers\n  // ---------------------\n  private _getIDBAccessorKey(accessor: string): string {\n    return `${this.IDB_PREFIX}:${accessor}`;\n  }\n\n  private async _persistIDBAccessorValue(accessor: string): Promise<void> {\n    if (!this._persistenceEnabled) return;\n\n    try {\n      const value = this._valueForIDBAccessor(accessor);\n      // Fire & forget: don't await in callers, but handle errors here\n      await idbSet(this._getIDBAccessorKey(accessor), value);\n    } catch (err) {\n      // swallow but surface developer-friendly error for debugging\n      // (no throw so writes remain fire & forget)\n\n      console.error(\n        `[Store] Failed to persist \"${accessor}\" to IndexedDB:`,\n        err,\n      );\n    }\n  }\n\n  private async _readIDBAccessorValue(accessor: string) {\n    try {\n      const v = await idbGet<State[keyof State]>(\n        this._getIDBAccessorKey(accessor),\n      );\n      return v;\n    } catch (err) {\n      console.error(`[Store] Failed to read ${accessor} from IndexedDB:`, err);\n      return undefined;\n    }\n  }\n\n  private _valueForIDBAccessor(accessor: string): any {\n    switch (accessor) {\n      case 'trainings':\n        return this.state.trainings;\n      case 'completedTrainings':\n        return this.state.completedTrainings;\n      case 'exerciseTypes':\n        return this.state.exerciseTypes;\n      case 'activeTraining':\n        return this.state.activeTraining;\n      case 'newTraining':\n        return this.state.newTraining;\n      case 'newExercise':\n        return this.state.newExercise;\n      case 'auth':\n        return this.state.auth;\n      case 'sync':\n        return this.state.sync;\n      case 'notifications':\n        return this.state.notifications;\n      case 'uiBlockingLayer':\n        return this.state.uiBlockingLayer;\n      default:\n        return undefined;\n    }\n  }\n\n  // Public: call to hydrate local store from indexedDB (e.g. on window.onload)\n  async hydrateFromIndexedDB(): Promise<void> {\n    // Temporarily disable persistence to avoid re-writing values we just read.\n    this._persistenceEnabled = false;\n\n    try {\n      const promises = allPublicDataAccessors.map(async (accessor) => {\n        const persisted = await this._readIDBAccessorValue(accessor);\n\n        if (persisted === undefined) return;\n\n        // Apply persisted value to store WITHOUT triggering\n        // persistence (disabled above).\n        // use setters to keep notification flow intact\n        switch (accessor) {\n          case 'trainings':\n            this.trainings = persisted as Training[];\n            break;\n          case 'completedTrainings':\n            this.completedTrainings = persisted as CompletedTraining[];\n            break;\n          case 'exerciseTypes':\n            this.exerciseTypes = persisted as ExerciseType[];\n            break;\n          case 'activeTraining':\n            this.activeTraining = persisted as ActiveTraining | null;\n            break;\n          case 'newTraining':\n            this.newTraining = persisted as Training | null;\n            break;\n          case 'newExercise':\n            this.newExercise = persisted as Exercise | null;\n            break;\n          case 'auth':\n            this.auth = persisted as Partial<AuthState>;\n            break;\n          case 'sync':\n            this.sync = persisted as Partial<SyncWithServer>;\n            break;\n          case 'notifications':\n            this.notifications = persisted as Notification[];\n            break;\n          case 'uiBlockingLayer':\n            this.state.uiBlockingLayer = persisted as State['uiBlockingLayer'];\n            break;\n          default:\n            break;\n        }\n      });\n\n      await Promise.all(promises);\n    } finally {\n      // Re-enable persistence afterwards\n      this._persistenceEnabled = true;\n    }\n  }\n\n  private _updateStoreData = (\n    fn: (state: State) => Partial<State>,\n    dataAccessorsToNotify: string[],\n  ) => {\n    validateDataAccessors(dataAccessorsToNotify);\n\n    const newData = fn(this.state);\n\n    this.state = {\n      ...this.state,\n      ...newData,\n    };\n\n    this._notify(dataAccessorsToNotify);\n\n    // Persist each accessor (fire & forget).\n    // Does not block original synchronous flow.\n    dataAccessorsToNotify.forEach((accessor) => {\n      // intentionally not awaited\n      void this._persistIDBAccessorValue(accessor);\n    });\n  };\n\n  private _notify = (dataAccessorsToNotify: string[]) => {\n    validateDataAccessors(dataAccessorsToNotify);\n\n    dataAccessorsToNotify.forEach((accessor) => {\n      if (this.isValidAccessor(accessor)) {\n        this.subscribers[accessor].forEach((subscriber) => {\n          subscriber();\n        });\n      }\n    });\n  };\n\n  private _subscribe = (\n    subscriber: () => void,\n    publicDataAccessors: string[],\n  ) => {\n    publicDataAccessors.forEach((accessor) => {\n      if (this.isValidAccessor(accessor)) {\n        this.subscribers[accessor].push(subscriber);\n      }\n    });\n  };\n\n  private _delete = (subscriber: () => void) => {\n    Object.keys(this.subscribers).forEach((accessor) => {\n      if (this.isValidAccessor(accessor)) {\n        this.subscribers[accessor] = this.subscribers[accessor].filter(\n          (s) => s !== subscriber,\n        );\n      }\n    });\n  };\n\n  private isValidAccessor(accessor: string): accessor is keyof Subscribers {\n    return accessor in this.subscribers;\n  }\n\n  subscribe = (subscriber: () => void, publicDataAccessors: string[]) => {\n    if (typeof subscriber !== 'function') {\n      throw new Error(\n        `Subscriber can't be of type ${typeof subscriber}. Provide function.`,\n      );\n    }\n\n    validateDataAccessors(publicDataAccessors);\n\n    this._subscribe(subscriber, publicDataAccessors);\n    return () => {\n      this._delete(subscriber);\n    };\n  };\n\n  private getPublicDataAccessorsToDataMap = (state: State) =>\n    ({\n      trainings: state.trainings,\n      completedTrainings: state.completedTrainings,\n      exerciseTypes: state.exerciseTypes,\n      activeTraining: state.activeTraining,\n      newTraining: state.newTraining,\n      newExercise: state.newExercise,\n      auth: state.auth,\n      sync: state.sync,\n      notifications: state.notifications,\n      uiBlockingLayer: state.uiBlockingLayer,\n    }) as const;\n\n  getStoreData = (publicDataAccessors: string[]): { [key: string]: any } => {\n    validateDataAccessors(publicDataAccessors);\n\n    const publicDataAccessorsToData = this.getPublicDataAccessorsToDataMap(\n      this.state,\n    );\n\n    type DataKey = keyof typeof publicDataAccessorsToData;\n\n    const dataAccessors = Object.keys(publicDataAccessorsToData);\n    validateDataAccessors(dataAccessors);\n    validateAllDataAccessorsDeclared(dataAccessors);\n\n    const data = publicDataAccessors.reduce<{ [key: string]: any }>(\n      (acc, prop) => {\n        acc[prop] = publicDataAccessorsToData[prop as DataKey];\n        return acc;\n      },\n      {},\n    );\n\n    return data;\n  };\n\n  get trainings(): Training[] {\n    return this.state.trainings;\n  }\n\n  get completedTrainings(): CompletedTraining[] {\n    return this.state.completedTrainings;\n  }\n\n  get exerciseTypes(): ExerciseType[] {\n    return this.state.exerciseTypes;\n  }\n\n  get notifications(): Notification[] {\n    return this.state.notifications;\n  }\n\n  get activeTraining(): ActiveTraining | null {\n    return this.state.activeTraining;\n  }\n\n  get newTraining(): Training | null {\n    return this.state.newTraining;\n  }\n\n  get newExercise(): Exercise | null {\n    return this.state.newExercise;\n  }\n\n  get auth(): AuthState {\n    return this.state.auth;\n  }\n\n  get sync(): SyncWithServer {\n    return this.state.sync;\n  }\n\n  get uiBlockingLayer(): State['uiBlockingLayer'] {\n    return this.state.uiBlockingLayer;\n  }\n\n  set auth(data: Partial<AuthState>) {\n    const fn = (state: State): Partial<State> => ({\n      auth: { ...state.auth, ...data } as AuthState,\n    });\n    this._updateStoreData(fn, ['auth']);\n  }\n\n  set sync(data: Partial<SyncWithServer>) {\n    const fn = (state: State): Partial<State> => ({\n      sync: { ...state.sync, ...data } as SyncWithServer,\n    });\n    this._updateStoreData(fn, ['sync']);\n  }\n\n  set trainings(data: Training[]) {\n    const fn = () => ({\n      trainings: data,\n    });\n\n    this._updateStoreData(fn, ['trainings']);\n  }\n\n  set completedTrainings(data: CompletedTraining[]) {\n    const fn = () => ({\n      completedTrainings: data,\n    });\n\n    this._updateStoreData(fn, ['completedTrainings']);\n  }\n\n  set exerciseTypes(data: ExerciseType[]) {\n    const fn = () => ({\n      exerciseTypes: data,\n    });\n\n    this._updateStoreData(fn, ['exerciseTypes']);\n  }\n\n  set activeTraining(data) {\n    const fn = () => ({\n      activeTraining: data,\n    });\n\n    this._updateStoreData(fn, ['activeTraining']);\n  }\n\n  set newTraining(data: Training | null) {\n    const fn = () => ({\n      newTraining: data,\n    });\n\n    this._updateStoreData(fn, ['newTraining']);\n  }\n\n  set newExercise(data: Exercise | null) {\n    const fn = () => ({\n      newExercise: data,\n    });\n\n    this._updateStoreData(fn, ['newExercise']);\n  }\n\n  set notifications(data: Notification[]) {\n    const fn = () => ({ notifications: data });\n    this._updateStoreData(fn, ['notifications']);\n  }\n\n  set uiBlockingLayer(data: State['uiBlockingLayer']) {\n    const fn = (state: State) => ({\n      uiBlockingLayer: {\n        ...state.uiBlockingLayer,\n        ...data,\n      },\n    });\n    this._updateStoreData(fn, ['uiBlockingLayer']);\n  }\n}\n\nconst allPublicDataAccessors = [\n  'trainings',\n  'completedTrainings',\n  'exerciseTypes',\n  'activeTraining',\n  'newTraining',\n  'newExercise',\n  'auth',\n  'sync',\n  'notifications',\n  'uiBlockingLayer',\n];\n\nfunction validateDataAccessors(publicDataAccessors: string[]): void {\n  if (!doesDataAccessorsExist(publicDataAccessors)) {\n    throw new Error('Public Data Accessors were not specified!');\n  }\n\n  if (!areValidDataAccessors(publicDataAccessors)) {\n    throw new Error(\n      `Public Data Accessors are not valid!\n      Provided accessors might not exist or there is a typo.`,\n    );\n  }\n}\n\nfunction validateAllDataAccessorsDeclared(publicDataAccessors: string[]): void {\n  if (!areAllDataAccessorsDeclared(publicDataAccessors)) {\n    throw new Error(\n      `Declare >>>ALL<<< Public Data Accessors!\n      Seems some Data Accessor were missed.\n      You added: ${publicDataAccessors.join(', ')}.\n      Must be added: ${allPublicDataAccessors.join(', ')}.`,\n    );\n  }\n}\n\nfunction areAllDataAccessorsDeclared(publicDataAccessors: string[]): boolean {\n  return allPublicDataAccessors.every((key) =>\n    publicDataAccessors.includes(key),\n  );\n}\n\nfunction areValidDataAccessors(publicDataAccessors: string[]): boolean {\n  return publicDataAccessors.every((key) =>\n    allPublicDataAccessors.includes(key),\n  );\n}\n\nfunction doesDataAccessorsExist(publicDataAccessors: string[]): boolean {\n  if (!Array.isArray(publicDataAccessors) || !publicDataAccessors.length) {\n    return false;\n  }\n  return true;\n}\n","import { createHashHistory } from '@tanstack/react-router';\n\n/**\n * Extracted into a separate file in order to\n * be able to mock in the tests.\n */\nexport const getRouterParams = () => {\n  const history = createHashHistory();\n\n  return {\n    history,\n  };\n};\n","import {\n  createRouter,\n  createRoute,\n  createRootRoute,\n  Register,\n  RouteComponent,\n  AnyRoute,\n} from '@tanstack/react-router';\nimport { getRouterParams } from './getRouterParams';\n\nconst rootRoute = createRootRoute();\n\nconst authProtection = createRoute({\n  getParentRoute: () => rootRoute,\n  id: 'pathless_auth',\n});\nconst menu = createRoute({\n  getParentRoute: () => authProtection,\n  path: 'menu',\n});\n\nconst home = createRoute({\n  getParentRoute: () => rootRoute,\n  path: '/',\n});\nconst dashboard = createRoute({\n  getParentRoute: () => rootRoute,\n  path: 'dashboard',\n});\n\nconst trainings = createRoute({\n  getParentRoute: () => rootRoute,\n  path: 'trainings',\n});\nconst trainingsIndex = createRoute({\n  getParentRoute: () => trainings,\n  path: '/',\n});\n\nconst training = createRoute({\n  getParentRoute: () => trainings,\n  path: '$training',\n});\nconst trainingIndex = createRoute({\n  getParentRoute: () => training,\n  path: '/',\n});\nconst createNewTraining = createRoute({\n  getParentRoute: () => training,\n  path: 'new',\n});\nconst editExistingTraining = createRoute({\n  getParentRoute: () => training,\n  path: 'edit',\n});\n\nconst exercise = createRoute({\n  getParentRoute: () => training,\n  path: '$exercise',\n});\nconst exerciseIndex = createRoute({\n  getParentRoute: () => exercise,\n  path: '/',\n});\nconst createNewExercise = createRoute({\n  getParentRoute: () => exercise,\n  path: 'new-exercise',\n});\nconst editNewExercise = createRoute({\n  getParentRoute: () => exercise,\n  path: 'editNew',\n});\nconst editExistingExercise = createRoute({\n  getParentRoute: () => exercise,\n  path: 'edit',\n});\n\nconst routeTree = rootRoute.addChildren([\n  authProtection.addChildren([menu]),\n  home,\n  dashboard,\n  trainings.addChildren([\n    trainingsIndex,\n    training.addChildren([\n      trainingIndex,\n      createNewTraining,\n      editExistingTraining,\n      exercise.addChildren([\n        exerciseIndex,\n        createNewExercise,\n        editNewExercise,\n        editExistingExercise,\n      ]),\n    ]),\n  ]),\n]);\n\nconst router = createRouter({\n  routeTree,\n  ...getRouterParams(),\n});\n\n// Typesafety - https://tanstack.com/router/latest/docs/framework/react/guide/type-safety#exported-hooks-components-and-utilities\ndeclare module '@tanstack/react-router' {\n  interface Register {\n    router: typeof router;\n  }\n}\n\nexport type Router = Register['router'];\n\nexport type RoutePaths = Exclude<\n  keyof Router['routesByPath'] | keyof Router['routesById'],\n  '/pathless_auth/menu'\n>;\n\ntype RoutePathsToComponents = Record<\n  RoutePaths | 'DEFAULT_NOT_FOUND',\n  RouteComponent | undefined\n>;\ntype RoutePathsToRouteDefinitions<T extends AnyRoute> = Record<RoutePaths, T>;\n\nexport interface RouterConfiguration {\n  routePathsToComponents: RoutePathsToComponents;\n}\n\ntype AllRoutes =\n  | typeof rootRoute\n  | typeof home\n  | typeof dashboard\n  | typeof authProtection\n  | typeof menu\n  | typeof trainings\n  | typeof trainingsIndex\n  | typeof training\n  | typeof trainingIndex\n  | typeof editExistingTraining\n  | typeof createNewTraining\n  | typeof exercise\n  | typeof exerciseIndex\n  | typeof editExistingExercise\n  | typeof editNewExercise\n  | typeof createNewExercise;\n\nconst routePathsToRoutes: RoutePathsToRouteDefinitions<AllRoutes> = {\n  __root__: rootRoute,\n  '/': home,\n  '/dashboard': dashboard,\n  '/pathless_auth': authProtection,\n  '/menu': menu,\n  '/trainings': trainings,\n  '/trainings/': trainingsIndex,\n  '/trainings/$training': training,\n  '/trainings/$training/': trainingIndex,\n  '/trainings/$training/edit': editExistingTraining,\n  '/trainings/$training/new': createNewTraining,\n  '/trainings/$training/$exercise': exercise,\n  '/trainings/$training/$exercise/': exerciseIndex,\n  '/trainings/$training/$exercise/edit': editExistingExercise,\n  '/trainings/$training/$exercise/editNew': editNewExercise,\n  '/trainings/$training/$exercise/new-exercise': createNewExercise,\n};\nconst routePathsToRoutesKeys = Object.keys(\n  routePathsToRoutes,\n) as unknown as (keyof typeof routePathsToRoutes)[];\n\nexport const initRouter = () => {\n  const withComp = (\n    routePath: RoutePaths,\n    routePathsToComponents: RoutePathsToComponents,\n  ) => {\n    const originalRoute = routePathsToRoutes[routePath];\n\n    if (!originalRoute) {\n      throw new Error(\n        `[ROUTER] originalRoute is absent for route path: ${routePath}`,\n      );\n    }\n\n    const component = routePathsToComponents[routePath];\n\n    if (!component) {\n      return originalRoute;\n    }\n\n    const routeWithComponent = originalRoute.update({\n      component,\n    });\n\n    return routeWithComponent;\n  };\n\n  const setConfiguration = ({\n    routePathsToComponents,\n  }: {\n    routePathsToComponents: RoutePathsToComponents;\n  }) => {\n    routePathsToRoutesKeys.forEach((routePath) => {\n      withComp(routePath, routePathsToComponents);\n    });\n  };\n\n  return {\n    router,\n    setConfiguration,\n  };\n};\n","import { ApiFactory, NavigationApi } from '../../types';\nimport { initRouter } from './router';\n\ninterface StateInRoute extends Partial<Record<string, string>> {\n  // TODO how to add types?\n  // goBackTo?: string;\n}\n\nexport const createNavigationApi: ApiFactory<NavigationApi, {}> = () => {\n  const routes: NavigationApi['routes'] = {\n    home: '/',\n    menu: '/menu',\n    dashboard: '/dashboard',\n    trainings: '/trainings',\n    openTraining: '/trainings/$training',\n    createTraining: '/trainings/$training/new',\n    editTraining: '/trainings/$training/edit',\n    openExercise: '/trainings/$training/$exercise',\n    createExercise: '/trainings/$training/$exercise/new-exercise',\n    editNewExercise: '/trainings/$training/$exercise/editNew',\n    editExistingExercise: '/trainings/$training/$exercise/edit',\n  };\n\n  const { router, setConfiguration } = initRouter();\n\n  const getPathParams = (route: string) => {\n    const params = router.matchRoute({ to: route });\n    return { ...params };\n  };\n\n  const removeTrailingSlash = (path?: string): string | undefined => {\n    if (path && path !== '/') {\n      return path.replace(/\\/$/, '');\n    }\n    return path;\n  };\n\n  const getCurrentPath = () => router.state.location.pathname;\n\n  const getCurrentRoutePath = () => {\n    const currentPath = getCurrentPath();\n    const matches = router.matchRoutes(currentPath);\n    // The last match in the array is usually the most specific leaf route\n    const currentRoutePath = matches[matches.length - 1]?.routeId;\n    return removeTrailingSlash(currentRoutePath);\n  };\n\n  const isRouteOpenedRightNow = (route: string): boolean =>\n    Boolean(router.matchRoute({ to: route }));\n\n  const setRoute = async (\n    route: string,\n    params: Record<string, string> = {},\n    state: StateInRoute = {},\n  ) => {\n    await router.navigate({\n      to: route,\n      params,\n      state,\n    });\n  };\n\n  const getRouteBackPath = () => {\n    return (router.state.location.state as unknown as StateInRoute)?.goBackTo;\n  };\n\n  return {\n    __router: router,\n    routes,\n    setRouterConfiguration: (config) => {\n      setConfiguration(config);\n    },\n    goBack: async ({ replace } = {}) => {\n      const to = getRouteBackPath();\n\n      if (to) {\n        const params = getPathParams(to);\n        return router.navigate({\n          to,\n          params,\n          replace,\n        });\n      } else {\n        // TODO check how to handle \"replace\" in this flow\n        // if (replace) {\n        //   router.history.replace(...);\n        // }\n        if (router.history.canGoBack()) {\n          router.history.back();\n        }\n      }\n    },\n    toHome: () => {\n      return setRoute(routes.home);\n    },\n    toTrainings: () => {\n      return setRoute(routes.trainings);\n    },\n    toMenu: () => {\n      return setRoute(routes.menu);\n    },\n    toCreateTraining: (newTrainingId: string) => {\n      return setRoute(routes.createTraining, {\n        training: newTrainingId,\n      });\n    },\n    toCreateExercise: (trainingId: string, exerciseId: string, options) => {\n      return setRoute(\n        routes.createExercise,\n        {\n          training: trainingId,\n          exercise: exerciseId,\n        },\n        { goBackTo: options?.goBackTo },\n      );\n    },\n    toEditNewExercise: (trainingId: string, exerciseId: string, options) => {\n      return setRoute(\n        routes.editNewExercise,\n        {\n          training: trainingId,\n          exercise: exerciseId,\n        },\n        { goBackTo: options?.goBackTo },\n      );\n    },\n    toEditExistingExercise: (trainingId: string, exerciseId: string) => {\n      return setRoute(routes.editExistingExercise, {\n        training: trainingId,\n        exercise: exerciseId,\n      });\n    },\n    toEditTraining: (trainingId: string) => {\n      return setRoute(routes.editTraining, {\n        training: trainingId,\n      });\n    },\n    toTraining: (trainingId: string) => {\n      return setRoute(routes.openTraining, {\n        training: trainingId,\n      });\n    },\n    toExercise: (trainingId: string, exerciseId: string) => {\n      return setRoute(routes.openExercise, {\n        training: trainingId,\n        exercise: exerciseId,\n      });\n    },\n    toDashboard: () => {\n      return setRoute(routes.dashboard);\n    },\n    isHomeUrl: () => {\n      return isRouteOpenedRightNow(routes.home);\n    },\n    isTrainingsUrl: () => {\n      return isRouteOpenedRightNow(routes.trainings);\n    },\n    isMenuUrl: () => {\n      return isRouteOpenedRightNow(routes.menu);\n    },\n    getPathParams,\n    getCurrentPath,\n    getCurrentRoutePath,\n  };\n};\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","export const allTrainingsSchema = {\n  id: '/AllTrainingsSchema',\n  type: 'array',\n  items: {\n    $ref: '/TrainingSchema',\n  },\n};\n\nexport const trainingSchema = {\n  id: '/TrainingSchema',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n    },\n    name: {\n      type: 'string',\n    },\n    exercises: {\n      type: 'array',\n      items: {\n        $ref: '/ExerciseSchema',\n      },\n    },\n  },\n  required: ['id', 'name', 'exercises'],\n};\n\nexport const exerciseSchema = {\n  id: '/ExerciseSchema',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n    },\n    name: {\n      type: 'string',\n    },\n    sets: {\n      type: 'array',\n      items: {\n        $ref: '/SetSchema',\n      },\n    },\n  },\n  required: ['id', 'name', 'sets'],\n};\n\nexport const setSchema = {\n  id: '/SetSchema',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n    },\n    repetitions: {\n      type: 'number',\n    },\n    weight: {\n      type: 'number',\n    },\n    time: {\n      type: 'string',\n    },\n  },\n  required: ['id', 'repetitions', 'weight'],\n};\n\nexport const completedTrainingsSchema = {\n  id: '/CompletedTrainingsSchema',\n  type: 'array',\n  items: {\n    $ref: '/CompletedTrainingSchema',\n  },\n};\n\nexport const completedTrainingSchema = {\n  id: '/CompletedTrainingSchema',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n    },\n    name: {\n      type: 'string',\n    },\n    exercises: {\n      type: 'array',\n      items: {\n        $ref: '/CompletedExerciseSchema',\n      },\n    },\n    createdInDbAt: {\n      type: 'string',\n    },\n    updatedInDbAt: {\n      type: 'string',\n    },\n  },\n  required: ['id', 'name', 'exercises'],\n};\n\nexport const completedExerciseSchema = {\n  id: '/CompletedExerciseSchema',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n    },\n    name: {\n      type: 'string',\n    },\n    sets: {\n      type: 'array',\n      items: {\n        $ref: '/SetSchema',\n      },\n    },\n  },\n  required: ['id', 'name', 'sets'],\n};\n\nexport const exerciseTypesSchema = {\n  id: '/ExerciseTypesSchema',\n  type: 'array',\n  items: {\n    $ref: '/ExerciseTypeSchema',\n  },\n};\n\nexport const exerciseTypeSchema = {\n  id: '/ExerciseTypeSchema',\n  type: 'object',\n  properties: {\n    group: {\n      type: 'string',\n    },\n    value: {\n      type: 'string',\n    },\n    label: {\n      type: 'string',\n    },\n  },\n  required: ['group', 'value', 'label'],\n};\n","import { v4 as uuidv4 } from 'uuid';\nimport {\n  Exercise,\n  Set,\n  Training,\n  ApiTools,\n  TrainingsApi,\n  ApiFactory,\n  AppAPIs,\n  CompletedTraining,\n  TimestampTZ,\n  ActiveTraining,\n  ExerciseType,\n  CompletedTrainingExcercise,\n} from '../../types';\nimport {\n  allTrainingsSchema,\n  trainingSchema,\n  exerciseSchema,\n  setSchema,\n  completedTrainingSchema,\n  completedTrainingsSchema,\n  completedExerciseSchema,\n  exerciseTypeSchema,\n  exerciseTypesSchema,\n} from './schemas';\nimport { getTimestampWithTimeZone } from '../../../utils';\n\nexport const createTrainingsApi: ApiFactory<\n  TrainingsApi,\n  Pick<AppAPIs, 'httpClientAPI' | 'trainingsServerApi' | 'notificationsApi'>\n> = ({ store, validator }: ApiTools, dependencies) => {\n  validator.addSchema(allTrainingsSchema);\n  validator.addSchema(trainingSchema);\n  validator.addSchema(exerciseSchema);\n  validator.addSchema(setSchema);\n  validator.addSchema(completedTrainingsSchema);\n  validator.addSchema(completedTrainingSchema);\n  validator.addSchema(completedExerciseSchema);\n  validator.addSchema(exerciseTypeSchema);\n  validator.addSchema(exerciseTypesSchema);\n\n  const { trainingsServerApi, notificationsApi } = dependencies;\n\n  const validate = (data: any, schema: any) => {\n    const validationResult = validator.validate(data, schema);\n\n    if (!validationResult.valid) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error(\n          '[ERROR_DATA] Validation for Training failed!',\n          validationResult.errors,\n        );\n        throw new Error('Validation for Training failed!');\n      } else {\n        // TODO log in production\n        return;\n      }\n    }\n  };\n\n  const getData = () =>\n    store.getStoreData([\n      'trainings',\n      'completedTrainings',\n      'activeTraining',\n      'newTraining',\n      'newExercise',\n      'exerciseTypes',\n    ]);\n\n  const deleteNewTraining = () => {\n    store.newTraining = null;\n  };\n\n  const deleteNewExercise = () => {\n    store.newExercise = null;\n  };\n\n  const deleteExercise = (trainingId: string, exerciseId: string) => {\n    const newTraining = getData().newTraining;\n\n    if (newTraining?.id === trainingId) {\n      store.newTraining = {\n        ...newTraining,\n        exercises: newTraining.exercises.filter(\n          (exercise: Exercise) => exercise.id !== exerciseId,\n        ),\n      };\n      return;\n    }\n\n    const trainings = getData().trainings.map((training: Training) => {\n      if (training.id === trainingId) {\n        return {\n          ...training,\n          exercises: training.exercises.filter(\n            (exercise: Exercise) => exercise.id !== exerciseId,\n          ),\n        };\n      }\n\n      return training;\n    });\n\n    _update.allTrainings(trainings);\n  };\n\n  const addTraining = (training: Training) => {\n    const trainings = [...getData().trainings, training];\n\n    _update.allTrainings(trainings);\n  };\n\n  const addExercise = (trainingId: string, data: Exercise) => {\n    const newTraining = getData().newTraining;\n\n    if (newTraining?.id === trainingId) {\n      _update.newTraining({\n        exercises: newTraining.exercises.concat(data),\n      });\n      return;\n    }\n\n    const trainings = getData().trainings.map((tr: Training) => {\n      if (tr.id === trainingId) {\n        return {\n          ...tr,\n          exercises: tr.exercises.concat(data),\n        };\n      }\n\n      return tr;\n    });\n\n    _update.allTrainings(trainings);\n\n    // Keep `activeTraining` in sync when a new exercise is added to the\n    // template training that corresponds to the currently active one.\n    // Use `templateTrainingId` for a reliable match.\n    const activeTraining = getData().activeTraining;\n\n    if (activeTraining && activeTraining.templateTrainingId === trainingId) {\n      const updatedActive = {\n        ...activeTraining,\n        exercises: activeTraining.exercises.concat({\n          id: uuidv4(),\n          name: data.name,\n          sets: [],\n        } as CompletedTrainingExcercise),\n      } as CompletedTraining;\n\n      try {\n        validate(updatedActive, completedTrainingSchema);\n        store.activeTraining = updatedActive;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      } catch (err) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            '[activeTraining] Failed to append new exercise to activeTraining',\n          );\n        }\n      }\n    }\n  };\n\n  const addSet = (trainingId: string, exerciseId: string, data: Set) => {\n    const newExercise = getData().newExercise;\n    const newTraining = getData().newTraining;\n\n    const _addSet = (exercises: Exercise[]) =>\n      exercises.map((ex: Exercise) => {\n        if (ex.id === exerciseId) {\n          return {\n            ...ex,\n            sets: ex.sets.concat(data),\n          };\n        }\n\n        return ex;\n      });\n\n    if (newExercise?.id === exerciseId) {\n      _update.newExercise({\n        sets: newExercise.sets.concat(data),\n      });\n    } else if (newTraining?.id === trainingId) {\n      _update.newTraining({\n        exercises: _addSet(newTraining.exercises),\n      });\n    } else {\n      const trainings = getData().trainings.map((tr: Training) => {\n        if (tr.id === trainingId) {\n          return {\n            ...tr,\n            exercises: _addSet(tr.exercises),\n          };\n        }\n        return tr;\n      });\n\n      _update.allTrainings(trainings);\n    }\n  };\n\n  const deleteSet = (trainingId: string, exerciseId: string, setId: string) => {\n    const newTraining = getData().newTraining;\n    const newExercise = getData().newExercise;\n\n    const _deleteSet = (exercises: Exercise[]) =>\n      exercises.map((exercise: Exercise) => {\n        if (exercise.id === exerciseId) {\n          return {\n            ...exercise,\n            sets: exercise.sets.filter((set: Set) => set.id !== setId),\n          };\n        }\n\n        return exercise;\n      });\n\n    if (newExercise?.id === exerciseId) {\n      _update.newExercise({\n        sets: newExercise.sets.filter((it: Set) => it.id !== setId),\n      });\n    } else if (newTraining?.id === trainingId) {\n      _update.newTraining({\n        exercises: _deleteSet(newTraining.exercises),\n      });\n    } else {\n      const trainings = getData().trainings.map((training: Training) => {\n        if (training.id === trainingId) {\n          return {\n            ...training,\n            exercises: _deleteSet(training.exercises),\n          };\n        }\n\n        return training;\n      });\n\n      _update.allTrainings(trainings);\n    }\n  };\n\n  const deleteTraining = (id: string) => {\n    const data = getData().trainings.filter((it: Training) => it.id !== id);\n\n    _update.allTrainings(data);\n  };\n\n  const createSetsPreview = (sets: Set[]): string => {\n    let setsPreview = '';\n\n    sets.forEach((set: Set, index: number) => {\n      setsPreview += `${set.repetitions}x${set.weight}kg`;\n      if (index < sets.length - 1) setsPreview += ' - ';\n    });\n\n    return setsPreview;\n  };\n\n  const createPreviewDate = (timestamptz: TimestampTZ): string => {\n    const date = new Date(timestamptz);\n    const intlDateTimeOptions = Intl.DateTimeFormat().resolvedOptions();\n    const locale = 'en-GB';\n    const timeZone = intlDateTimeOptions.timeZone;\n\n    const currentDate =\n      date.toDateString().slice(0, 3) +\n      ', ' +\n      date.toLocaleDateString(locale, {\n        timeZone,\n      });\n\n    return currentDate;\n  };\n\n  const createPreviewTime = (timestamptz: TimestampTZ): string => {\n    const date = new Date(timestamptz);\n\n    const currentHours =\n      date.getHours() < 10 ? '0' + date.getHours() : date.getHours();\n    const currentMinutes =\n      date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();\n\n    const currentTime = `${currentHours}:${currentMinutes}`;\n\n    return currentTime;\n  };\n\n  const _get: TrainingsApi['get'] = {\n    exerciseTypes: () => getData().exerciseTypes,\n  };\n\n  const _create: TrainingsApi['create'] = {\n    newTraining: () => {\n      const data: Training = {\n        id: uuidv4(),\n        name: 'New Training',\n        exercises: [],\n      };\n\n      validate(data, trainingSchema);\n\n      store.newTraining = data;\n    },\n    newActiveTraining: (trainingId: string) => {\n      const templateTraining: Training | undefined = getData().trainings.find(\n        (tr: Training) => tr.id === trainingId,\n      );\n\n      if (!templateTraining) {\n        return;\n      }\n\n      const data: ActiveTraining = {\n        id: uuidv4(),\n        name: templateTraining.name,\n        timestamptz: getTimestampWithTimeZone(new Date()),\n        templateTrainingId: templateTraining.id,\n        exercises: templateTraining.exercises.map((e) => {\n          return {\n            id: uuidv4(),\n            name: e.name,\n            sets: [],\n          };\n        }),\n      };\n\n      validate(data, completedTrainingSchema);\n\n      store.activeTraining = data;\n    },\n    newExercise: () => {\n      const data: Exercise = {\n        id: uuidv4(),\n        name: 'New Exercise',\n        sets: [],\n      };\n\n      validate(data, exerciseSchema);\n\n      store.newExercise = data;\n    },\n    set: (trainingId: string, exerciseId: string) => {\n      const data: Set = {\n        id: uuidv4(),\n        repetitions: 8,\n        weight: 12,\n        done: false,\n      };\n\n      validate(data, setSchema);\n      addSet(trainingId, exerciseId, data);\n    },\n    exerciseType: ({ label, group }) => {\n      const typeId = `type::${uuidv4()}`;\n      const newExerciseType: ExerciseType = {\n        value: typeId,\n        label,\n        group,\n      };\n\n      const existingTypes = getData().exerciseTypes;\n      const updatedTypes = [...existingTypes, newExerciseType];\n\n      _update.exerciseTypes(updatedTypes);\n    },\n    setsPreview: (sets: Set[]): string => {\n      return createSetsPreview(sets);\n    },\n    datePreview: createPreviewDate,\n    timePreview: createPreviewTime,\n  };\n\n  const _update: TrainingsApi['update'] = {\n    allTrainings: (trainings: Training[]) => {\n      validate(trainings, allTrainingsSchema);\n      store.trainings = trainings;\n    },\n    completedTrainings: (trainings: CompletedTraining[]) => {\n      validate(trainings, completedTrainingsSchema);\n      store.completedTrainings = trainings;\n    },\n    exerciseTypes: (exerciseTypes: ExerciseType[]) => {\n      validate(exerciseTypes, exerciseTypesSchema);\n      store.exerciseTypes = exerciseTypes;\n    },\n    newTraining: (input: Partial<Training>) => {\n      const data = {\n        ...getData().newTraining,\n        ...input,\n      };\n\n      validate(data, trainingSchema);\n      store.newTraining = data;\n    },\n    newActiveTraining: (\n      templateTrainingsId: string,\n      templateExerciseId: string,\n      set: Set,\n    ) => {\n      const activeTraining: CompletedTraining = getData().activeTraining;\n\n      if (!activeTraining) {\n        return;\n      }\n\n      const templateTraining: Training | undefined = getData().trainings.find(\n        (tr: Training) => tr.id === templateTrainingsId,\n      );\n\n      if (!templateTraining) {\n        return;\n      }\n\n      const templateExercise: Exercise | undefined =\n        templateTraining.exercises.find((ex) => ex.id === templateExerciseId);\n\n      if (!templateExercise) {\n        return;\n      }\n\n      const data: CompletedTraining = {\n        ...activeTraining,\n        exercises: activeTraining.exercises.map((ex) => {\n          if (ex.name !== templateExercise.name) {\n            return ex;\n          }\n          return {\n            ...ex,\n            sets: ex.sets.concat({\n              id: uuidv4(),\n              repetitions: set.repetitions,\n              weight: set.weight,\n              timestamptz: getTimestampWithTimeZone(new Date()),\n            }),\n          };\n        }),\n      };\n\n      validate(data, completedTrainingSchema);\n\n      store.activeTraining = data;\n    },\n    newExercise: (input: Partial<Exercise>) => {\n      const data = {\n        ...getData().newExercise,\n        ...input,\n      };\n\n      validate(data, exerciseSchema);\n      store.newExercise = data;\n    },\n    training: (trainingId: string, data: Partial<Training>) => {\n      const trainings = getData().trainings.map((tr: Training) => {\n        if (tr.id === trainingId) {\n          return {\n            ...tr,\n            ...data,\n          };\n        }\n\n        return tr;\n      });\n\n      _update.allTrainings(trainings);\n    },\n    exercise: (\n      trainingId: string,\n      exerciseId: string,\n      data: Partial<Exercise>,\n    ) => {\n      const trainings = getData().trainings.map((training: Training) => {\n        if (training.id === trainingId) {\n          return {\n            ...training,\n            exercises: training.exercises.map((exercise: Exercise) => {\n              if (exercise.id === exerciseId) {\n                return {\n                  ...exercise,\n                  ...data,\n                };\n              }\n\n              return exercise;\n            }),\n          };\n        }\n\n        return training;\n      });\n\n      _update.allTrainings(trainings);\n    },\n  };\n\n  const _save: TrainingsApi['save'] = {\n    newTraining: () => {\n      const data = getData().newTraining;\n\n      if (data) {\n        validate(data, trainingSchema);\n        addTraining(data);\n        deleteNewTraining();\n      }\n    },\n    newExercise: (trainingId: string) => {\n      const data = getData().newExercise;\n\n      if (data) {\n        validate(data, exerciseSchema);\n        addExercise(trainingId, data);\n        deleteNewExercise();\n      }\n    },\n    newActiveTraining: () => {\n      const _data = getData().activeTraining;\n\n      if (_data) {\n        const data: ActiveTraining = {\n          ..._data,\n        };\n\n        delete data.templateTrainingId;\n\n        validate(data, completedTrainingSchema);\n\n        const trainings = [...getData().completedTrainings, data];\n\n        _update.completedTrainings(trainings);\n\n        store.activeTraining = null;\n      }\n    },\n  };\n\n  const _delete: TrainingsApi['delete'] = {\n    newTraining: () => {\n      deleteNewTraining();\n    },\n    training: (id: string) => {\n      deleteTraining(id);\n    },\n    completedTraining: async (trainingId: string) => {\n      const training: CompletedTraining = getData().completedTrainings.find(\n        (tr: CompletedTraining) => tr.id === trainingId,\n      );\n      const createdInDbAt = training?.createdInDbAt;\n      const data = getData().completedTrainings.filter(\n        (tr: CompletedTraining) => tr.id !== trainingId,\n      );\n\n      _update.completedTrainings(data);\n\n      if (createdInDbAt) {\n        try {\n          await trainingsServerApi.delete.completedTraining(training);\n        } catch (error) {\n          const restoredData = [...getData().completedTrainings, training];\n\n          _update.completedTrainings(restoredData);\n\n          notificationsApi.addNotification({\n            type: 'error',\n            message: 'Failed to delete training. It was restored.',\n          });\n\n          throw error;\n        }\n      }\n    },\n    newExercise: () => {\n      deleteNewExercise();\n    },\n    exercise: (trainingId: string, exerciseId: string) => {\n      deleteExercise(trainingId, exerciseId);\n    },\n    set: (trainingId: string, exerciseId: string, setId: string) => {\n      deleteSet(trainingId, exerciseId, setId);\n    },\n  };\n\n  return {\n    get: _get,\n    create: _create,\n    update: _update,\n    save: _save,\n    delete: _delete,\n  };\n};\n","export function validateEmail(email: string): boolean {\n  return /^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(email);\n}\n\nexport function validatePassword(password: string): boolean {\n  // Example: at least 6 chars, 1 number, 1 letter\n  return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/.test(password);\n}\n","import type {\n  ApiFactory,\n  AppAPIs,\n  AuthApi,\n  AuthResponseData,\n  Store,\n  TokenStorage,\n} from '../../types';\nimport { Validator } from '../../validation';\nimport { validateEmail, validatePassword } from './authValidation';\n\nexport const createAuthApi: ApiFactory<\n  AuthApi,\n  Pick<AppAPIs, 'httpClientAPI' | 'notificationsApi'>,\n  [TokenStorage]\n> = (\n  tools: { store: Store; validator: Validator },\n  dependencies,\n  tokenStorage,\n) => {\n  const { store } = tools;\n  const { httpClientAPI, notificationsApi } = dependencies;\n\n  async function signup(email: string, password: string) {\n    if (!validateEmail(email)) {\n      throw new Error('Invalid email format');\n    }\n    if (!validatePassword(password)) {\n      throw new Error('Password does not meet requirements');\n    }\n\n    store.auth = { authLoading: true };\n\n    try {\n      const data = await httpClientAPI.post<AuthResponseData>(\n        '/api/signup',\n        {\n          email,\n          password,\n        },\n        { credentials: 'include' },\n      );\n\n      const session = data.session;\n\n      tokenStorage.saveToken({\n        access_token: session.access_token,\n        refresh_token: session.refresh_token,\n        expires_in: session.expires_in,\n        expires_at: session.expires_at,\n      });\n      store.auth = {\n        user: data.user,\n        isAuthenticated: true,\n        authLoading: false,\n        authError: null,\n      };\n    } catch (e: any) {\n      const errorMessage = `Signup failed. Error: ${e.message || String(e) || 'Unknown error'}`;\n\n      store.auth = {\n        authError: errorMessage,\n        authLoading: false,\n      };\n      notificationsApi.addNotification({\n        type: 'error',\n        message: errorMessage,\n      });\n    }\n  }\n\n  async function signin(email: string, password: string) {\n    if (!validateEmail(email)) {\n      throw new Error('Invalid email format');\n    }\n\n    store.auth = { authLoading: true };\n\n    try {\n      const data = await httpClientAPI.post<AuthResponseData>(\n        '/api/signin',\n        {\n          email,\n          password,\n        },\n        { credentials: 'include' },\n      );\n\n      const session = data.session;\n\n      tokenStorage.saveToken({\n        access_token: session.access_token,\n        refresh_token: session.refresh_token,\n        expires_in: session.expires_in,\n        expires_at: session.expires_at,\n      });\n\n      store.auth = {\n        user: data.user,\n        isAuthenticated: true,\n        authLoading: false,\n        authError: null,\n      };\n    } catch (e: any) {\n      const errorMessage = `Signin failed. Error: ${e.message || String(e) || 'Unknown error'}`;\n\n      store.auth = {\n        authError: errorMessage,\n        authLoading: false,\n      };\n      notificationsApi.addNotification({\n        type: 'error',\n        message: errorMessage,\n      });\n    }\n  }\n\n  async function signout() {\n    store.auth = { authLoading: true };\n\n    try {\n      await httpClientAPI.post('/api/logout', {}, { credentials: 'include' });\n\n      tokenStorage.clearToken();\n\n      store.auth = {\n        user: null,\n        isAuthenticated: false,\n        authLoading: false,\n        authError: null,\n      };\n    } catch (e: any) {\n      const errorMessage = `Signout failed. Error: ${e.message || String(e) || 'Unknown error'}`;\n\n      store.auth = {\n        authError: errorMessage,\n        authLoading: false,\n      };\n      notificationsApi.addNotification({\n        type: 'error',\n        message: errorMessage,\n      });\n    }\n  }\n\n  async function getSession() {\n    store.auth = { authLoading: true };\n\n    try {\n      const data = await httpClientAPI.get<AuthResponseData>('/api/session', {\n        credentials: 'include',\n      });\n\n      store.auth = {\n        user: data.user,\n        isAuthenticated: !!data.user,\n        authLoading: false,\n        authError: null,\n      };\n    } catch (e: any) {\n      const errorMessage = `Get session failed. Error: ${e.message || String(e) || 'Unknown error'}`;\n\n      store.auth = {\n        authError: errorMessage,\n        authLoading: false,\n      };\n      notificationsApi.addNotification({\n        type: 'error',\n        message: errorMessage,\n      });\n    }\n  }\n\n  async function refreshToken() {\n    try {\n      const data = await httpClientAPI.post<AuthResponseData>(\n        '/api/refresh',\n        {},\n        { credentials: 'include' },\n      );\n\n      const session = data.session;\n\n      tokenStorage.saveToken({\n        access_token: session.access_token,\n        refresh_token: session.refresh_token,\n        expires_in: session.expires_in,\n        expires_at: session.expires_at,\n      });\n\n      store.auth = {\n        user: data.user,\n        isAuthenticated: !!data.user,\n      };\n    } catch (e: any) {\n      const errorMessage = `Refresh token failed. Error: ${e.message || String(e) || 'Unknown error'}`;\n\n      store.auth = {\n        authError: errorMessage,\n      };\n      notificationsApi.addNotification({\n        type: 'error',\n        message: errorMessage,\n      });\n    }\n  }\n\n  return {\n    signup,\n    signin,\n    signout,\n    getSession,\n    refreshToken,\n  };\n};\n","import {\n  ApiTools,\n  AuthResponseData,\n  HttpClientAPI,\n  TokenPair,\n  TokenStorage,\n} from '../../types';\n\ntype HttpMethod = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';\n\ninterface HttpClientOptions {\n  tools: ApiTools;\n  baseUrl: string;\n  tokenStorage: TokenStorage;\n  refreshEndpoint: string; // e.g., '/api/refresh'\n  defaultHeaders?: Record<string, string>;\n}\n\ninterface RequestOptions<Body = any> {\n  method?: HttpMethod;\n  headers?: Record<string, string>;\n  body?: Body;\n}\n\nexport function createHttpClientAPI(options: HttpClientOptions): HttpClientAPI {\n  const {\n    tools,\n    baseUrl,\n    tokenStorage,\n    refreshEndpoint,\n    defaultHeaders = {\n      'Content-Type': 'application/json',\n      credentials: 'include',\n    },\n  } = options;\n  const { store } = tools;\n\n  let refreshing = false;\n  let refreshQueue: ((token: string) => void)[] = [];\n\n  async function performRefresh(): Promise<string | undefined> {\n    if (refreshing) {\n      console.log('>> refreshing <<', refreshing);\n      return new Promise((resolve) => {\n        refreshQueue.push(resolve);\n      });\n    }\n\n    refreshing = true;\n\n    let newToken: TokenPair | null = null;\n\n    try {\n      const currentToken = tokenStorage.getToken();\n\n      if (!currentToken) return;\n\n      const res = await fetch(`${baseUrl}${refreshEndpoint}`, {\n        method: 'POST',\n        headers: { ...defaultHeaders },\n        body: JSON.stringify({ refreshToken: currentToken.refresh_token }),\n      });\n\n      if (!res.ok) {\n        tokenStorage.clearToken();\n        return;\n      }\n\n      const refreshedSessionData = (await res.json()) as AuthResponseData;\n      const refreshedSession = refreshedSessionData.session;\n\n      newToken = {\n        access_token: refreshedSession.access_token,\n        refresh_token: refreshedSession.refresh_token,\n        expires_in: refreshedSession.expires_in,\n        expires_at: refreshedSession.expires_at,\n      };\n\n      tokenStorage.saveToken(newToken);\n    } finally {\n      refreshing = false;\n      if (newToken) {\n        refreshQueue.forEach((cb) => cb(newToken!.access_token));\n      }\n      refreshQueue = [];\n    }\n  }\n\n  const isExpireSoonFromNow = (expiresAtInSeconds: number | undefined) => {\n    if (!expiresAtInSeconds) return;\n\n    const nowInSeconds = Math.floor(Date.now() / 1000);\n\n    // refresh 30s early\n    return nowInSeconds >= expiresAtInSeconds - 30;\n  };\n\n  async function request<TResponse = Response, TBody = any>(\n    url: string,\n    reqOptions: RequestOptions<TBody> = {},\n    retry = true,\n  ): Promise<TResponse> {\n    const { method = 'GET', headers = {}, body, ...fetchOptions } = reqOptions;\n\n    const tokenPair = tokenStorage.getToken();\n    const expires_at = tokenPair?.expires_at;\n\n    if (isExpireSoonFromNow(expires_at)) {\n      await performRefresh();\n    }\n\n    const updatedTokens = tokenStorage.getToken();\n    const accessToken = updatedTokens?.access_token;\n    const refreshToken = updatedTokens?.refresh_token;\n\n    const mergedHeaders: Record<string, string> = {\n      ...defaultHeaders,\n      ...headers,\n      // TODO interpolate `token_type` instead of hardcoded \"Bearer\"\n      ...(accessToken ? { Authorization: `Bearer ${accessToken}` } : {}),\n      ...(refreshToken ? { 'x-ref-tok': refreshToken } : {}),\n    };\n\n    const response = await fetch(`${baseUrl}${url}`, {\n      ...fetchOptions,\n      method,\n      headers: mergedHeaders,\n      body: body !== undefined ? JSON.stringify(body) : undefined,\n    });\n\n    if (response.status === 401 && retry) {\n      await performRefresh();\n\n      const newToken = tokenStorage.getToken();\n\n      if (!newToken) {\n        const errMsg = 'Unauthorized. Token refresh failed.';\n        store.auth = {\n          isAuthenticated: false,\n          authError: errMsg,\n        };\n        throw new Error(errMsg);\n      }\n\n      const RETRY = false;\n      return request<TResponse, TBody>(url, reqOptions, RETRY);\n    }\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`HTTP ${response.status}: ${errorText}`);\n    }\n\n    const contentType = response.headers.get('Content-Type');\n    if (contentType?.includes('application/json')) {\n      return response.json() as Promise<TResponse>;\n    }\n\n    // fallback for non-JSON responses\n    return response.text() as unknown as Promise<TResponse>;\n  }\n\n  return {\n    get: <TResponse>(\n      url: string,\n      options?: RequestInit & { headers?: Record<string, string> },\n    ) => request<TResponse>(url, { ...options, method: 'GET' }),\n    post: <TResponse, TBody = any>(\n      url: string,\n      body?: TBody,\n      options?: RequestInit & { headers?: Record<string, string> },\n    ) => request<TResponse, TBody>(url, { ...options, method: 'POST', body }),\n    put: <TResponse, TBody = any>(\n      url: string,\n      body?: TBody,\n      options?: RequestInit & { headers?: Record<string, string> },\n    ) => request<TResponse, TBody>(url, { ...options, method: 'PUT', body }),\n    patch: <TResponse, TBody = any>(\n      url: string,\n      body?: TBody,\n      options?: RequestInit & { headers?: Record<string, string> },\n    ) => request<TResponse, TBody>(url, { ...options, method: 'PATCH', body }),\n    delete: <TResponse>(\n      url: string,\n      options?: RequestInit & { headers?: Record<string, string> },\n    ) => request<TResponse>(url, { ...options, method: 'DELETE' }),\n  };\n}\n","const sr_completedTrainings = {\n  id: '/CompletedTrainingsServerReadSchema',\n  type: 'array',\n  items: {\n    $ref: '/CompletedTrainingServerReadSchema',\n  },\n};\n\nconst sr_completedTraining = {\n  id: '/CompletedTrainingServerReadSchema',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n    },\n    name: {\n      type: 'string',\n    },\n    exercises: {\n      type: 'array',\n      items: {\n        $ref: '/CompletedExerciseServerReadSchema',\n      },\n    },\n    created_at: {\n      type: 'string',\n    },\n    updated_at: {\n      type: ['string', 'null'],\n    },\n    user_id: {\n      type: 'string',\n    },\n  },\n  required: ['id', 'name', 'exercises', 'created_at', 'user_id'],\n};\n\nconst sr_completedExercise = {\n  id: '/CompletedExerciseServerReadSchema',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n    },\n    name: {\n      type: 'string',\n    },\n    // e.g. \"bicepsCurls\", \"barbellBenchPress\"\n    // or \"custom\" until this type is converted to a unique type\n    type: {\n      type: 'string',\n    },\n    workout_id: {\n      type: 'string',\n    },\n    reps: {\n      type: 'number',\n    },\n    weight: {\n      type: 'number',\n    },\n    created_at: {\n      type: 'string',\n    },\n    date: {\n      type: 'string',\n    },\n    updated_at: {\n      type: ['string', 'null'],\n    },\n    user_id: {\n      type: 'string',\n    },\n  },\n  required: [\n    'id',\n    'type',\n    'name',\n    'workout_id',\n    'reps',\n    'weight',\n    'created_at',\n    'date',\n    'user_id',\n  ],\n};\n\nconst sw_completedTrainings = {\n  id: '/CompletedTrainingsServerWriteSchema',\n  type: 'array',\n  items: {\n    $ref: '/CompletedTrainingServerWriteSchema',\n  },\n};\n\nconst sw_completedTraining = {\n  id: '/CompletedTrainingServerWriteSchema',\n  type: 'object',\n  properties: {\n    tempId: {\n      type: 'string',\n    },\n    name: {\n      type: 'string',\n    },\n    exercises: {\n      type: 'array',\n      items: {\n        $ref: '/CompletedExerciseServerWriteSchema',\n      },\n    },\n    date: {\n      type: 'string',\n    },\n  },\n  required: ['name', 'exercises', 'date'],\n};\n\nconst sw_completedExercise = {\n  id: '/CompletedExerciseServerWriteSchema',\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string',\n    },\n    // e.g. \"bicepsCurls\", \"barbellBenchPress\"\n    // or \"custom\" until this type is converted to a unique type\n    type: {\n      type: 'string',\n    },\n    reps: {\n      type: 'number',\n    },\n    weight: {\n      type: 'number',\n    },\n    date: {\n      type: 'string',\n    },\n  },\n  required: ['type', 'name', 'reps', 'weight', 'date'],\n};\n\nexport const ServerReadSchemas = {\n  completedTrainings: sr_completedTrainings,\n  completedTraining: sr_completedTraining,\n  completedExercise: sr_completedExercise,\n};\n\nexport const ServerWriteSchemas = {\n  completedTrainings: sw_completedTrainings,\n  completedTraining: sw_completedTraining,\n  completedExercise: sw_completedExercise,\n};\n","import { v4 as uuidv4 } from 'uuid';\nimport groupBy from 'lodash/groupBy';\nimport { format, toZonedTime } from 'date-fns-tz';\n\nimport {\n  ApiTools,\n  ApiFactory,\n  AppAPIs,\n  TrainingsServerApi,\n  CompletedTraining,\n  CompletedTrainingExcercise,\n  ServerWrite,\n  ServerRead,\n  TimestampTZ,\n} from '../../types';\nimport { ServerReadSchemas, ServerWriteSchemas } from './schemas';\n\nexport const createTrainingsServerApi: ApiFactory<\n  TrainingsServerApi,\n  Pick<AppAPIs, 'httpClientAPI'>\n> = ({ validator }: ApiTools, dependencies) => {\n  validator.addSchema(ServerReadSchemas.completedTrainings);\n  validator.addSchema(ServerReadSchemas.completedTraining);\n  validator.addSchema(ServerReadSchemas.completedExercise);\n  validator.addSchema(ServerWriteSchemas.completedTrainings);\n  validator.addSchema(ServerWriteSchemas.completedTraining);\n  validator.addSchema(ServerWriteSchemas.completedExercise);\n\n  const { httpClientAPI } = dependencies;\n\n  const validate = (data: any, schema: any) => {\n    const validationResult = validator.validate(data, schema);\n\n    if (!validationResult.valid) {\n      console.error(\n        '[ERROR_DATA] Validation for Server Training failed!',\n        validationResult.errors,\n      );\n      throw new Error('Validation for Server Training failed!');\n    }\n  };\n\n  const converUTCtoTimeZoned = <\n    T extends string | TimestampTZ | undefined | null,\n  >(\n    date: T,\n  ): T => {\n    if (!date) return date;\n\n    // Get browser/user timezone\n    const userTz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n    // Convert UTC  user timezone\n    const zoned = toZonedTime(date, userTz);\n\n    // Format\n    const formatted = format(zoned, `yyyy-MM-dd'T'HH:mm:ss.SSSXXX`, {\n      timeZone: userTz,\n    });\n\n    return formatted as T;\n  };\n\n  const getCompletedTrainings = async (): Promise<\n    ServerRead.sr_CompletedTraining[]\n  > => {\n    let data = [];\n\n    try {\n      data = await httpClientAPI.get<any[]>('/api/workouts');\n\n      validate(data, ServerReadSchemas.completedTrainings);\n\n      console.log('=== getCompletedTrainings ===', data);\n\n      return data;\n    } catch (error) {\n      console.error('[TrainingsServerApi]', error);\n      throw error;\n    }\n  };\n\n  const deleteCompletedTraining = async (data: CompletedTraining) => {\n    try {\n      const workoutId = data.id;\n      await httpClientAPI.delete<any>(`/api/workouts/${workoutId}`);\n    } catch (error) {\n      console.error('[TrainingsServerApi]', error);\n      throw error;\n    }\n  };\n\n  const completedExerciseToServerWriteType = (\n    item: CompletedTrainingExcercise,\n  ): ServerWrite.sw_CompletedExcercise[] => {\n    return item.sets.map((set) => {\n      return {\n        name: item.name,\n        date: set.timestamptz,\n        type: 'custom',\n        reps: set.repetitions,\n        weight: set.weight,\n      };\n    });\n  };\n\n  const completedTrainingToServerWriteType = (\n    item: CompletedTraining,\n  ): ServerWrite.sw_CompletedTraining => {\n    return {\n      tempId: item.id,\n      name: item.name,\n      date: item.timestamptz,\n      exercises: item.exercises.flatMap(completedExerciseToServerWriteType),\n    };\n  };\n\n  const toClientCompletedTrainings = (\n    data: ServerRead.sr_CompletedTraining[],\n  ): CompletedTraining[] => {\n    const result: CompletedTraining[] = data.map((tr) => {\n      const grouped = groupBy(tr.exercises, (it) => it.name);\n      const exercises = Object.values(grouped).map((gr) => ({\n        /* \"id\" - only for client, not used on the server */\n        id: uuidv4(),\n        // TODO use exercise type instead of name? (it's stable)\n        name: gr?.[0]?.name,\n        sets:\n          gr?.map((it) => ({\n            id: it.id,\n            repetitions: it.reps,\n            weight: it.weight,\n            timestamptz: converUTCtoTimeZoned(it.date),\n          })) ?? [],\n      })) as CompletedTrainingExcercise[];\n      return {\n        id: tr.id,\n        name: tr.name,\n        exercises,\n        timestamptz: converUTCtoTimeZoned(tr.date),\n        createdInDbAt: converUTCtoTimeZoned(tr.created_at),\n        updatedInDbAt: converUTCtoTimeZoned(tr.updated_at) ?? undefined,\n      };\n    });\n    return result;\n  };\n\n  const createCompletedTrainings = async (data: CompletedTraining[]) => {\n    try {\n      const workouts = data.map(completedTrainingToServerWriteType);\n\n      console.log('=== createCompletedTrainings ===', workouts);\n\n      validate(workouts, ServerWriteSchemas.completedTrainings);\n\n      const result = await httpClientAPI.post<\n        ServerRead.sr_CompletedTraining[],\n        { workouts: ServerWrite.sw_CompletedTraining[] }\n      >('/api/workouts', { workouts });\n\n      return result;\n    } catch (error) {\n      console.error('[TrainingsServerApi]', error);\n      throw error;\n    }\n  };\n\n  const _get: TrainingsServerApi['get'] = {\n    completedTrainings: getCompletedTrainings,\n  };\n\n  const _create: TrainingsServerApi['create'] = {\n    completedTrainings: createCompletedTrainings,\n  };\n\n  const _update: TrainingsServerApi['update'] = {};\n\n  const _delete: TrainingsServerApi['delete'] = {\n    completedTraining: deleteCompletedTraining,\n  };\n\n  const _mappers: TrainingsServerApi['mappers'] = {\n    toClientCompletedTrainings,\n  };\n\n  return {\n    get: _get,\n    create: _create,\n    update: _update,\n    delete: _delete,\n    mappers: _mappers,\n  };\n};\n","import { getTimestampWithTimeZone } from '../../../utils';\nimport {\n  ApiTools,\n  ApiFactory,\n  AppAPIs,\n  SyncApi,\n  CompletedTraining,\n} from '../../types';\n\nexport const createSyncApi: ApiFactory<\n  SyncApi,\n  Pick<\n    AppAPIs,\n    'httpClientAPI' | 'trainingsServerApi' | 'trainingsApi' | 'notificationsApi'\n  >\n> = ({ store }: ApiTools, dependencies) => {\n  const { httpClientAPI, trainingsServerApi, trainingsApi, notificationsApi } =\n    dependencies;\n  const getData = () => store.getStoreData(['completedTrainings', 'sync']);\n\n  const hasServerChanges = async () => {\n    try {\n      const quereParams = new URLSearchParams({\n        since:\n          store.getStoreData(['sync']).sync.lastSyncAt ||\n          // no \"lastSyncAt\" for new user\n          getTimestampWithTimeZone(new Date()),\n      });\n      const url = `/api/changes?${quereParams.toString()}`;\n\n      const result = await httpClientAPI.get<any>(url);\n\n      const serverHasChanges = Boolean(\n        result.completedTrainings.data.length ||\n        result.completedExercises.data.length,\n      );\n\n      store.sync = {\n        serverHasChanges,\n      };\n    } catch (error) {\n      console.error(\n        '[TrainingsServerApi] hasServerChanges failed. Error:',\n        error,\n      );\n      throw error;\n    }\n  };\n\n  /**\n   * Save on the server (insert into DB) all completed trainings\n   * that were not synced earlier.\n   * After that substitute local ones with the ones from\n   * the request result.\n   * Saved trainings will be marked with `createdInDbAt: ...`.\n   */\n  const syncCompletedTrainings = async () => {\n    try {\n      const items: CompletedTraining[] = getData().completedTrainings.filter(\n        (tr: CompletedTraining) => !tr.createdInDbAt,\n      );\n      const itemsIds = items.map((it) => it.id);\n\n      if (!items.length) {\n        return;\n      }\n\n      const result = await trainingsServerApi.create.completedTrainings(items);\n      const savedItems: CompletedTraining[] =\n        trainingsServerApi.mappers.toClientCompletedTrainings(result);\n\n      trainingsApi.update.completedTrainings([\n        ...getData().completedTrainings.filter(\n          (tr: CompletedTraining) => !itemsIds.includes(tr.id),\n        ),\n        ...savedItems,\n      ]);\n    } catch (error: any) {\n      throw new Error(`Failed to sync completed trainings: ${error.message}`);\n    }\n  };\n\n  const sync = async () => {\n    store.sync = {\n      isLoading: true,\n    };\n\n    try {\n      await syncCompletedTrainings();\n\n      store.sync = {\n        lastSyncAt: getTimestampWithTimeZone(new Date()),\n        isLoading: false,\n        error: undefined, // reset the prev error\n      };\n    } catch (error: any) {\n      /**\n       * Each member of the sync process must re-throw a human readable error.\n       * Here's a centralized place to notify the system and the user\n       * about the error.\n       */\n      store.sync = {\n        isLoading: false,\n        error: error.message,\n      };\n      notificationsApi.addNotification({\n        type: 'error',\n        message: error.message || 'Sync failed',\n      });\n    }\n  };\n\n  return {\n    hasServerChanges,\n    sync,\n  };\n};\n","import { v4 as uuidv4 } from 'uuid';\n\nimport { ApiFactory, Notification, NotificationsApi } from '../../types';\nimport { getTimestampWithTimeZone } from '../../../utils';\n\nexport const createNotificationsApi: ApiFactory<NotificationsApi, {}> = ({\n  store,\n}) => {\n  const getNotifications = () =>\n    store.getStoreData(['notifications']).notifications || [];\n\n  const addNotification = (notification: Partial<Notification>) => {\n    const id = uuidv4();\n    const full = {\n      id,\n      type: notification.type ?? 'info',\n      message: notification.message ?? '',\n      createdAt: getTimestampWithTimeZone(new Date()),\n      meta: notification.meta ?? {},\n    };\n\n    store.notifications = [full, ...getNotifications()].slice(0, 8);\n\n    return id;\n  };\n\n  const removeNotification = (id: string) => {\n    store.notifications = getNotifications().filter((n: any) => n.id !== id);\n  };\n\n  return {\n    getNotifications,\n    addNotification,\n    removeNotification,\n  };\n};\n","import { ApiTools, TokenPair, TokenStorage } from '../types';\nimport { createNavigationApi } from './navigationApi';\nimport { createTrainingsApi } from './trainingsApi';\nimport { createAuthApi } from './authApi';\nimport { createHttpClientAPI } from './httpClientApi';\nimport { createTrainingsServerApi } from './trainingsServerApi';\nimport { createSyncApi } from './syncApi';\nimport { createNotificationsApi } from './notificationsApi';\n\nexport const createAPIs = (tools: ApiTools) => {\n  const accessTokenKey = '__yg_at_rt';\n\n  const tokenStorage: TokenStorage = {\n    getToken: () => {\n      const item = localStorage.getItem(accessTokenKey);\n      if (!item) {\n        return;\n      }\n      return JSON.parse(item);\n    },\n    saveToken: (t: TokenPair) =>\n      localStorage.setItem(accessTokenKey, JSON.stringify(t)),\n    clearToken: () => localStorage.removeItem(accessTokenKey),\n  };\n\n  const httpClientAPI = createHttpClientAPI({\n    tools,\n    baseUrl:\n      process.env.NODE_ENV === 'production'\n        ? 'https://yourgym.onrender.com'\n        : 'http://localhost:3100',\n    tokenStorage,\n    refreshEndpoint: '/api/refresh',\n  });\n\n  const notificationsApi = createNotificationsApi(tools, {});\n\n  const trainingsServerApi = createTrainingsServerApi(tools, { httpClientAPI });\n  const trainingsApi = createTrainingsApi(tools, {\n    httpClientAPI,\n    trainingsServerApi,\n    notificationsApi,\n  });\n  const syncApi = createSyncApi(tools, {\n    httpClientAPI,\n    trainingsServerApi,\n    trainingsApi,\n    notificationsApi,\n  });\n\n  return {\n    navigationApi: createNavigationApi(tools, {}),\n    trainingsApi,\n    authApi: createAuthApi(\n      tools,\n      {\n        httpClientAPI,\n        notificationsApi,\n      },\n      tokenStorage,\n    ),\n    httpClientAPI,\n    trainingsServerApi,\n    syncApi,\n    notificationsApi,\n  };\n};\n","interface ResumeManagerConfig {\n  onResume: () => Promise<void>;\n  onRetryFailed?: (err: Error) => Promise<void>;\n  logInfo?: (data: { message: string }) => void;\n}\n\n/**\n * Motivation:\n * On iOS, when the app goes to background and comes back,\n * there is a chance that network connections are dropped.\n * This leads to HTTP requests failing with error\n * \"Load failed\" in iOS or \"Failed to fetch\" in Safari, etc.\n *\n * How to fix:\n * To mitigate this, we introduce a small delay on resume from background,\n * and retry once if the first attempt fails.\n */\nexport class ResumeManager {\n  private resumeTimer: number | null = null;\n  private isRunning = false;\n  private lastResume = 0;\n  private onResume: ResumeManagerConfig['onResume'] = async () => {};\n  private onRetryFailed: Required<ResumeManagerConfig>['onRetryFailed'] =\n    async () => {};\n  private logInfo: Required<ResumeManagerConfig>['logInfo'] = () => {};\n\n  constructor() {}\n\n  init(config: ResumeManagerConfig) {\n    this.onResume = config.onResume;\n    if (config.onRetryFailed) {\n      this.onRetryFailed = config.onRetryFailed;\n    }\n    if (config.logInfo) {\n      this.logInfo = config.logInfo;\n    }\n\n    document.addEventListener('visibilitychange', this.handleSignal, false);\n    window.addEventListener('pageshow', this.handleSignal, false);\n    window.addEventListener('focus', this.handleSignal, false);\n\n    return () => {\n      document.removeEventListener(\n        'visibilitychange',\n        this.handleSignal,\n        false,\n      );\n      window.removeEventListener('pageshow', this.handleSignal, false);\n      window.removeEventListener('focus', this.handleSignal, false);\n    };\n  }\n\n  private handleSignal = () => {\n    if (document.visibilityState !== 'visible') {\n      // hack, until it's clear why sometimes the flow exits\n      // withouth setting it to \"false\"\n      this.isRunning = false;\n      return;\n    }\n\n    if (!navigator.onLine) {\n      this.logInfo({\n        message: 'ResumeManager: OFFLINE when entring `handleSignal`.',\n      });\n    }\n\n    const now = Date.now();\n    if (now - this.lastResume < 2000) return; // guard spam\n\n    if (this.resumeTimer) {\n      clearTimeout(this.resumeTimer);\n    }\n\n    this.resumeTimer = window.setTimeout(() => {\n      if (!navigator.onLine) {\n        this.logInfo({\n          message: 'ResumeManager: OFFLINE when calling `this.runResume()` !!!',\n        });\n      }\n      this.resumeTimer = null;\n      this.runResume();\n    }, 500); //  iOS-safe delay\n  };\n\n  private async runResume() {\n    if (this.isRunning) return;\n\n    this.isRunning = true;\n    this.lastResume = Date.now();\n\n    try {\n      await this.onResume();\n    } catch (err) {\n      console.error('ResumeManager: resume failed, retrying once', err);\n      try {\n        await this.retryOnce();\n      } catch (retryErr) {\n        console.error('ResumeManager: resume retry failed', retryErr);\n      }\n    } finally {\n      this.isRunning = false;\n    }\n  }\n\n  private async retryOnce() {\n    // If offline, wait for an `online` event (with timeout); otherwise wait a short backoff\n    if (typeof navigator !== 'undefined' && !navigator.onLine) {\n      await this.waitForOnline();\n    } else {\n      await this.sleep(1000);\n    }\n\n    try {\n      await this.onResume();\n    } catch (err: any) {\n      try {\n        await this.onRetryFailed(err);\n      } catch (handlerErr) {\n        console.error('ResumeManager: onRetryFailed handler threw', handlerErr);\n      }\n    }\n  }\n\n  // Wait until the browser reports `navigator.onLine === true` or an `online`\n  // event occurs, or until `timeoutMs` elapses. Ensures event listener and\n  // timeout are cleaned up properly.\n  private waitForOnline(timeoutMs = 30_000): Promise<void> {\n    if (typeof navigator === 'undefined' || navigator.onLine) {\n      return Promise.resolve();\n    }\n\n    return new Promise<void>((resolve) => {\n      let to: number | null = null;\n\n      const cleanup = () => {\n        window.removeEventListener('online', onOnline);\n        if (to !== null) {\n          clearTimeout(to);\n          to = null;\n        }\n      };\n\n      const onOnline = () => {\n        cleanup();\n        resolve();\n      };\n\n      to = window.setTimeout(() => {\n        cleanup();\n        resolve();\n      }, timeoutMs);\n\n      window.addEventListener('online', onOnline, false);\n    });\n  }\n\n  private sleep(ms: number) {\n    return new Promise((res) => setTimeout(res, ms));\n  }\n}\n","import { createRAFInterval } from '../../utils';\nimport { ResumeManager } from './resumeManager';\nimport { AppAPIs, Store } from '../types';\n\nexport const initGlobalTasks = (\n  store: Store,\n  {\n    authApi,\n    syncApi,\n    trainingsApi,\n    trainingsServerApi,\n    notificationsApi,\n  }: AppAPIs,\n) => {\n  let _stopPeriodicTasks = () => {};\n  const resumeManager = new ResumeManager();\n\n  /* ========= LIFECYCLE ========= */\n\n  checkAuthStatus();\n  checkSyncStatus();\n  runPeriodicTasks();\n\n  resumeManager.init({\n    onResume: resumeAppFromBackground,\n    onRetryFailed: async (err) => {\n      notificationsApi.addNotification({\n        type: 'error',\n        message: `Resume from background failed. Error: ${err?.message || String(err)}`,\n      });\n    },\n    logInfo: ({ message }) => {\n      notificationsApi.addNotification({\n        type: 'info',\n        message,\n      });\n    },\n  });\n\n  window.document.addEventListener(\n    'visibilitychange',\n    () => {\n      // move into background / tab becomes inactive\n      if (document.visibilityState === 'hidden') {\n        stopPeriodicTasks();\n      }\n    },\n    false,\n  );\n\n  let _prevIsAuthenticated = store.auth?.isAuthenticated;\n\n  store.subscribe(() => {\n    if (\n      isChangedAndNewValueTrue(\n        _prevIsAuthenticated,\n        store.auth?.isAuthenticated,\n      )\n    ) {\n      _prevIsAuthenticated = store.auth?.isAuthenticated;\n\n      void hydrateStoreFromServer();\n    }\n  }, ['auth']);\n\n  /* ========= IMPLEMENTATION ========= */\n\n  async function resumeAppFromBackground() {\n    // return from background / tab becomes active\n    await Promise.all([checkAuthStatus(), checkSyncStatus()]);\n\n    // wait for auth check before hydration\n    await hydrateStoreFromServer();\n\n    runPeriodicTasks();\n  }\n\n  function checkAuthStatus() {\n    return authApi.getSession();\n  }\n\n  function checkSyncStatus() {\n    return syncApi.hasServerChanges();\n  }\n\n  function stopPeriodicTasks() {\n    _stopPeriodicTasks();\n  }\n\n  function runPeriodicTasks() {\n    const ONE_MINUTE = 1000 * 60;\n    const PERIODIC_TASKS_TIME_MS = ONE_MINUTE * 5;\n    _stopPeriodicTasks = createRAFInterval(() => {\n      checkSyncStatus().catch((error) => {\n        const errorMessage = `[PeriodicTasks] check sync failed. Error: ${error?.message || String(error) || 'Unknown error'}`;\n\n        notificationsApi.addNotification({\n          type: 'error',\n          message: errorMessage,\n        });\n      });\n    }, PERIODIC_TASKS_TIME_MS);\n  }\n\n  let _hydrateInProgress = false;\n  let _hydrationStart = 0;\n\n  async function hydrateStoreFromServer() {\n    // TODO: skip in tests until properly configured for tests\n    if (process.env.NODE_ENV === 'test') {\n      return;\n    }\n\n    // a lock prevents concurrent hydrations\n    if (_hydrateInProgress) {\n      return;\n    }\n\n    try {\n      const hasServerDataInIndexedDB = await store.hasServerDataInIndexedDB();\n\n      if (!hasServerDataInIndexedDB) {\n        if (store.auth?.isAuthenticated) {\n          _hydrationStart = performance.now();\n\n          _hydrateInProgress = true;\n\n          store.uiBlockingLayer = {\n            isVisible: true,\n            message: 'Hydrating local store with data from server...',\n          };\n\n          console.log(\n            '[HydrateStoreFromServer]  Starting hydration from server...',\n          );\n\n          // Promise.all preserves the order of the results\n          const [serverCompletedTrainings] = await Promise.all([\n            trainingsServerApi.get.completedTrainings(),\n          ]);\n\n          const clientCompletedTrainings =\n            trainingsServerApi.mappers.toClientCompletedTrainings(\n              serverCompletedTrainings,\n            );\n\n          trainingsApi.update.completedTrainings(clientCompletedTrainings);\n\n          console.log(\n            '[HydrateStoreFromServer]  Hydration from server completed successfully!',\n          );\n        }\n      }\n    } catch (error: any) {\n      const errorMessage = `[HydrateStoreFromServer]  Failed to hydrate store from server. Error: ${error?.message || String(error) || 'Unknown error'}`;\n\n      notificationsApi.addNotification({\n        type: 'error',\n        message: errorMessage,\n      });\n      console.error(errorMessage);\n    } finally {\n      _hydrateInProgress = false;\n\n      const removeUiBlockingLayer = () => {\n        store.uiBlockingLayer = {\n          isVisible: false,\n          message: undefined,\n        };\n      };\n\n      const hydrationDuration = performance.now() - _hydrationStart;\n\n      if (hydrationDuration < 1000) {\n        setTimeout(() => {\n          removeUiBlockingLayer();\n        }, 1500);\n      } else {\n        removeUiBlockingLayer();\n      }\n    }\n  }\n\n  function isChangedAndNewValueTrue(\n    prevValue: boolean | undefined,\n    newValue: boolean | undefined,\n  ): boolean {\n    return prevValue !== newValue && newValue === true;\n  }\n};\n","import { Store } from '../store';\nimport { createAPIs } from '../apis';\nimport { Validator } from '../validation';\nimport { initGlobalTasks } from './globalTasks';\n\nexport const initApp = async () => {\n  const store = new Store();\n  const validator = new Validator();\n\n  try {\n    // TODO: skip in tests, becase next test block is affected by previous test data from indexedDB\n    if (process.env.NODE_ENV !== 'test') {\n      await store.hydrateFromIndexedDB();\n    }\n  } catch (error: any) {\n    console.error(\n      '[initApp] hydrateFromIndexedDB failed. Error:',\n      error?.message || String(error) || 'Unknown error',\n    );\n  }\n\n  const apis = createAPIs({\n    store,\n    validator,\n  });\n\n  const appContext = {\n    serviceLocator: {\n      getStore: () => ({\n        getStoreData: store.getStoreData,\n        subscribe: store.subscribe,\n      }),\n      getAPIs: () => apis,\n    },\n  };\n\n  initGlobalTasks(store, apis);\n\n  window._debugTools_ = {\n    store,\n    validator,\n    apis,\n  };\n\n  return {\n    apis,\n    appContext,\n  };\n};\n","import { createRoot } from 'react-dom/client';\n\nimport { App } from './components';\nimport { initApp } from './model';\n\nwindow.addEventListener(\n  'load',\n  async () => {\n    console.log('>>> LOAD event <<<');\n\n    const { apis, appContext } = await initApp();\n\n    const rootEl = document.getElementById('root');\n    if (rootEl) {\n      const root = createRoot(rootEl);\n      root.render(<App apis={apis} appContext={appContext} />);\n    }\n  },\n  false,\n);\n"],"file":"assets/index-BbF_7afv.js"}